(this.__LOADABLE_LOADED_CHUNKS__=this.__LOADABLE_LOADED_CHUNKS__||[]).push([[25],{1399:function(e,t,i){},1400:function(e,t,i){},1401:function(e,t,i){},1402:function(e,t,i){},1403:function(e,t,i){},1424:function(e,t,i){},1425:function(e,t,i){},1427:function(e,t,i){},1428:function(e,t,i){},1429:function(e,t,i){},1430:function(e,t,i){"use strict";var n=i(33),o=i(197),l=i(1),a=i.n(l),c=i(2),r=i(196),d=i.n(r),s=i(203),u=i(205),v=i(200),b=i(215),j=i(938),p=i(2486),O=i(268),m=i(213),f=i(2454),x=i(592),h=i(450),g=i(359),T=i(319),k=i(1433),y=i(1431),_=i.n(y),A=i(5),N=i.n(A),S=c.default.lib({resolved:{},chunkName:function(){return"react-calendar"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:function(){return i.e(21).then(i.bind(null,296))},requireAsync:function(e){var t=this,i=this.resolve(e);return this.resolved[i]=!1,this.importAsync(e).then((function(e){return t.resolved[i]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return i(n)},resolve:function e(){return 296}}),E=function(e){var t=e.seasonId,i=e.days,a=e.nextMonth,c=e.previousMonth,r=e.currentMonth,y=e.startDate,_=e.selectedDeparture,N=e.scrollCallback,E=e.dayChangeCallback,D=e.settings,w=e.switchMonth,L=Object(l.useContext)(s.a),M=null===L||void 0===L?void 0:L.isTAP,I=Object(m.d)(),C=Object(p.b)((function(e){return e.datesAndPricing})),P=C.lowestPriceItemId,R=C.currentMonth,U=C.selectedVariationArray,V=Object(l.useState)(""),B=Object(o.a)(V,2),F=B[0],X=B[1],q=Object(p.a)(),z=Object(l.useCallback)((function(e){return i.find((function(t){var i;return 0===Object(b.c)(e,null===t||void 0===t||null===(i=t.items[0])||void 0===i?void 0:i.startDate)}))}),[i]);Object(l.useEffect)((function(){P&&X(P)}),[P]),Object(l.useEffect)((function(){if(!_){var e,t=null!==(e=i.find((function(e){var t;return(null===e||void 0===e||null===(t=e.items[0])||void 0===t?void 0:t.status)!==v.z.CLOSED})))&&void 0!==e?e:i[0],n=z(new Date(null===t||void 0===t?void 0:t.startDate));n.isInitial=!0,q(Object(j.e)(n)),n.items[0]&&q(Object(j.d)(Object(h.i)(n.items[0],D)))}}),[]),Object(l.useEffect)((function(){var e,i=null!==(e=z(null===_||void 0===_?void 0:_.startDate))&&void 0!==e?e:null;if((null===_||void 0===_?void 0:_.seasonId)!==t&&i){var n,o=(null===(n=Object(h.c)(i.items,U,i.otherTripTypesAvailable))||void 0===n?void 0:n[0])||i.items[0];q(Object(j.e)(i)),q(Object(j.d)(Object(h.i)(o,D)))}}),[t,z,q]),Object(l.useEffect)((function(){if(F){var e,t,i=(null!==(e=null===R||void 0===R||null===(t=R.items)||void 0===t?void 0:t.find((function(e){var t;return(null===e||void 0===e||null===(t=e.items[0])||void 0===t?void 0:t.id)===F})))&&void 0!==e?e:{}).startDate;i&&W(new Date(i))}}),[R,F]);var W=function(e){var t,i,o;N(),(e.getUTCMonth()>r.id||e.getUTCFullYear()>r.year)&&(null===a||void 0===a?void 0:a.year)&&w(a,x.b.CALENDAR,a.year);var l=null===(t=z(e))||void 0===t?void 0:t.items,c=l&&(null===(i=Object(h.c)(l,U,null===(o=z(e))||void 0===o?void 0:o.otherTripTypesAvailable))||void 0===i?void 0:i[0])||(null===l||void 0===l?void 0:l[0]);c.isInitial=!1,c&&(q(Object(j.e)(z(e))),q(Object(j.d)(Object(n.a)({},c)))),E(e,{departureSeasonId:null===c||void 0===c?void 0:c.seasonId,departureTourOptionUrl:null===c||void 0===c?void 0:c.tourOptionUrl})};return Object(A.jsxs)("div",{className:"contiki-tour-calendar__wrapper","data-testid":"tour-calendar",children:[Object(A.jsxs)("div",{className:"contiki-tour-calendar__navbar",children:[Object(A.jsx)(g.a,{name:"arrow",className:d()("contiki-tour-calendar__navbar-icon",{"contiki-tour-calendar__navbar-icon--disabled":!c}),onClick:function(){return(null===c||void 0===c?void 0:c.year)?w(c,x.b.CALENDAR,c.year,!0):void 0},"data-testid":"prev-arrow",dataAttributes:{itemType:u.a.itemType.GENERAL_INTERACTION,itemName:u.a.itemName.CALENDAR_PREVIOUS_MONTH}}),Object(A.jsx)(T.a,{text:"".concat(r.name," ").concat(r.year),textStyles:Object(k.a)(I).tourCalendarNavbarText,isTAP:M,className:"contiki-tour-calendar__navbar-text"}),Object(A.jsx)(g.a,{name:"arrow",className:d()("contiki-tour-calendar__navbar-icon",{"contiki-tour-calendar__navbar-icon--disabled":!a}),onClick:function(){return(null===a||void 0===a?void 0:a.year)?w(a,x.b.CALENDAR,a.year,!0):void 0},rotate:180,"data-testid":"next-arrow",dataAttributes:{itemType:u.a.itemType.GENERAL_INTERACTION,itemName:u.a.itemName.CALENDAR_NEXT_MONTH}})]}),Object(A.jsx)(S,{children:function(e){var t=e.default;return Object(A.jsx)(t,{className:"contiki-tour-calendar",tileClassName:"contiki-tour-calendar__tile",showDoubleView:!1,calendarType:"US",locale:"en-EN",view:"month",value:null===_||void 0===_?void 0:_.startDate,returnValue:"range",showFixedNumberOfWeeks:!1,showNeighboringMonth:!1,showNavigation:!1,activeStartDate:y,onClickDay:function(e){return W(Object(b.s)(e))},tileDisabled:function(e){var t,i,n,o,l,a,c,r=e.date,d=Object(b.s)(r),s=void 0===z(d)||(null===(t=Object(h.c)(z(d).items,U,null===(i=z(d))||void 0===i?void 0:i.otherTripTypesAvailable)[0])||void 0===t?void 0:t.status)||(null===(n=z(d))||void 0===n||null===(o=n.items[0])||void 0===o?void 0:o.status),u=void 0===z(d)?0:(null===(l=Object(h.c)(z(d).items,U,null===(a=z(d))||void 0===a?void 0:a.otherTripTypesAvailable))||void 0===l?void 0:l.length)||0;return void 0===z(d)||"Closed"===s&&(!(null===(c=z(d))||void 0===c?void 0:c.otherTripTypesAvailable)||0===u)},tileContent:function(e){var t=e.date;return function(e){var t,i,o,l,a=null!==(t=z(e))&&void 0!==t?t:{items:[{startDate:e}]},c=(null===(i=Object(h.c)(a.items,U,a.otherTripTypesAvailable))||void 0===i?void 0:i[0])||a.items[0],r=_?function(){var t=_.startDate,i=_.endDate;return(!("isInitial"in _)||!_.isInitial)&&"Closed"!==_.status&&Object(b.c)(e,t)<=0&&Object(b.c)(e,i)>=0?"endDate"in a&&a.endDate?v.y.ACTIVE:v.y.SELECTED:"endDate"in a&&"items"in a&&a.endDate&&"Closed"!==(null===c||void 0===c?void 0:c.status)?v.y.ENABLED:v.y.DISABLED}():v.y.DISABLED,d=function(e,t){if(t===v.y.ACTIVE||t===v.y.SELECTED){var i=0===Object(b.c)(e,null===_||void 0===_?void 0:_.startDate),n=0===Object(b.c)(e,null===_||void 0===_?void 0:_.endDate);return(i||n)&&{isStartDay:i,isEndDay:n}}}(e,r),s=c||a.items[0],u=a.items?null===(o=Object(h.c)(a.items,U,a.otherTripTypesAvailable))||void 0===o?void 0:o.length:0,j=Object(n.a)({id:e,details:s,filteredItemsNumber:u,itemsNumber:null===(l=a.items)||void 0===l?void 0:l.filter((function(e){return(null===e||void 0===e?void 0:e.status)!==v.z.CLOSED})).length,type:r,calendarHoverStateLayout:null===D||void 0===D?void 0:D.calendarHoverStateLayout,tripVariationsMultiselect:null===D||void 0===D?void 0:D.tripVariationsMultiselect,variationMultiselect:null===D||void 0===D?void 0:D.tripVariationsMultiselect,otherTripTypesAvailable:a.otherTripTypesAvailable,isCalendarView:(null===D||void 0===D?void 0:D.viewType)===O.a.Calendar,isTAP:M},d&&{meta:d});return Object(A.jsx)(f.a,Object(n.a)({},j))}(Object(b.s)(t))}})}})]})};t.a=E},1431:function(e,t,i){},1432:function(e,t,i){},1433:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(34),o=i(212),l=function(e){var t;return{tourCalendarNavbarText:(t={},Object(n.a)(t,o.b.Desktop,{DEFAULT:"titleS"}),Object(n.a)(t,o.b.Tablet,{DEFAULT:"titleXS"}),Object(n.a)(t,o.b.Mobile,{DEFAULT:"titleXXS"}),t)[e]}}},1434:function(e,t,i){},1435:function(e,t,i){},1437:function(e,t,i){},1438:function(e,t,i){},1439:function(e,t,i){},1440:function(e,t,i){},1441:function(e,t,i){},1443:function(e,t,i){},1445:function(e,t,i){},1446:function(e,t,i){},1447:function(e,t,i){"use strict";var n=i(33),o=i(34),l=i(1),a=i.n(l),c=i(2),r=i(506),d=i(5),s=i.n(d),u=Object(c.default)({resolved:{},chunkName:function(){return"layouts-DefaultVariationRow-DefaultVariationRow"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:function(){return Promise.all([i.e(1),i.e(4),i.e(7),i.e(220)]).then(i.bind(null,1210))},requireAsync:function(e){var t=this,i=this.resolve(e);return this.resolved[i]=!1,this.importAsync(e).then((function(e){return t.resolved[i]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return i(n)},resolve:function e(){return 1210}}),v=Object(c.default)({resolved:{},chunkName:function(){return"layouts-OptionalAddonsLayout-OptionalAddonsLayout"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:function(){return i.e(231).then(i.bind(null,1070))},requireAsync:function(e){var t=this,i=this.resolve(e);return this.resolved[i]=!1,this.importAsync(e).then((function(e){return t.resolved[i]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return i(n)},resolve:function e(){return 1070}}),b=function(e,t){var i,n,o,l;return(null===e||void 0===e||null===(i=e.items)||void 0===i||null===(n=i[0])||void 0===n?void 0:n.id)===(null===t||void 0===t||null===(o=t.items)||void 0===o||null===(l=o[0])||void 0===l?void 0:l.id)&&e.layoutType===t.layoutType},j=function(e){var t,i=e.items,l=e.modalButton,a=e.notAvailableText,c=e.layoutType,s={items:i,modalButton:l,notAvailableText:a,layoutType:c,childPriceLabel:e.childPriceLabel,adultPriceLabel:e.adultPriceLabel,addOnsTitleSection:e.addOnsTitleSection,variationsArray:e.variationsArray},b=(t={},Object(o.a)(t,r.a.Default,u),Object(o.a)(t,r.a.OptionalAddOns,v),t)[c];return Object(d.jsx)(b,Object(n.a)({},s))};t.a=Object(l.memo)(j,b)},1448:function(e,t,i){},1449:function(e,t,i){"use strict";var n=i(33),o=i(34),l=i(1),a=i.n(l),c=i(2),r=i(196),d=i.n(r),s=i(213),u=i(1451),v=i(359),b=i(319),j=i(1450),p=i(5),O=i.n(p),m="accommodation",f=Object(c.default)({resolved:{},chunkName:function(){return"VariantPill-Layout1"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:function(){return i.e(213).then(i.bind(null,1280))},requireAsync:function(e){var t=this,i=this.resolve(e);return this.resolved[i]=!1,this.importAsync(e).then((function(e){return t.resolved[i]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return i(n)},resolve:function e(){return 1280}}),x=Object(c.default)({resolved:{},chunkName:function(){return"VariantPill-Layout2"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:function(){return Promise.all([i.e(1),i.e(214)]).then(i.bind(null,1281))},requireAsync:function(e){var t=this,i=this.resolve(e);return this.resolved[i]=!1,this.importAsync(e).then((function(e){return t.resolved[i]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return i(n)},resolve:function e(){return 1281}}),h=function(e){var t,i=e.header,l=e.options,a=e.currencySymbol,c=e.excludedOptions,r=e.selectedVariants,O=e.getPriceDiff,h=e.updateSelectedVariants,g=e.moreInfoModal,T=e.modalButton,k=e.enableMultiselect,y=e.notAvailableText,_=e.disableTagMoreInfoButton,A=e.tagIcons,N=e.startEndLocationIcons,S=Object(s.d)(),E=Object(j.a)(S).title,D=(t={},Object(o.a)(t,u.a.Default,f),Object(o.a)(t,u.a.VariationMultiselect,x),t)[(k||!_)&&i.tag===m?u.a.VariationMultiselect:u.a.Default],w=!k&&_;return Object(p.jsxs)("div",{className:d()({"contiki-variant-selector__row":w}),children:[Object(p.jsxs)("div",{className:"contiki-variant-selector__row-header",children:[(null===i||void 0===i?void 0:i.icon)&&w&&Object(p.jsx)(v.a,{name:null===i||void 0===i?void 0:i.icon,className:"contiki-variant-selector__row-header-icon"}),Object(p.jsx)(b.a,{textStyles:k||!_?E:{DEFAULT:"titleS"},text:null===i||void 0===i?void 0:i.title})]}),Object(p.jsx)("div",{className:d()("contiki-variant-selector__row-options",{"contiki-variant-selector__row-multiselect":k||!_}),children:l.map((function(e){var t=Boolean(e.tag&&(null===c||void 0===c?void 0:c.includes(e.tag))),l=Boolean(e.tag&&!e.isDisabled&&Object.values(r).includes(e)),d={variant:e,currencySymbol:a,isDisabled:t,isSelected:l,onClick:function(){h(Object(n.a)(Object(n.a)({},r),{},Object(o.a)({},i.tag,e)))},moreInfoModal:g,modalButton:T,notAvailableText:y,tagIcons:A,startEndLocationIcons:N};return Object(p.jsx)(D,Object(n.a)({priceDiff:O(e)},d),"".concat(i.tag,"-").concat(null===e||void 0===e?void 0:e.tag))}))})]})};t.a=h},1450:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(34),o=i(212),l=function(e){var t;return{title:(t={},Object(n.a)(t,o.b.Desktop,{DEFAULT:"secondaryParagraphM"}),Object(n.a)(t,o.b.Tablet,{DEFAULT:"secondaryParagraphM"}),Object(n.a)(t,o.b.Mobile,{DEFAULT:"secondaryParagraphM"}),t)[e]}}},1451:function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e[e.Default=0]="Default",e[e.VariationMultiselect=1]="VariationMultiselect"}(n||(n={}))},1452:function(e,t,i){},1453:function(e,t,i){},1454:function(e,t,i){},1455:function(e,t,i){},1456:function(e,t,i){},1457:function(e,t,i){},1458:function(e,t,i){},1462:function(e,t,i){},1463:function(e,t,i){},1464:function(e,t,i){},1465:function(e,t,i){},1466:function(e,t,i){},1467:function(e,t,i){},1468:function(e,t,i){},1469:function(e,t,i){},1470:function(e,t,i){},1471:function(e,t,i){},1472:function(e,t,i){},1473:function(e,t,i){},1474:function(e,t,i){},1475:function(e,t,i){},2454:function(e,t,i){"use strict";var n=i(33),o=(i(1),i(196)),l=i.n(o),a=i(205),c=i(200),r=i(231),d=i(34),s=i(212),u=i(213),v=i(319),b=i(359),j=(i(1432),i(5));t.a=function(e){var t,i,o,p,O,m,f,x=e.type,h=e.details,g=e.filteredItemsNumber,T=e.variationMultiselect,k=e.otherTripTypesAvailable,y=e.itemsNumber,_=e.isCalendarView,A=e.isTAP,N=e.meta,S=void 0===N?{isStartDay:!1,isEndDay:!1}:N,E=function(e){var t,i,n,o,l,a;return{calendarTileTopText:(t={},Object(d.a)(t,s.b.Desktop,{DEFAULT:"paragraphS"}),Object(d.a)(t,s.b.Tablet,{DEFAULT:"paragraphM"}),Object(d.a)(t,s.b.Mobile,{DEFAULT:"paragraphXS"}),t)[e],calendarTag:(i={},Object(d.a)(i,s.b.Desktop,{DEFAULT:"labelLegendS"}),Object(d.a)(i,s.b.Tablet,{DEFAULT:"labelLegendS"}),Object(d.a)(i,s.b.Mobile,{DEFAULT:"labelLegendS"}),i)[e],calendarTileBottomDisabledText:(n={},Object(d.a)(n,s.b.Desktop,{DEFAULT:"paragraphXS"}),Object(d.a)(n,s.b.Tablet,{DEFAULT:"paragraphXS"}),Object(d.a)(n,s.b.Mobile,{DEFAUL:"labelLegendS"}),n)[e],calendarTileBottomPriceText:(o={},Object(d.a)(o,s.b.Desktop,{DEFAULT:"titleXXXXXS"}),Object(d.a)(o,s.b.Tablet,{DEFAULT:"paragraphS"}),Object(d.a)(o,s.b.Mobile,{DEFAULT:"labelLegendS"}),o)[e],calendarTileAdditionalStatus:(l={},Object(d.a)(l,s.b.Desktop,{DEFAULT:"default",IJ:"labelLegendS"}),Object(d.a)(l,s.b.Tablet,{DEFAULT:"default"}),Object(d.a)(l,s.b.Mobile,{DEFAULT:"default"}),l)[e],calendarTilePricePerPersonText:(a={},Object(d.a)(a,s.b.Desktop,{DEFAULT:"labelEs",IJ:"labelLegend"}),Object(d.a)(a,s.b.Tablet,{DEFAULT:"labelEs"}),Object(d.a)(a,s.b.Mobile,{DEFAULT:"labelEs"}),a)[e]}}(Object(u.d)()),D=S.isStartDay,w=S.isEndDay,L=null===h||void 0===h||null===(t=h.flags)||void 0===t?void 0:t.some((function(e){return e===c.i.DEFINITE_DEPARTURE})),M="Closed"===(null===h||void 0===h?void 0:h.status),I="On Request"===(null===h||void 0===h?void 0:h.status),C=[c.y.ENABLED,c.y.ACTIVE].includes(x)&&{"data-item-type":a.a.itemType.GENERAL_INTERACTION,"data-item-name":a.a.itemName.DEPARTURE},P=Object(r.g)(h,null===h||void 0===h?void 0:h.defaultRoomType),R=null===P||void 0===P||null===(i=P.priceBreakdown)||void 0===i?void 0:i.discounted,U=h,V=null===T||void 0===T||null===(o=T.options)||void 0===o?void 0:o.find((function(e){return e.variationHash===(null===U||void 0===U?void 0:U.tripVariationHash)}));return Object(j.jsx)("div",Object(n.a)(Object(n.a)({className:"contiki-calendar-tile"},C),{},{children:Object(j.jsxs)("div",{"data-testid":"calendar-tile-".concat(x.toLowerCase()),className:l()("contiki-calendar-tile__content",{"contiki-calendar-tile__content--start":D,"contiki-calendar-tile__content--end":w,"contiki-calendar-tile__content--disabled":x===c.y.DISABLED,"contiki-calendar-tile__content--enabled":x===c.y.ENABLED,"contiki-calendar-tile__content--active":x===c.y.ACTIVE,"contiki-calendar-tile__content--selected":x===c.y.SELECTED,"contiki-calendar-tile__content--definite":L&&!M,"contiki-calendar-tile__content--closed":M&&x!==c.y.ACTIVE}),children:[Object(j.jsx)("div",{className:l()("contiki-calendar-tile__top",{"contiki-is-discounted":R}),children:Object(j.jsx)(v.a,{textStyles:E.calendarTileTopText,text:null===h||void 0===h||null===(p=h.startDate)||void 0===p?void 0:p.getUTCDate(),isTAP:A,className:"contiki-calendar-tile__top-text"})}),(null===T||void 0===T?void 0:T.enableMultiselect)&&y&&y>0?k||g&&g>=2?Object(j.jsx)("div",{className:"contiki-calendar-tile__container-tag",children:Object(j.jsx)(v.a,{textStyles:E.calendarTag,className:"contiki-calendar-tile__container-text",text:k?c.c.OTHER:c.c.MULTIPLE})}):x!==c.y.ACTIVE?Object(j.jsx)("div",{className:l()("contiki-calendar-tile__tag",{"contiki-calendar-tile__tag--hidden":_}),children:Object(j.jsx)(b.a,{className:"contiki-calendar-tile__tag--flag",name:null===V||void 0===V?void 0:V.icon})}):null:null,!(null===T||void 0===T?void 0:T.enableMultiselect)&&(L||I)&&!M&&Object(j.jsx)(v.a,{className:l()("contiki-calendar-tile__additional-status",{"contiki-calendar-tile__additional-status--on-request":I}),text:I?null===U||void 0===U||null===(O=U.texts)||void 0===O?void 0:O.onRequestDepartureText:null===U||void 0===U||null===(m=U.texts)||void 0===m?void 0:m.definiteDepartureShortText,isTAP:A,textStyles:E.calendarTileAdditionalStatus}),Object(j.jsx)("div",{className:l()("contiki-calendar-tile__bottom",{"contiki-calendar-tile__bottom--discounted":R}),children:(null===P||void 0===P?void 0:P.price)&&(M?Object(j.jsx)(v.a,{textStyles:E.calendarTileBottomDisabledText,className:"contiki-calendar-tile__bottom--disabled",isTAP:A,text:null===U||void 0===U||null===(f=U.texts)||void 0===f?void 0:f.closedDepartureText}):Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(v.a,{textStyles:E.calendarTileBottomPriceText,className:"contiki-calendar-tile__bottom-price",isTAP:A,text:P.price})}))})]})}))}},381:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(1),o="overflow-hidden",l=function(e){Object(n.useEffect)((function(){e?(document.body.classList.add(o),document.documentElement.classList.add(o)):(document.body.classList.remove(o),document.documentElement.classList.remove(o))}),[e])}},450:function(e,t,i){"use strict";i.d(t,"i",(function(){return a})),i.d(t,"c",(function(){return c})),i.d(t,"h",(function(){return r})),i.d(t,"k",(function(){return d})),i.d(t,"m",(function(){return s})),i.d(t,"f",(function(){return u})),i.d(t,"e",(function(){return v})),i.d(t,"b",(function(){return b})),i.d(t,"j",(function(){return j})),i.d(t,"d",(function(){return p})),i.d(t,"l",(function(){return O})),i.d(t,"a",(function(){return m})),i.d(t,"g",(function(){return f}));var n=i(208),o=i(33),l=i(200),a=function(e,t){return Object(o.a)(Object(o.a)({},e),{},{startDate:new Date(e.startDate),endDate:new Date(e.endDate),flags:e.flags.map((function(e){var i;return null!==(i=null===t||void 0===t?void 0:t.legend.find((function(t){return e===(null===t||void 0===t?void 0:t.type)})))&&void 0!==i?i:e})),discounts:function(){var t;return(null===e||void 0===e?void 0:e.discounts)&&e.discounts.length>0?null===e||void 0===e||null===(t=e.discounts)||void 0===t?void 0:t.reduce((function(t,i){var n,o,l;return t[i]=null!==(n=null===e||void 0===e||null===(o=e.discountInfo)||void 0===o||null===(l=o.find)||void 0===l?void 0:l.call(o,(function(e){return(null===e||void 0===e?void 0:e.discountType)===i})))&&void 0!==n?n:null,t}),{}):null}(),texts:t.texts,icons:t.icons,tooltips:t.tooltips,groupSize:function(){var i;return null===t||void 0===t||null===(i=t.groupSizes)||void 0===i?void 0:i.find((function(t){return(null===t||void 0===t?void 0:t.name)===(null===e||void 0===e?void 0:e.tourType)}))}()})},c=function(e,t,i){return e.filter((function(e){return(null===e||void 0===e?void 0:e.subtitle)&&((null===t||void 0===t?void 0:t.includes(e.subtitle))||i)&&e.status!==l.z.CLOSED}))},r=function(e,t){return e.filter((function(e){return e.items})).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{items:Object(n.a)(e.items.map((function(e){return a(e,t)})))})}))},d=function(e){var t=null===e||void 0===e?void 0:e.flat();return null===t||void 0===t?void 0:t.filter((function(e,t,i){var n;return i.map((function(e){var t;return null===e||void 0===e||null===(t=e.startDate)||void 0===t?void 0:t.toString()})).indexOf(null===e||void 0===e||null===(n=e.startDate)||void 0===n?void 0:n.toString())===t})).filter(Boolean)},s={LOAD_MORE:"SEE MORE DATES",NO_TRIPS_AVAILABLE:"There are no trips Available"},u=function(e,t){var i;return null===e||void 0===e||null===(i=e.pricing)||void 0===i?void 0:i.find((function(e){return e.roomType===t}))},v=function(e,t){var i=["departure","return","definite","groupSize"].concat(t?["twinRoom","soloUpgrade"]:["offer","price"]),n=Object.keys(e||{}).reduce((function(e,t){return i.includes(t)?e+1:e}),0);return n?{flexBasis:"".concat(Math.floor(1/n*1e4)/100,"%")}:{}},b=["LG","BVL"],j=["AA","IJ"],p=function(e,t,i,n){var o=function(e,t){return"next"===n?e>t:e<t};return null===i||void 0===i?void 0:i.filter((function(i){return i.isAnyTripAvailable&&e&&(i.year===e?o(i.id,t):o(i.year,e))}))},O=function(e,t){var i,n,o;(null===e||void 0===e||null===(i=e.current)||void 0===i?void 0:i.offsetTop)&&(null===(n=window)||void 0===n||n.scrollTo({top:(null===e||void 0===e||null===(o=e.current)||void 0===o?void 0:o.offsetTop)-t,behavior:"smooth"}))},m=function(e){var t,i,n=e.settings,o=e.initialApiUrl,l=e.checkboxList,a=e.tourOptionId,c=o;n&&l&&(null===(t=n.tripVariationsMultiselect)||void 0===t?void 0:t.enableMultiselect)?null===(i=n.tripVariationsMultiselect.options)||void 0===i||i.forEach((function(e){l&&e.label&&l[e.label]&&(c+="&tourOptionIds=".concat(e.optionId))})):c+="&tourOptionIds=".concat(a);return c},f=function(e){return{DEFAULT:{pretitle:"pretitleM"},AA:{pretitle:e?"pretitleS":"pretitleM"}}}},592:function(e,t,i){"use strict";var n;i.d(t,"b",(function(){return n})),function(e){e.CALENDAR="CALENDAR",e.LIST="LIST"}(n||(n={})),t.a=n},672:function(e,t,i){"use strict";i.r(t),i.d(t,"DATES_AND_PRICING_EVENTS",(function(){return Ft}));var n=i(210),o=i.n(n),l=i(211),a=i(208),c=i(33),r=i(197),d=i(1),s=i(196),u=i.n(s),v=i(271),b=i.n(v),j=i(217),p=i.n(j),O=i(305),m=i(200),f=i(233),x=i(742),h=i(974),g=i(215),T=i(938),k=i(2486),y=i(205),_=i(350),A=i(202),N=i(452),S=i(591),E=i(230),D=i(406),w=i(351),L=i(18),M=i(203),I=i(495),C=i(268),P=i(207),R=i(592),U={list:{DEFAULT:"list",IJ:"list-light"}},V=i(290),B=i(359),F=(i(1401),i(5)),X=function(e){var t=e.view,i=e.setView,n=e.tripVariationsMultiselect,o=e.scrollCallback,l=Object(k.a)(),a=Object(d.useContext)(I.a),c=Object(k.b)((function(e){return e.config})).isTAP,r=Object(k.b)((function(e){return e.datesAndPricing})).tripVariationsCheckboxList,s=Object(k.b)((function(e){return e.config})).brandPageFixedWidth,v=(n||{}).options;if(!r){var b={};null===v||void 0===v||v.forEach((function(e){var t=e.label;t&&(b[t]=t===(null===a||void 0===a?void 0:a.tripSubtitle))})),b&&l(Object(T.p)(b))}var j=Object(V.a)(U),p=function(e,n,l){return Object(F.jsx)(B.a,{name:e,"data-testid":n,className:"contiki-calendar-view-switch__icon ".concat(e),wrapperClass:u()("contiki-calendar-view-switch__icon-box",{"contiki-calendar-view-switch__icon-box--selected":t===l}),onClick:function(){i(l),o()},dataAttributes:{itemType:y.a.itemType.GENERAL_INTERACTION,itemName:y.a.itemName.viewType[n]}})};return Object(F.jsx)("div",{className:u()("contiki-calendar-view-switch",{"contiki-calendar-view-switch--fixed":s}),children:Object(F.jsxs)("div",{className:"contiki-calendar-view-switch__wrapper",children:[p(c?"list":j.list,"list",R.a.LIST),p("calendar","calendar",R.a.CALENDAR)]})})},q=i(900),z=i(199),W=(i(1403),function(e){var t=e.yearOptions,i=e.currentYear,n=e.changeYear,o=e.setIsOpen,l=e.scrollCallback,a=Object(z.a)(950),c=Object(d.useState)({label:i,value:i}),s=Object(r.a)(c,2),u=s[0],v=s[1];Object(d.useEffect)((function(){v({label:i,value:i})}),[i]);var b=(null===t||void 0===t?void 0:t.map((function(e){return{label:e.year,value:e.year}})))||[];return Object(F.jsxs)(F.Fragment,{children:[a&&Object(F.jsx)("div",{onClick:function(e){a&&(null===o||void 0===o||o(!0),e.stopPropagation())},className:"year-selector-button"}),Object(F.jsx)(q.a,{options:b,value:u,classNamePrefix:"year-selector",onChange:function(e){v({label:null===e||void 0===e?void 0:e.value,value:null===e||void 0===e?void 0:e.value}),(null===e||void 0===e?void 0:e.value)&&n(null===e||void 0===e?void 0:e.value,!0),l()},isClearable:!1,isSearchable:!1,components:{IndicatorSeparator:function(){return null}}})]})}),H=(i(1424),function(e){var t,i=e.monthsList,n=e.currentMonth,o=e.changeMonth,l=e.setIsOpen,a=e.months,c=e.scrollCallback,s=Object(z.a)(950),u=Object(d.useState)({label:null===n||void 0===n?void 0:n.name,value:null===n||void 0===n?void 0:n.id}),v=Object(r.a)(u,2),b=v[0],j=v[1],p=Object(d.useState)(a&&(null===(t=Object(D.a)(a,{year:null===n||void 0===n?void 0:n.year}).monthsList)||void 0===t?void 0:t.map((function(e){return{label:e.name,value:e.id,disabled:!e.isAnyTripAvailable,year:null===n||void 0===n?void 0:n.year,isAnyTripAvailable:e.isAnyTripAvailable,seasonId:e.seasonId,tourOptionUrl:e.tourOptionUrl,dateId:e.dateId}})))||[]),O=Object(r.a)(p,2),m=O[0],f=O[1];return Object(d.useEffect)((function(){j({label:null===n||void 0===n?void 0:n.name,value:null===n||void 0===n?void 0:n.id});var e=a&&Object(D.a)(a,{year:null===n||void 0===n?void 0:n.year}).monthsList;f((null===e||void 0===e?void 0:e.map((function(e){return{label:e.name,value:e.id,disabled:!e.isAnyTripAvailable,year:null===n||void 0===n?void 0:n.year,isAnyTripAvailable:e.isAnyTripAvailable,seasonId:e.seasonId,tourOptionUrl:e.tourOptionUrl,dateId:e.dateId}})))||[])}),[null===n||void 0===n?void 0:n.year]),Object(d.useEffect)((function(){j({label:null===n||void 0===n?void 0:n.name,value:null===n||void 0===n?void 0:n.id})}),[n]),Object(F.jsxs)(F.Fragment,{children:[s&&Object(F.jsx)("div",{onClick:function(e){null===l||void 0===l||l(!0),e.stopPropagation()},className:"month-selector-button"}),Object(F.jsx)(q.a,{options:m,value:b,onChange:function(e){j({value:null===e||void 0===e?void 0:e.value,label:null===e||void 0===e?void 0:e.label}),o({year:n.year,month:null===e||void 0===e?void 0:e.value}),c()},isClearable:!1,classNamePrefix:"month-selector",isSearchable:!1,components:{IndicatorSeparator:function(){return null}},menuShouldScrollIntoView:!0,isOptionDisabled:function(e){var t;return i&&!(null===(t=i[e.value-1])||void 0===t?void 0:t.isAnyTripAvailable)||!1}})]})}),G=i(1426),Q=(i(1427),function(e){var t=e.perspective,i=e.loop,n=e.initIdx,o=e.label,l=e.width,a=e.setValue,c=e.values,s=e.handleChange,v=e.position,b=t||"center",j=c.length,p=i?9:1,O=Object(d.useState)(null),m=Object(r.a)(O,2),f=m[0],x=m[1],h=Object(d.useRef)(0),g=Object(d.useRef)(c),T=Object(d.useRef)({slides:{number:j,origin:i?"center":"auto",perView:p},vertical:!0,initial:n||0,loop:i,dragSpeed:function(e){var t=h.current;return e*(t/(t/2*Math.tan(Math.PI/180*24))/p)},created:function(e){h.current=e.size},updated:function(e){h.current=e.size},detailsChanged:function(e){x(e.track.details)},animationEnded:function(e){var t;if(g.current[e.track.details.abs].disabled)for(var i=1;i<=j;i+=1){var n,o;if(e.track.details.abs-i>0&&!(null===(n=g.current[e.track.details.abs-i])||void 0===n?void 0:n.disabled)){var l,a;s(null===(l=g.current[e.track.details.abs-i])||void 0===l?void 0:l.value),null===(a=A.current)||void 0===a||a.moveToIdx(e.track.details.abs-i);break}if(e.track.details.abs+i<j&&!(null===(o=g.current[e.track.details.abs+i])||void 0===o?void 0:o.disabled)){var c,r;s(null===(c=g.current[e.track.details.abs+i])||void 0===c?void 0:c.value),null===(r=A.current)||void 0===r||r.moveToIdx(e.track.details.abs+i);break}}else s(null===(t=g.current[e.track.details.abs])||void 0===t?void 0:t.value)},rubberband:!i,renderMode:"performance"}),k=Object(G.useKeenSlider)(T.current),y=Object(r.a)(k,2),_=y[0],A=y[1],N=Object(d.useState)(0),S=Object(r.a)(N,2),E=S[0],D=S[1];return Object(d.useEffect)((function(){A.current&&D(A.current.size/2)}),[A]),Object(d.useEffect)((function(){var e;null===(e=A.current)||void 0===e||e.update(T.current),g.current=c}),[c]),Object(d.useEffect)((function(){var e;null===(e=A.current)||void 0===e||e.moveToIdx(n||0)}),[n]),Object(F.jsxs)("div",{className:"wheel keen-slider wheel--perspective-".concat(b),ref:_,children:[Object(F.jsx)("div",{className:"wheel__shadow-top",style:{transform:"translateZ(".concat(E,"px)"),WebkitTransform:"translateZ(".concat(E,"px)")}}),Object(F.jsxs)("div",{className:u()("wheel__inner","left"===v?"wheel__inner--left":"wheel__inner--right"),children:[Object(F.jsx)("div",{className:"wheel__slides",style:{width:"".concat(l,"px")},children:function(){if(!f)return[];for(var e=i?.5-1/p/2:0,t=[],n=0;n<j;n+=1){var o,l=f?((null===(o=f.slides[n])||void 0===o?void 0:o.distance)-e)*p:0,c=Math.abs(l)>7.5?180:24*l*-1,r={transform:"rotateX(".concat(c,"deg) translateZ(").concat(E,"px)"),WebkitTransform:"rotateX(".concat(c,"deg) translateZ(").concat(E,"px)")},d=a?a(n,f.abs+Math.round(l)):n;t.push({style:r,value:d})}return t}().map((function(e,t){var i,n,o,l=e.style;return Object(F.jsx)("div",{className:u()("wheel__slide",{"wheel__slide--disabled":null===(i=g.current[t])||void 0===i?void 0:i.disabled,"wheel__slide--active":t===(null===f||void 0===f?void 0:f.abs)&&!(null===(n=g.current[t])||void 0===n?void 0:n.disabled)}),style:l,onClick:function(){var e,i;return!(null===(e=g.current[t])||void 0===e?void 0:e.disabled)&&(null===(i=A.current)||void 0===i?void 0:i.moveToIdx(t))},children:Object(F.jsx)("span",{children:null===(o=g.current[t])||void 0===o?void 0:o.label})},t)}))}),o&&Object(F.jsx)("div",{className:"wheel__label",style:{transform:"translateZ(".concat(E,"px)"),WebkitTransform:"translateZ(".concat(E,"px)")},children:o})]}),Object(F.jsx)("div",{className:"wheel__shadow-bottom",style:{transform:"translateZ(".concat(E,"px)"),WebkitTransform:"translateZ(".concat(E,"px)")}})]})}),K=i(206),Y=i(289),J=i(266),Z=i(587),$=(i(1425),function(e){var t,i,n=e.setIsOpen,o=e.changeMonth,l=e.currentMonth,a=e.monthsList,c=e.yearOptions,s=e.scrollCallback,v=Object(d.useContext)(J.b),b=Object(d.useState)(null===l||void 0===l?void 0:l.year),j=Object(r.a)(b,2),p=j[0],O=j[1],m=Object(d.useState)((null===l||void 0===l?void 0:l.id)?l.id-1:0),f=Object(r.a)(m,2),x=f[0],h=f[1],g=Object(d.useState)(a&&(null===(t=Object(D.a)(a,{year:null===l||void 0===l?void 0:l.year}).monthsList)||void 0===t?void 0:t.map((function(e){return{label:e.name,value:e.id,disabled:!e.isAnyTripAvailable,year:p,isAnyTripAvailable:e.isAnyTripAvailable,seasonId:e.seasonId,tourOptionUrl:e.tourOptionUrl}})))||[]),T=Object(r.a)(g,2),k=T[0],y=T[1];Object(d.useEffect)((function(){h((null===l||void 0===l?void 0:l.id)?l.id-1:0),O(null===l||void 0===l?void 0:l.year)}),[l]),Object(d.useEffect)((function(){var e,t=a&&(null===(e=Object(D.a)(a,{year:p}).monthsList)||void 0===e?void 0:e.map((function(e){return{label:e.name,value:e.id-1,disabled:!e.isAnyTripAvailable,year:p,isAnyTripAvailable:e.isAnyTripAvailable,seasonId:e.seasonId,tourOptionUrl:e.tourOptionUrl}})))||[];y(t)}),[p]);var A=(null===c||void 0===c?void 0:c.map((function(e){return{label:e.year.toString(),value:e.year,disabled:!1}})))||[];return Object(F.jsxs)(F.Fragment,{children:[(null===v||void 0===v?void 0:v.name)===J.c.DATA_PICKER&&(null===v||void 0===v?void 0:v.isOpen)&&Object(F.jsx)("div",{className:"drawer-overlay",onClick:function(){return null===n||void 0===n?void 0:n(!1)}}),Object(F.jsx)("div",{className:u()("drawer-carousel-date-picker",{"drawer-carousel-date-picker--open":(null===v||void 0===v?void 0:v.name)===J.c.DATA_PICKER&&(null===v||void 0===v?void 0:v.isOpen)}),children:Object(F.jsxs)("div",{className:"carousel-date-picker",children:[Object(F.jsxs)("div",{className:"carousel-date-picker-selector",children:[Object(F.jsx)("div",{className:"carousel-date-picker-selector--wrapper",children:Object(F.jsx)(Q,{initIdx:A.findIndex((function(e){return e.value===(null===l||void 0===l?void 0:l.year)})),values:A,width:50,loop:!1,perspective:"left",handleChange:O,position:"left"})}),Object(F.jsx)("div",{className:"carousel-date-picker-selector--wrapper",children:Object(F.jsx)(Q,{initIdx:null===(i=Object(_.b)(k,p))||void 0===i?void 0:i.value,values:k,width:120,loop:!1,perspective:"left",handleChange:h,position:"right"})})]}),Object(F.jsxs)("div",{className:"carousel-date-picker-buttons",children:[Object(F.jsx)(Z.a,{type:K.a.Text,className:"carousel-date-picker-buttons--cancel",text:"CANCEL",onClick:function(){return n(!1)}}),Object(F.jsx)(Z.a,{newType:Y.a.PrimaryDark,className:"carousel-date-picker-buttons--save",text:"SAVE",onClick:function(){o({year:p,month:x+1}),null===n||void 0===n||n(!1),s()}})]})]})})]})}),ee=i(765),te=i(381),ie=(i(1402),function(e){var t=e.years,i=e.monthOptions,n=e.changeYear,o=e.changeMonth,l=e.currentMonthData,a=e.scrollCallback,r=Object(k.b)((function(e){return e.datesAndPricing})).currentMonth,s=Object(d.useContext)(J.b),u=Object(ee.a)(),v=function(e){u(e,J.c.DATA_PICKER)},b=i&&r&&Object(D.a)(i,r);return Object(te.a)((null===s||void 0===s?void 0:s.name)===J.c.DATA_PICKER&&(null===s||void 0===s?void 0:s.isOpen)||!1),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("div",{className:"contiki-year-and-month-selector",children:[Object(F.jsx)("div",{className:"contiki-year-and-month-selector__year-selector",children:Object(F.jsx)(W,{currentYear:null===l||void 0===l?void 0:l.year,yearOptions:t,changeYear:n,setIsOpen:v,scrollCallback:a})}),Object(F.jsx)("div",{className:"contiki-year-and-month-selector__month-selector",children:Object(F.jsx)(H,Object(c.a)(Object(c.a)({},i),{},{monthsList:null===b||void 0===b?void 0:b.monthsList,availableMonthsList:null===b||void 0===b?void 0:b.availableMonthsList,currentMonth:l,changeMonth:o,setIsOpen:v,months:i,scrollCallback:a}))})]}),Object(F.jsx)($,{monthsList:i,yearOptions:t,setIsOpen:v,changeMonth:o,currentMonth:l,scrollCallback:a})]})}),ne=i(34),oe=i(407),le=i(213),ae=i(360),ce=i(319),re=i(212),de=function(e){var t,i;return{variationLabel:(t={},Object(ne.a)(t,re.b.Desktop,{DEFAULT:"secondaryParagraphS"}),Object(ne.a)(t,re.b.Tablet,{DEFAULT:"secondaryParagraphXS"}),Object(ne.a)(t,re.b.Mobile,{DEFAULT:"secondaryParagraphXS"}),t)[e],variationTitle:(i={},Object(ne.a)(i,re.b.Desktop,{DEFAULT:"titleXS"}),Object(ne.a)(i,re.b.Tablet,{DEFAULT:"titleXXXXS"}),Object(ne.a)(i,re.b.Mobile,{DEFAULT:"titleXXS"}),i)[e]}},se=(i(1429),function(e){var t=e.tripVariationsMultiselect,i=e.checkboxAction,n=Object(k.a)(),o=Object(d.useContext)(I.a),l=Object(k.b)((function(e){return e.datesAndPricing})).tripVariationsCheckboxList,a=t||{},r=a.options,s=a.tripTypeLink,u=Object(le.d)();return Object(F.jsxs)("div",{className:"contiki-variation-multiselect",children:[s&&Object(F.jsx)(Z.a,Object(c.a)(Object(c.a)({},s),{},{isUrlHash:!1,className:"contiki-variation-multiselect__button",textStyles:de(u).variationTitle})),Object(F.jsx)("div",{className:"contiki-variation-multiselect--wrapper",children:Object(A.a)(r)&&(null===r||void 0===r?void 0:r.map((function(e,t){var a=e.backgroundColor,r=e.label,d=e.textColor;return r&&Object(F.jsx)("div",{style:{"--checkbox-component-background":r.includes(m.v)?oe.a:a,"--checkbox-component-text":d},children:Object(F.jsx)(ae.a,{onClick:function(){return function(e){l&&!l[e]&&Object(y.j)({productName:null===o||void 0===o?void 0:o.tripTitle,variantType:e,location:"filter",isMoreInfo:!1});var t=l?Object(c.a)(Object(c.a)({},l),{},Object(ne.a)({},e,!l[e])):{};Object.values(t).some((function(e){return e}))&&(n(Object(T.p)(t)),null===i||void 0===i||i(t),n(Object(T.d)(null))),n(Object(T.n)(null))}(r)},isChecked:Boolean(null===l||void 0===l?void 0:l[r]),className:"contiki-variation-multiselect__checkbox",children:Object(F.jsx)(ce.a,{textStyles:de(u).variationLabel,text:r})})},t)})))})]})}),ue=i(267),ve=(i(1428),function(e){var t=e.id,i=e.message,n=e.closeMessage,o=e.alternativeMessage,l=Object(z.a)(),a=Object(d.useCallback)((function(){return n(t)}),[n,t]);return Object(F.jsxs)("div",{className:u()("message-box",{"message-box-alternative":o}),children:[Object(F.jsxs)("div",{className:"message-box-header",children:[Object(F.jsx)(ce.a,{className:"message-box-header-title",isA:l?"secondaryParagraphXS":"secondaryParagraphS",text:null===i||void 0===i?void 0:i.title}),Object(F.jsx)(B.a,{name:"ui-close",onClick:a,className:"message-box-header-icon"})]}),Object(F.jsx)(ce.a,{className:"message-box-description",isRichText:!0,text:null===i||void 0===i?void 0:i.text}),Object(F.jsx)("div",{className:"message-box-button-wrapper",children:Object(F.jsx)(Z.a,{className:"message-box-button",onClick:function(){a(),Object(A.p)("itinerary",180)},isA:"linkXs",text:"View itinerary",iconName:"chevron",iconPosition:ue.a.Right,dataAttributes:{itemType:null===y.a||void 0===y.a?void 0:y.a.itemType.GENERAL_INTERACTION,itemName:null===y.a||void 0===y.a?void 0:y.a.itemName.GENERAL_BUTTON},type:K.a.Text})})]},t)}),be=i(240),je=function(e){var t;return{dateVariantTitle:(t={},Object(ne.a)(t,re.b.Desktop,{DEFAULT:"titleS"}),Object(ne.a)(t,re.b.Tablet,{DEFAULT:"titleXXS"}),Object(ne.a)(t,re.b.Mobile,{DEFAULT:"titleXS"}),t)[e]}},pe=(i(1400),function(e){var t,i,n,o,l,a=e.viewState,c=e.setView,s=e.checkboxSelect,u=e.changeMonth,v=e.changeYear,b=e.currentMonthData,j=e.monthOptions,p=e.years,O=e.settings,m=e.scrollCallback,f=Object(k.a)(),x=Object(le.d)(),h=Object(k.b)((function(e){return e.toastMessages})).messages,g=Object(d.useState)(void 0),T=Object(r.a)(g,2),y=T[0],_=T[1],N=Object(d.useState)(!0),S=Object(r.a)(N,2),D=S[0],w=S[1],L=Object(d.useState)(null===h||void 0===h||null===(t=h.filter)||void 0===t?void 0:t.call(h,(function(e){return e.name===E.a.seasonChangeSuccess}))),M=Object(r.a)(L,2),C=M[0],P=M[1],R=Object(d.useContext)(I.a);return Object(d.useEffect)((function(){var e;P(null===h||void 0===h||null===(e=h.filter)||void 0===e?void 0:e.call(h,(function(e){return e.name===E.a.seasonChangeSuccess})))}),[h]),Object(d.useEffect)((function(){C&&Object(A.a)(C)&&((null===C||void 0===C?void 0:C.length)>1&&y?(_(C[0]),f(Object(be.c)(C[1].id))):(_(C[0]),w(!D)))}),[JSON.stringify(C)]),Object(F.jsxs)("div",{className:"contiki-date-variant-section",children:[Object(F.jsxs)("div",{className:"contiki-date-variant-section-wrapper",children:[Object(F.jsx)(ce.a,{textStyles:je(x).dateVariantTitle,text:null===O||void 0===O||null===(i=O.texts)||void 0===i?void 0:i.datePickerTitle}),Object(F.jsx)(X,{view:a,setView:c,tripVariationsMultiselect:null===O||void 0===O?void 0:O.tripVariationsMultiselect,scrollCallback:m})]}),Object(F.jsx)(J.a,{children:Object(F.jsx)(ie,{changeYear:v,currentMonthData:b,monthOptions:j,years:p,changeMonth:u,scrollCallback:m})}),y&&Object(F.jsx)(ve,{id:y.id,message:null===R||void 0===R?void 0:R.toastMessages[null===y||void 0===y?void 0:y.name],closeMessage:function(){f(Object(be.c)(y.id)),_(void 0)},alternativeMessage:D},y.id),(null===O||void 0===O||null===(n=O.tripVariationsMultiselect)||void 0===n?void 0:n.options)&&(null===O||void 0===O||null===(o=O.tripVariationsMultiselect)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.length)>1&&Object(F.jsx)(se,{checkboxAction:s,tripVariationsMultiselect:null===O||void 0===O?void 0:O.tripVariationsMultiselect})]})}),Oe=i(204),me=i(231),fe=i(450),xe=i(1447),he=i(721),ge=i(307),Te=i(300),ke=i(1449),ye=(i(1448),function(e){var t,i=e.currencySymbol,n=e.titleSection,a=e.tags,s=e.tourVariantsUrl,u=e.settings,v=Object(d.useState)(!0),b=Object(r.a)(v,2),j=b[0],O=b[1],m=Object(d.useState)(!1),f=Object(r.a)(m,2),x=f[0],h=f[1],g=Object(d.useState)([]),y=Object(r.a)(g,2),_=y[0],N=y[1],S=Object(d.useState)([]),E=Object(r.a)(S,2),D=E[0],w=E[1],L=Object(d.useState)([]),M=Object(r.a)(L,2),I=M[0],C=M[1],P=Object(d.useState)({}),R=Object(r.a)(P,2),U=R[0],V=R[1],B=Object(k.a)(),X=Object(k.b)((function(e){return e.datesAndPricing})).selectedDeparture,q=Object(k.b)((function(e){return e.tourPage})).optionId,z=null===X||void 0===X||null===(t=X.pricing)||void 0===t?void 0:t[0],W=null===z||void 0===z?void 0:z.priceNumeric;return Object(d.useEffect)((function(){var e=function(){var e=Object(l.a)(o.a.mark((function e(){var t,i,n,l,r,d,v,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,p.a.get(s);case 4:r=e.sent,d=(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.items)?(null===u||void 0===u||null===(i=u.optionSelectorSettings)||void 0===i?void 0:i.tags)?Object(ge.d)(r.data.items,u.optionSelectorSettings.tags,"tag"):r.data.items:[],v=d.reduce((function(e,t){var i=t.tag,n=t.options,o=t.moreInfoModal,l=null===a||void 0===a?void 0:a.find((function(e){return(null===e||void 0===e?void 0:e.tag)===i}));return l&&n&&Object(A.a)(n)&&e.push(Object(c.a)({header:l,options:n},o?{moreInfoModal:o}:{})),e}),[]),w(v),N(null!==(n=r.data.pricing)&&void 0!==n?n:[]),v&&B(Object(T.g)(v)),(null===(l=r.data)||void 0===l?void 0:l.items)&&(b=r.data.items.reduce((function(e,t){var i;return(null===t||void 0===t?void 0:t.tag)&&(null===(i=t.options)||void 0===i?void 0:i[0])?Object(c.a)(Object(c.a)({},e),{},Object(ne.a)({},t.tag,t.options.find((function(e){return!e.isDisabled}))||t.options[0])):e}),{}),V(b),O(!1)),h(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();s&&j&&!x&&e()}),[s,a,i,j]),Object(d.useEffect)((function(){var e;!j&&(null===u||void 0===u||null===(e=u.tripVariationsMultiselect)||void 0===e?void 0:e.enableMultiselect)&&O(!0)}),[q]),Object(d.useEffect)((function(){var e=function(e){var t=Object.values(e).map((function(e){return null===e||void 0===e?void 0:e.tag}));return _.find((function(e){var i;return Object(A.e)(null===e||void 0===e||null===(i=e.tags)||void 0===i?void 0:i.sort(),t.sort())}))}(U);if(null===e||void 0===e?void 0:e.pricingDetails){var t=Object(fe.i)(e.pricingDetails,u);t&&B(Object(T.d)(t));var i=Object.values(U).map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.excludingTourOptionTags)&&void 0!==t?t:[]})).flat();i&&C(i)}}),[B,u,_,U]),x?Object(F.jsx)("div",{className:"variant-selector__loading",children:Object(F.jsx)(Te.a,{width:48,height:48,color:"black"})}):Object(F.jsx)(F.Fragment,{children:Object(A.a)(D)&&Object(F.jsxs)("div",{className:"variant-selector",children:[Object(F.jsx)(he.a,Object(c.a)({},n)),D.map((function(e){var t,n,o;if(e.options.length<2)return null;var l=Object(c.a)(Object(c.a)({},e),{},{currencySymbol:i,excludedOptions:I,updateSelectedVariants:V,selectedVariants:U,getPriceDiff:function(t){return function(e){var t,i,n,o,l,a=Object.values(e).map((function(e){return null===e||void 0===e?void 0:e.tag})),c=_.find((function(e){var t;return Object(A.e)(null===e||void 0===e||null===(t=e.tags)||void 0===t?void 0:t.sort(),a.sort())}));if(W&&(null===c||void 0===c||null===(t=c.pricingDetails)||void 0===t||null===(i=t.pricing)||void 0===i||null===(n=i[0])||void 0===n?void 0:n.priceNumeric))return(null===c||void 0===c||null===(o=c.pricingDetails)||void 0===o||null===(l=o.pricing)||void 0===l?void 0:l[0].priceNumeric)-W}(Object(c.a)(Object(c.a)({},U),{},Object(ne.a)({},e.header.tag,t)))},enableMultiselect:null===u||void 0===u||null===(t=u.tripVariationsMultiselect)||void 0===t?void 0:t.enableMultiselect,disableTagMoreInfoButton:null===u||void 0===u?void 0:u.disableTagMoreInfoButton,modalButton:null===u||void 0===u||null===(n=u.tripVariationsMultiselect)||void 0===n?void 0:n.moreInfoLink,notAvailableText:null===u||void 0===u||null===(o=u.texts)||void 0===o?void 0:o.roomNotAvailableText,tagIcons:null===u||void 0===u?void 0:u.accommodationIcons,startEndLocationIcons:null===u||void 0===u?void 0:u.startEndLocationIcons});return Object(F.jsx)(ke.a,Object(c.a)({},l),"".concat(e.header.tag,"-row"))}))]})})}),_e=i(595),Ae=i(216),Ne=i(982),Se=(i(1453),function(e){var t,i,n,o,l,a,c,r,d,s,v,b,j,p,O=e.item,m=e.className,f=e.textColor,x=e.backgroundColor,h=e.price,g=e.pricePerPersonText,T=e.setRoomOption,k=e.isSelected,_=e.soloDiscountText,N=e.soloDiscount,S=Object(z.a)();return Object(F.jsxs)("div",{"data-testid":"room-options-card",className:u()("contiki-room-options-card",m,{"contiki-room-options-card--selected":k}),style:x?{background:x}:{},children:[Object(F.jsx)("div",{className:"contiki-room-options-card__icons-container",children:O.icons&&Object(A.a)(O.icons)&&(null===O||void 0===O?void 0:O.icons.map((function(e,t){return Object(F.jsx)(B.a,{className:"contiki-room-options-card__icon",name:e},t)})))}),Object(F.jsx)(ce.a,{isA:Object(Ae.g)("pretitle",null===O||void 0===O||null===(t=O.titleSection)||void 0===t?void 0:t.pretitleTextSize),text:null===O||void 0===O||null===(i=O.titleSection)||void 0===i?void 0:i.pretitle,color:f}),Object(F.jsx)(ce.a,{textStyles:Object(Ne.a)(S,null===O||void 0===O||null===(n=O.titleSection)||void 0===n?void 0:n.titleTextSize).title,text:null===O||void 0===O||null===(o=O.titleSection)||void 0===o?void 0:o.title,color:f,className:"contiki-room-options-card__image-title contiki-room-options-card__text contiki-room-options-card__title"}),Object(F.jsx)(ce.a,{isA:Object(Ae.g)("subtitle",null===O||void 0===O||null===(l=O.titleSection)||void 0===l?void 0:l.subtitleTextSize),text:null===O||void 0===O||null===(a=O.titleSection)||void 0===a?void 0:a.subtitle,className:"contiki-room-options-card__content contiki-room-options-card__text",color:f,isRichText:!0}),Object(F.jsx)(ce.a,{isA:Object(Ae.g)("paragraph",(null===O||void 0===O||null===(c=O.titleSection)||void 0===c?void 0:c.descTextSize)||2),text:null===O||void 0===O||null===(r=O.titleSection)||void 0===r?void 0:r.desc,className:"contiki-room-options-card__content contiki-room-options-card__text",color:f,isRichText:!0}),Object(F.jsx)("div",{className:"contiki-room-options-card__price-container",children:O.roomPriceDifference?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ce.a,{textStyles:Object(Ne.a)(S).price,className:"contiki-room-options-card__price",text:_,color:f}),Boolean(N)&&Object(F.jsx)(ce.a,{textStyles:Object(Ne.a)(S).pricePP,text:g,className:"contiki-room-options-card__price contiki-room-options-card__price--pp",color:f,isRichText:!0})]}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ce.a,{textStyles:Object(Ne.a)(S).price,text:h,className:"contiki-room-options-card__price",color:f,isRichText:!0}),Object(F.jsx)(ce.a,{textStyles:Object(Ne.a)(S).pricePP,text:g,className:"contiki-room-options-card__price contiki-room-options-card__price--pp",color:f,isRichText:!0})]})}),Object(F.jsx)(Z.a,{type:null===O||void 0===O||null===(d=O.button)||void 0===d||null===(s=d.linkRepresentation)||void 0===s?void 0:s.linkVariant,text:k?null===O||void 0===O?void 0:O.selectedButtonText:null===O||void 0===O||null===(v=O.button)||void 0===v||null===(b=v.linkRepresentation)||void 0===b?void 0:b.text,size:null===O||void 0===O||null===(j=O.button)||void 0===j||null===(p=j.linkRepresentation)||void 0===p?void 0:p.size,className:"contiki-room-options-card__button",onClick:function(){return T()},dataAttributes:{itemType:y.a.itemType.BOOKING_INTEREST,itemName:"".concat(y.a.itemName.SELECT_ROOM_TYPE,"-").concat(_e.a[O.roomType])}})]})}),Ee=(i(1452),function(e){var t,i,n,o,l,a,s,u,v=e.setRoomOption,b=e.item,j=e.settings,p=Object(d.useState)(null),O=Object(r.a)(p,2),m=O[0],f=O[1],x=function(e,t){v(e),f(t)};Object(d.useEffect)((function(){var e,t;null!==m&&void 0!==m&&(null===(e=window)||void 0===e?void 0:e.upliftReload)&&(null===(t=window)||void 0===t||t.upliftReload())}),[m]);var h=Object(fe.f)(b,0),g=Object(fe.f)(b,null===b||void 0===b?void 0:b.defaultRoomType),T=g&&h&&(null===h||void 0===h?void 0:h.priceNumeric)-(null===g||void 0===g?void 0:g.priceNumeric)||0,k=T>0?"+".concat(null===h||void 0===h||null===(t=h.priceBreakdown)||void 0===t?void 0:t.soloUpgradePrice):null===j||void 0===j||null===(i=j.texts)||void 0===i?void 0:i.noExtraCostText;return Object(F.jsxs)("div",{className:"contiki-room-select",children:[Object(F.jsx)(he.a,Object(c.a)({pretitle:"Step 2",className:"contiki-room-select__title"},null===j||void 0===j||null===(n=j.roomSelector)||void 0===n?void 0:n.titleSection)),Object(F.jsx)("div",{className:"contiki-room-select__options",children:(null===j||void 0===j||null===(o=j.roomSelector)||void 0===o?void 0:o.roomItems)&&(null===j||void 0===j||null===(l=j.roomSelector)||void 0===l||null===(a=l.roomItems)||void 0===a?void 0:a.length)>0&&(null===j||void 0===j||null===(s=j.roomSelector)||void 0===s||null===(u=s.roomItems)||void 0===u?void 0:u.map((function(e,t){var i,n,o;return(null===(i=Object(fe.f)(b,null===e||void 0===e?void 0:e.roomType))||void 0===i?void 0:i.price)?Object(F.jsx)(Se,{isSelected:m===t,item:e,price:null===(n=Object(fe.f)(b,null===e||void 0===e?void 0:e.roomType))||void 0===n?void 0:n.price,pricePerPersonText:null===j||void 0===j||null===(o=j.texts)||void 0===o?void 0:o.pricePerPersonText,setRoomOption:function(){return x(e,t)},className:"contiki-rooms-options__card",soloDiscountText:k,soloDiscount:T},t):null})))})]})}),De=i(596),we=i(983),Le=(i(1462),function(e){var t,i,n,o,l,a,c=e.item,r=Object(k.b)((function(e){return e.datesAndPricing})).closedNotes,s=Object(z.a)(),v=(null===r||void 0===r?void 0:r.includes(null===c||void 0===c||null===(t=c.startDate)||void 0===t?void 0:t.toString()))||!(null===c||void 0===c||null===(i=c.tripNotes)||void 0===i?void 0:i.isVisible),b=Object(d.useContext)(M.a),j={topLeftTitle:{DEFAULT:"secondaryParagraphXS"},tourNotesContent:{DEFAULT:"paragraphXS"}},p=Object(P.a)(j,null===b||void 0===b?void 0:b.brandCode);return Object(F.jsxs)(F.Fragment,{children:[s&&Object(F.jsx)("div",{className:"contiki-tour-notes__separator"}),Object(F.jsxs)("div",{className:u()("tour-notes",{"contiki-tour-notes--hidden":v}),children:[Object(F.jsx)("div",{className:"contiki-tour-notes__top",children:Object(F.jsxs)("div",{className:"contiki-tour-notes__top-left",children:[Object(F.jsx)(B.a,{className:"contiki-tour-notes__top-left-icon",name:null===c||void 0===c||null===(n=c.icons)||void 0===n?void 0:n.tourNotes}),Object(F.jsx)(ce.a,{textStyles:p.topLeftTitle,className:"contiki-tour-notes__top-left-title",text:null===c||void 0===c||null===(o=c.texts)||void 0===o?void 0:o.importantTripNotesTitle})]})}),(null===c||void 0===c||null===(l=c.tripNotes)||void 0===l?void 0:l.content)&&Object(F.jsx)(ce.a,{textStyles:p.tourNotesContent,className:"contiki-tour-notes__content",text:null===c||void 0===c||null===(a=c.tripNotes)||void 0===a?void 0:a.content,isRichText:!0})]})]})}),Me={title:{DEFAULT:"secondaryParagraphXS"}},Ie=(i(1463),function(e){var t=e.showContent,i=e.title,n=e.icon,o=e.content;return t?Object(F.jsx)("div",{className:"contiki-departure-alterations",children:Object(F.jsxs)("div",{className:"contiki-departure-alterations__text",children:[Object(F.jsxs)("div",{className:"contiki-departure-alterations__text-header",children:[Object(A.a)(n)&&Object(F.jsx)(B.a,{name:n,"data-testid":"departure-alterations-icon"}),Object(F.jsx)(ce.a,{textStyles:Me.title,className:"contiki-departure-alterations__title",text:i})]}),Object(F.jsx)(ce.a,{isA:"paragraphXS",className:"contiki-departure-alterations__text-content",text:o,isRichText:!0})]})}):null}),Ce=i(2523),Pe=(i(1458),function(e){var t=e.startIcon,i=e.endIcon;return Object(F.jsxs)("div",{className:"contiki-dots",children:[Object(F.jsx)(B.a,{className:"contiki-dots__icon",name:t,color:"#000000"}),Object(F.jsx)("div",{className:"contiki-dots__line"}),Object(F.jsx)(B.a,{className:"contiki-dots__icon",name:i})]})}),Re=(i(1457),function(e){var t,i=e.item,n=e.showStartEndTime,o=e.calendarView,l=void 0!==o&&o,a=e.startIcon,c=e.endIcon,r=i.endDate.getTime()===i.startDate.getTime();return Object(F.jsxs)("div",{className:u()("contiki-tour-date-details",{"contiki-tour-date-details--calendar-view":l}),children:[!r&&Object(F.jsx)("div",{className:"contiki-tour-date-details__dots",children:Object(F.jsx)(Pe,{startIcon:a,endIcon:c})}),Object(F.jsxs)("div",{className:"contiki-tour-date-details__days",children:[Object(F.jsx)(Ce.a,{date:i.startDate,time:i.startTime,title:i.texts.tripStartText,place:i.startLocation,showStartEndTime:n,startAdditionalTimings:i.startAdditionalTimings,hideBigDate:!0,calendarView:l,alternativeView:!0,newContikiLayout:!0}),Object(F.jsx)(Ce.a,{date:i.endDate,time:i.endTime,title:null===(t=i.texts)||void 0===t?void 0:t.tripEndText,place:i.endLocation,showStartEndTime:n,endAdditionalTimings:i.endAdditionalTimings,hideBigDate:!0,calendarView:l,alternativeView:!0,newContikiLayout:!0})]})]})}),Ue=i(568),Ve=function(e){var t;return{definiteDepartureText:(t={},Object(ne.a)(t,re.b.Desktop,{DEFAULT:"paragraphS"}),Object(ne.a)(t,re.b.Tablet,{DEFAULT:"paragraphS"}),Object(ne.a)(t,re.b.Mobile,{DEFAULT:"paragraphXS"}),t)[e]}},Be=(i(1456),function(e){var t,i=e.item,n=Object(le.d)();return Object(F.jsx)("div",{className:"contiki-definite-departure",children:Object(F.jsx)(Ue.a,{icon:i.icons.definiteDeparture,tooltip:null===i||void 0===i||null===(t=i.tooltips)||void 0===t?void 0:t.definiteDeparture,children:Object(F.jsx)(ce.a,{textStyles:Ve(n).definiteDepartureText,className:"contiki-definite-departure__text",text:i.texts.definiteDepartureText})})})}),Fe=i(236),Xe=i(2431),qe=(i(1455),function(e){var t,i,n=e.item,o=Object(Fe.a)(),l=o.isModalOpen,a=o.openModal,c=o.closeModal,r="texts"in n?null===(t=n.texts)||void 0===t?void 0:t.departureGeneralNotesTitle:"";return Object(F.jsxs)("div",{className:"contiki-general-notes",children:[Object(F.jsx)(ce.a,{isA:"linkM",className:"contiki-general-notes__text",text:r,onClick:a}),Object(F.jsx)("div",{className:"contiki-general-notes__icon-wrapper",onClick:a,children:Object(F.jsx)(B.a,{name:"info",className:"contiki-general-notes__icon"})}),Object(F.jsx)(Xe.a,{className:"contiki-general-notes__modal",title:r,visible:l,fullscreen:!1,onClose:c,children:Object(F.jsx)(ce.a,{isRichText:!0,className:"contiki-general-notes__modal-text",text:null===(i=n.generalNotes)||void 0===i?void 0:i.content})})]})}),ze=(i(1454),function(e){var t,i,n,o,l,a,c,r,d,s,v,b,j,p,O=e.item,m=e.onRequestSectionPosition,f=e.settings,x=e.showStartEndTime,h=null===f||void 0===f?void 0:f.showTripName,g=Object(we.b)(O),T=null===f||void 0===f||null===(t=f.texts)||void 0===t?void 0:t.additionalTextWithIcon,k=null===f||void 0===f||null===(i=f.icons)||void 0===i?void 0:i.iconToAdditionalTextField,y=(null===f||void 0===f?void 0:f.viewType)===C.a.Calendar,_=Object(A.a)(T)&&Object(A.a)(k);return Object(F.jsxs)("div",{className:"contiki-tour-overview",children:[h&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ce.a,{text:"".concat(null===O||void 0===O?void 0:O.title),textStyles:we.a.tripTitle,className:"contiki-tour-overview__trip-title"}),Object(F.jsx)(ce.a,{text:"".concat(null===O||void 0===O?void 0:O.subtitle),textStyles:we.a.tripTitle,className:"contiki-tour-overview__trip-title contiki-tour-overview__trip-subtitle text-subtitle-xs"})]}),((null===(n=O.generalNotes)||void 0===n?void 0:n.content)||g)&&Object(F.jsxs)("div",{className:"contiki-tour-overview__top",children:[(null===(o=O.generalNotes)||void 0===o?void 0:o.content)&&Object(F.jsx)(qe,{item:O}),g&&Object(F.jsx)(Be,{item:O})]}),Object(F.jsxs)("div",{className:"contiki-tour-overview__bottom",children:[Object(F.jsx)(Re,{item:O,showStartEndTime:x,calendarView:y,startIcon:null===f||void 0===f||null===(l=f.icons)||void 0===l?void 0:l.startIcon,endIcon:null===f||void 0===f||null===(a=f.icons)||void 0===a?void 0:a.endIcon}),Object(F.jsx)(Le,{item:O}),Object(F.jsx)(Ie,{showContent:null===(c=O.alterations)||void 0===c?void 0:c.isVisible,title:null===(r=O.texts)||void 0===r?void 0:r.departureAlterationTitle,content:null===(d=O.alterations)||void 0===d?void 0:d.content,icon:null===(s=O.icons)||void 0===s?void 0:s.departureAlteration}),!y&&((null===f||void 0===f||null===(v=f.texts)||void 0===v?void 0:v.bookingConditionsText)||_)&&Object(F.jsx)("div",{className:u()("contiki-tour-overview__separtor",{"contiki-tour-overview__separtor--additional":_})}),_&&Object(F.jsxs)("div",{className:u()("contiki-tour-overview__row tour-overview__additional",{"contiki-tour-overview__row--calendar-view":y}),children:[Object(F.jsx)(B.a,{name:k,className:"contiki-tour-overview__icon"}),Object(F.jsx)(ce.a,{isA:"subtitleXXXS",text:T})]}),m===De.a.Overview&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ce.a,{isA:"labelS",text:null===O||void 0===O||null===(b=O.texts)||void 0===b?void 0:b.onRequestCallUsMessageText,className:"contiki-tour-overview__message"}),Object(F.jsxs)("div",{className:"contiki-tour-overview__row",children:[Object(F.jsx)(B.a,{name:null===O||void 0===O||null===(j=O.icons)||void 0===j?void 0:j.onRequestCallUs,className:"contiki-tour-overview__phone-icon"}),Object(F.jsx)(ce.a,{isA:"labelS",text:null===O||void 0===O||null===(p=O.texts)||void 0===p?void 0:p.onRequestCallUsMessageNumber})]})]})]})]})}),We=i(767),He=i.n(We),Ge=i(985),Qe=i(2487),Ke=function(e){var t;return{bookingPanelAdditionalText:(t={},Object(ne.a)(t,re.b.Desktop,{DEFAULT:"paragraphXXS"}),Object(ne.a)(t,re.b.Tablet,{DEFAULT:"paragraphXXS"}),Object(ne.a)(t,re.b.Mobile,{DEFAULT:"paragraphXS"}),t)[e]}},Ye=i(973),Je=i(2522),Ze=function(e){var t;return{bookingPriceNew:(t={},Object(ne.a)(t,re.b.Desktop,{DEFAULT:"titleM"}),Object(ne.a)(t,re.b.Tablet,{DEFAULT:"titleM"}),Object(ne.a)(t,re.b.Mobile,{DEFAULT:"titleL"}),t)[e]}},$e=(i(1472),function(e){var t=e.item,i=e.roomOptionChoice,n=Object(le.d)(),o=Object(me.h)(null===i||void 0===i?void 0:i.roomType,null===t||void 0===t?void 0:t.defaultRoomType),l=Object(me.g)(t,o)||{},a=l.price,c=l.priceBreakdown;return Object(F.jsx)("div",{"data-testid":"booking-price",className:"contiki-booking-price",children:Object(F.jsx)(ce.a,{textStyles:Ze(n).bookingPriceNew,className:u()("contiki-booking-price__new",{"contiki-booking-price__discounted":null===c||void 0===c?void 0:c.discounted}),text:a})})}),et=function(e){var t,i;return{bookingTitle:(t={},Object(ne.a)(t,re.b.Desktop,{DEFAULT:"secondaryTitleXS"}),Object(ne.a)(t,re.b.Tablet,{DEFAULT:"secondaryTitleXXS"}),Object(ne.a)(t,re.b.Mobile,{DEFAULT:"secondaryTitleXXS"}),t)[e],bookingSubtitle:(i={},Object(ne.a)(i,re.b.Desktop,{DEFAULT:"paragraphXXS"}),Object(ne.a)(i,re.b.Tablet,{DEFAULT:"paragraphXXS"}),Object(ne.a)(i,re.b.Mobile,{DEFAULT:"paragraphXS"}),i)[e]}},tt=(i(1471),function(e){var t,i,n,o,l,a,c=e.item,r=e.roomOptionChoice,d=e.calendarView,s=void 0!==d&&d,v=Object(le.d)(),b=Object(me.h)(null===r||void 0===r?void 0:r.roomType,null===c||void 0===c?void 0:c.defaultRoomType);return Object(F.jsxs)("div",{"data-testid":"booking-title",className:u()("contiki-booking-title",{"contiki-booking-title--calendar-view":s}),children:[Object(F.jsx)(ce.a,{textStyles:et(v).bookingTitle,className:"contiki-booking-title__text",text:null===c||void 0===c||null===(t=c.texts)||void 0===t?void 0:t.priceBreakdownTotalPriceText}),Object(F.jsx)(Ye.a,{iconName:null===(i=c.icons)||void 0===i?void 0:i.basedRoomIcon,textStyles:et(v).bookingSubtitle,className:"contiki-booking-title__subtitle",text:null===c||void 0===c||null===(n=c.texts)||void 0===n||null===(o=n.priceBreakdownBasedOnRoomText)||void 0===o?void 0:o.replace("{default room type}",null!==(l=null===(a=Object(me.g)(c,b))||void 0===a?void 0:a.roomTypeName)&&void 0!==l?l:"")})]})}),it=i(986),nt=(i(1474),function(e){var t,i,n,o,l,a,c=e.item,r=Object(A.a)(null===c||void 0===c||null===(t=c.texts)||void 0===t?void 0:t.onRequestCallUsMessageText)||Object(A.a)(null===c||void 0===c||null===(i=c.icons)||void 0===i?void 0:i.onRequestCallUs)||Object(A.a)(null===c||void 0===c||null===(n=c.texts)||void 0===n?void 0:n.onRequestCallUsMessageNumber);return Object(F.jsx)(F.Fragment,{children:r&&Object(F.jsxs)("div",{"data-testid":"booking-call-us",className:"contiki-booking-call-us","data-item-type":y.a.itemType.BOOKING_INTEREST,"data-item-name":y.a.itemName.PHONE_NUMBER,children:[Object(F.jsx)("div",{className:"contiki-booking-call-us__top",children:Object(F.jsx)(ce.a,{textStyles:it.a.topText,className:"booking-call-us__top-text",text:null===c||void 0===c||null===(o=c.texts)||void 0===o?void 0:o.onRequestCallUsMessageText})}),Object(F.jsxs)("div",{className:"contiki-booking-call-us__bottom",children:[Object(F.jsx)(B.a,{className:"contiki-booking-call-us__bottom-icon",name:null===c||void 0===c||null===(l=c.icons)||void 0===l?void 0:l.onRequestCallUs}),Object(F.jsx)(ce.a,{className:"contiki-booking-call-us__bottom-text",textStyles:it.a.bottomText,text:null===c||void 0===c||null===(a=c.texts)||void 0===a?void 0:a.onRequestCallUsMessageNumber})]})]})})}),ot=(i(1473),function(e){var t=e.upliftPrice,i=e.text,n=void 0===i?"":i,o=e.tooltipIcon,l=e.upliftLogo,a=n.replace("{price}","<span data-up-from-currency-unit-major='' className='text-label-legend'></span>");return Object(F.jsxs)("div",{"data-testid":"booking-financing",className:"contiki-booking-financing",children:[(null===l||void 0===l?void 0:l.url)&&Object(F.jsx)("img",{src:null===l||void 0===l?void 0:l.url,alt:null===l||void 0===l?void 0:l.alt,className:"contiki-booking-financing__logo"}),a&&Object(F.jsx)("span",{"data-up-price-value":t,"data-up-price-type":"total","data-up-price-model":"per_person","data-up-taxes-included":"true",children:Object(F.jsxs)("div",{className:"contiki-booking-financing__price",children:[Object(F.jsx)(ce.a,{text:a,isA:"labelLegend",isRichText:!0}),Object(F.jsx)(B.a,{name:o,className:"contiki-booking-financing__icon"}),Object(F.jsx)("span",{"data-up-tooltip":""})]})})]})}),lt=(i(1475),function(e){var t,i,n,o,l,a,c,r=e.item,d=e.roomOptionChoice,s=Object(me.h)(null===d||void 0===d?void 0:d.roomType,null===r||void 0===r?void 0:r.defaultRoomType),u=(null===(t=Object(me.g)(r,s))||void 0===t||null===(i=t.priceBreakdown)||void 0===i||null===(n=i.bookAndPayBy)||void 0===n?void 0:n.content)&&Object(g.o)(new Date(Object(me.g)(r,s).priceBreakdown.bookAndPayBy.content),g.d);return(null===(o=Object(me.g)(r,s))||void 0===o||null===(l=o.priceBreakdown)||void 0===l||null===(a=l.bookAndPayBy)||void 0===a?void 0:a.isVisible)?Object(F.jsx)("div",{"data-testid":"booking-subtitle",className:"contiki-booking-subtitle",children:Object(F.jsx)(ce.a,{isA:"paragraphXS",className:"contiki-booking-subtitle__text",text:"".concat(null===r||void 0===r||null===(c=r.texts)||void 0===c?void 0:c.priceBreakdownBookAndPayByText," ").concat(u)})}):null}),at=(i(1470),function(e){var t,i,n,a,s,v,b,j,p,O=e.item,h=e.zipMoney,g=e.uplift,T=e.ctaButtonSettings,_=void 0===T?{invertCTAsButttonStyle:!1,invertCTAsButttonPosition:!1}:T,A=e.roomOptionChoice,N=e.settings,S=e.handleClickHide,E=e.viewState,D=Object(le.d)(),L=Object(d.useContext)(M.a),I=null===L||void 0===L?void 0:L.brandCode,U=Object(k.a)(),V=Object(z.a)(),B=Object(d.useState)(!1),X=Object(r.a)(B,2),q=X[0],W=X[1],H=Object(k.b)((function(e){return e.tourPage})),G=H.tourId,Q=H.optionId,Y=H.title,J=H.bookingEngineLinkTarget,$=H.bookingEngineLinkTargetMobileViewports,ee=Object(k.b)((function(e){return e.config})).isTAP,te=Object(d.useRef)(),ie=(null===N||void 0===N?void 0:N.viewType)===C.a.Calendar,ne=null===N||void 0===N||null===(t=N.texts)||void 0===t?void 0:t.additionalPriceBreakdownInfo;Object(d.useEffect)((function(){var e=He.a.get("cjevent"),t=He.a.get("ExternalRef"),i=He.a.get("irclickid");te.current=(e?"&cjevent=".concat(e):"")+(t?"&ExternalRef=".concat(t):"")+(i?"&irclickid=".concat(i):"")}));var oe=Object(me.h)(null===A||void 0===A?void 0:A.roomType,null===O||void 0===O?void 0:O.defaultRoomType),ae=_.invertCTAsButttonStyle,re=_.invertCTAsButttonPosition,de=100*((null===(i=Object(me.g)(O,oe))||void 0===i?void 0:i.priceNumeric)||0),se=O.requestQuote,ue=void 0===se?{}:se,ve=O.bookByPhone,be=O.status===m.z.AVAILABLE,je=O.status===m.z.ON_REQUEST,pe=je||be&&!(null===N||void 0===N?void 0:N.hideSecondaryCTA),Oe=Boolean(be||je&&(null===N||void 0===N?void 0:N.enableBookByPhone)&&!ee||ue&&pe||je&&(null===N||void 0===N?void 0:N.requestBookingButtonText)),fe="".concat(null===(n=Object(me.g)(O,oe))||void 0===n||null===(a=n.priceBreakdown)||void 0===a?void 0:a.bookCTAUrl).concat(te.current||""),xe=function(){var e=Object(l.a)(o.a.mark((function e(){var t,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q){e.next=12;break}if(!(t=Ge.a.get())){e.next=11;break}return W(!0),e.next=6,Object(x.b)(t);case 6:i=e.sent,W(!1),i&&Object(f.c)("".concat(fe,"#").concat(i)),e.next=12;break;case 11:Object(f.c)("/logout");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(e){var t=null===O||void 0===O?void 0:O.startDate,i=null===O||void 0===O?void 0:O.endDate;ee&&(e.preventDefault(),xe()),Object(y.m)({event:y.a.event.BOOK_NOW,products:[G],assets:{products:[{tourID:G,departureDate:Object(w.c)(t),returnDate:Object(w.c)(i),quantity:1,variants:[{tourOptionId:Q}]}]}})},ge=function(e){return U(Object(Qe.e)(Object(c.a)(Object(c.a)({},e),{},{source:m.a.DATES_AND_PRICES})))},Te=!(null===N||void 0===N?void 0:N.enableBookByPhone)&&je&&(null===N||void 0===N?void 0:N.onRequestSectionPosition)===De.a.Breakdown,ke={item:O,roomOptionChoice:A,settings:N,isCalendarView:ie},ye=Object(P.a)({BV:!1,DEFAULT:!0},I);return Object(F.jsx)("div",{"data-testid":"booking-panel",className:"contiki-booking-panel",children:Object(F.jsxs)("div",{className:"contiki-booking-panel__container",children:[Object(F.jsxs)("div",{className:"contiki-booking-panel__top",children:[Object(F.jsx)(tt,{item:O,roomOptionChoice:A,calendarView:ie}),Object(F.jsx)($e,Object(c.a)({},ke))]}),(null===g||void 0===g?void 0:g.upliftEnabled)&&(null===g||void 0===g?void 0:g.text)&&Object(F.jsx)(ot,{upliftPrice:de,text:null===g||void 0===g?void 0:g.text,tooltipIcon:null===g||void 0===g?void 0:g.tooltipIcon,upliftLogo:null===g||void 0===g?void 0:g.upliftLogo}),(null===h||void 0===h?void 0:h.text)&&Object(F.jsx)(Je.a,Object(c.a)({},h)),Oe&&Object(F.jsxs)("div",{className:u()("contiki-booking-panel__buttons",{"contiki-booking-panel__buttons--reverse":re}),children:[be&&Object(F.jsx)(Z.a,{type:ae?4:3,isCTA:ye,className:u()("contiki-booking-panel__button",{"contiki-booking-panel__button--disabled":q}),text:null===O||void 0===O||null===(s=O.texts)||void 0===s?void 0:s.bookNowText,href:fe,dataAttributes:{itemType:y.a.itemType.BOOKING_INTEREST,itemName:y.a.itemName.BOOK_NOW},onClick:he,target:V?$:null!==J&&void 0!==J?J:void 0}),je&&(null===N||void 0===N?void 0:N.enableBookByPhone)&&!ee&&Object(F.jsx)(Z.a,{text:null===O||void 0===O||null===(v=O.texts)||void 0===v?void 0:v.bookByPhoneText,isCTA:ye,type:ae?4:3,onClick:function(){return ge(Object(c.a)(Object(c.a)({},ve),{},{tripName:Y}))},className:"contiki-booking-panel__button",dataAttributes:{itemType:y.a.itemType.BOOKING_INTEREST,itemName:y.a.itemName.BOOK_BY_PHONE}}),ue&&pe&&Object(F.jsx)(Z.a,{text:ue.text,isCTA:ye,type:ae?3:4,onClick:function(){return ge(Object(c.a)(Object(c.a)({},ue),{},{departureDate:O.startDate,optionId:Q||""}))},className:"contiki-booking-panel__button",dataAttributes:{itemType:y.a.itemType.BOOKING_INTEREST,itemName:y.a.itemName.RAQ}}),je&&(null===N||void 0===N?void 0:N.requestBookingButtonText)&&Object(F.jsx)(Z.a,{isCTA:ye,text:null===N||void 0===N?void 0:N.requestBookingButtonText,type:ae?K.a.PrimaryButton:K.a.SecondaryButton,href:fe,dataAttributes:{itemType:y.a.itemType.BOOKING_INTEREST,itemName:y.a.itemName.BOOK_NOW},className:"contiki-booking-panel__button",onClick:he})]}),Te&&Object(F.jsx)(nt,{item:O}),ne&&Object(F.jsx)(ce.a,{isA:"pretitleXXXS",isRichText:!0,className:"contiki-booking-panel__text",text:ne}),Object(F.jsx)(lt,{item:O,roomOptionChoice:A}),(null===N||void 0===N||null===(b=N.texts)||void 0===b?void 0:b.bookingPanelAdditionalText)&&Object(F.jsx)(Ye.a,{iconName:null===N||void 0===N||null===(j=N.icons)||void 0===j?void 0:j.bookingPanelAdditionalIcon,textStyles:Ke(D).bookingPanelAdditionalText,className:"contiki-booking-panel__additional-text",text:null===N||void 0===N||null===(p=N.texts)||void 0===p?void 0:p.bookingPanelAdditionalText}),E===R.a.LIST&&Object(F.jsx)("div",{className:u()("contiki-tour-details__hide",{"contiki-tour-details__hide--calendar-view":ie}),onClick:S,"data-item-type":y.a.itemType.GENERAL_INTERACTION,"data-item-name":y.a.itemName.DEPARTURE_COLLAPSE,children:Object(F.jsx)(Ye.a,{isA:"link",textType:"linkXs",iconPosition:"right",text:"Close info",iconName:"close",onClick:S})})]})})}),ct=(i(1469),function(e){var t,i,n=e.hideMarketingMessage,o=e.item,l=e.discounts,a=e.calendarView,c=void 0!==a&&a,r=Object(z.a)(),s=Object(d.useContext)(M.a),u=function(e,t){return{additionalInfoRowText:{AA:t?"paragraphXS":"labelS",IJ:"labelS",CH:"secondaryParagraphS",DEFAULT:e?"labelM":"labelL"}}}(r,c),v=Object(P.a)(u,null===s||void 0===s?void 0:s.brandCode);return Object(F.jsx)(F.Fragment,{children:!n&&Object(F.jsxs)("div",{"data-testid":"additional-info-row",className:"contiki-additional-info-row",children:[!!(null===o||void 0===o||null===(t=o.priceBreakdown)||void 0===t?void 0:t.promotionalMessage)&&Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(ce.a,{textStyles:v.additionalInfoRowText,className:"contiki-additional-info-row__text",text:null===o||void 0===o||null===(i=o.priceBreakdown)||void 0===i?void 0:i.promotionalMessage})}),!!(null===l||void 0===l?void 0:l.length)&&Object(F.jsx)("div",{className:"contiki-additional-info-row__discounts",children:null===l||void 0===l?void 0:l.map((function(e){return Object(F.jsx)(ce.a,{textStyles:v.additionalInfoRowText,className:"contiki-additional-info-row__text",text:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.name)}))})]})})}),rt=function(e){var t,i;return{priceRowLeftTitle:(t={},Object(ne.a)(t,re.b.Desktop,{DEFAULT:"paragraphXS"}),Object(ne.a)(t,re.b.Tablet,{DEFAULT:"paragraphXS"}),Object(ne.a)(t,re.b.Mobile,{DEFAULT:"paragraphXS"}),t)[e],priceRowRightNew:(i={},Object(ne.a)(i,re.b.Desktop,{DEFAULT:"paragraphXS"}),Object(ne.a)(i,re.b.Tablet,{DEFAULT:"paragraphXS"}),Object(ne.a)(i,re.b.Mobile,{DEFAULT:"paragraphS"}),i)[e]}},dt=(i(1466),function(e){var t,i,n,o,l,a=e.item,r=e.roomOptionChoice,s=e.settings,v=Object(le.d)(),b=Object(d.useContext)(M.a),j=null===b||void 0===b?void 0:b.brandCode,p=Object(me.h)(null===r||void 0===r?void 0:r.roomType,null===a||void 0===a?void 0:a.defaultRoomType),O=Object(me.g)(a,p),m=null===s||void 0===s||null===(t=s.texts)||void 0===t?void 0:t.oldPricePrefixText,f=null===s||void 0===s||null===(i=s.texts)||void 0===i?void 0:i.currentPricePrefixText,x=(null===s||void 0===s?void 0:s.viewType)===C.a.Calendar,h={AA:"Tour",DEFAULT:(null===s||void 0===s||null===(n=s.tripVariationsMultiselect)||void 0===n?void 0:n.enableMultiselect)?"".concat(a.subtitle," - ").concat(a.title):null===a||void 0===a||null===(o=a.texts)||void 0===o?void 0:o.priceBreakdownTripText},g={DEFAULT:"".concat((null===O||void 0===O?void 0:O.priceOld)?null===O||void 0===O?void 0:O.priceOld:null===O||void 0===O?void 0:O.price," ").concat(null===a||void 0===a||null===(l=a.texts)||void 0===l?void 0:l.pricePerPersonText)},T=Object(P.a)(h,j),k=Object(P.a)(g,j);return Object(F.jsxs)("div",{"data-testid":"price-row",className:u()("contiki-price-row",{"contiki-price-row--calendar-view":x}),style:Object(c.a)(Object(c.a)({},m&&{"--old-price-prefix-text":"'".concat(m,"'")}),f&&{"--current-price-prefix-text":"'".concat(f," '")}),children:[Object(F.jsx)("div",{className:"contiki-price-row__left",children:Object(F.jsx)(ce.a,{textStyles:rt(v).priceRowLeftTitle,className:"contiki-price-row__left-title",text:T})}),Object(F.jsx)("div",{className:"contiki-price-row__right",children:!(null===O||void 0===O?void 0:O.priceSaving)&&Object(F.jsx)(ce.a,{textStyles:rt(v).priceRowRightNew,className:"contiki-price-row__right-new",text:k})})]})}),st=function(e){var t,i;return{totalRowTitle:(t={},Object(ne.a)(t,re.b.Desktop,{DEFAULT:"secondaryParagraphS"}),Object(ne.a)(t,re.b.Tablet,{DEFAULT:"secondaryParagraphS"}),Object(ne.a)(t,re.b.Mobile,{DEFAULT:"secondaryParagraphS"}),t)[e],totalRowPrice:(i={},Object(ne.a)(i,re.b.Desktop,{DEFAULT:"secondaryParagraphS"}),Object(ne.a)(i,re.b.Tablet,{DEFAULT:"secondaryParagraphS"}),Object(ne.a)(i,re.b.Mobile,{DEFAULT:"secondaryParagraphM"}),i)[e]}},ut=(i(1468),function(e){var t,i,n,o,l,a,c,r,s,v=e.item,b=e.roomOptionChoice,j=e.calendarView,p=void 0!==j&&j,O=Object(d.useContext)(M.a),m=null===O||void 0===O?void 0:O.brandCode,f=Object(me.h)(null===b||void 0===b?void 0:b.roomType,null===v||void 0===v?void 0:v.defaultRoomType),x=Object(me.g)(v,f),h=Object(le.d)(),g=p?"- ".concat(null===x||void 0===x||null===(t=x.priceBreakdown)||void 0===t?void 0:t.totalSavings):null===x||void 0===x||null===(i=x.priceBreakdown)||void 0===i?void 0:i.totalSavings,T={AA:g,TAP:g,DEFAULT:null===x||void 0===x||null===(n=x.priceBreakdown)||void 0===n?void 0:n.totalSavings},k=Object(P.a)(T,m);return(null===x||void 0===x||null===(o=x.priceBreakdown)||void 0===o?void 0:o.totalSavings)?Object(F.jsxs)("div",{"data-testid":"total-row",className:u()("contiki-total-row",{"contiki-total-row--calendar-view":p,"contiki-total-row--hidden":p&&!(null===x||void 0===x?void 0:x.percentagePriceDiscount)}),children:[Object(F.jsx)(ce.a,{textStyles:st(h).totalRowTitle,className:"contiki-total-row__title",text:(null===x||void 0===x||null===(l=x.priceBreakdown)||void 0===l?void 0:l.totalSavings)?null===v||void 0===v||null===(a=v.texts)||void 0===a?void 0:a.priceBreakdownTotalSavingsText:null===v||void 0===v||null===(c=v.texts)||void 0===c?void 0:c.priceBreakdownTotalPriceText}),Object(F.jsx)(ce.a,{textStyles:st(h).totalRowPrice,className:u()("contiki-total-row__price",{"contiki-total-row__price--savings":null===x||void 0===x||null===(r=x.priceBreakdown)||void 0===r?void 0:r.totalSavings,"contiki-total-row__price--calendar-view":p}),text:"".concat("-".concat(k)," \n          ",null===v||void 0===v||null===(s=v.texts)||void 0===s?void 0:s.pricePerPersonText)})]}):null}),vt=(i(1467),function(e){var t,i,n,o,l,a,c,r,d=e.settings,s={title:null===d||void 0===d||null===(t=d.carbonOffsettingTooltip)||void 0===t?void 0:t.title,desc:null===d||void 0===d||null===(i=d.carbonOffsettingTooltip)||void 0===i?void 0:i.desc,darkTheme:null===d||void 0===d||null===(n=d.carbonOffsettingTooltip)||void 0===n?void 0:n.darkTheme},u={linkRepresentation:null===d||void 0===d||null===(o=d.carbonOffsettingLink)||void 0===o?void 0:o.linkRepresentation,url:null===d||void 0===d||null===(l=d.carbonOffsettingLink)||void 0===l?void 0:l.url,target:null===d||void 0===d||null===(a=d.carbonOffsettingLink)||void 0===a?void 0:a.target,formId:null===d||void 0===d||null===(c=d.carbonOffsettingLink)||void 0===c?void 0:c.formId};return(null===d||void 0===d?void 0:d.carbonOffsettingText)?Object(F.jsxs)("div",{"data-testid":"carbon-offsetting-row",className:"contiki-carbon-offsetting-row",children:[Object(F.jsxs)("div",{className:"contiki-carbon-offsetting-row__column-container",children:[Object(F.jsxs)("div",{className:"contiki-carbon-offsetting-row__title-container",children:[Object(F.jsx)(ce.a,{className:"contiki-carbon-offsetting-row__title",text:d.carbonOffsettingText}),(null===d||void 0===d?void 0:d.carbonOffsettingTooltip)&&Object(F.jsx)(Ue.a,{tooltip:s,icon:"info"})]}),(null===d||void 0===d?void 0:d.carbonOffsettingLink)&&Object(F.jsxs)("div",{className:"contiki-carbon-offsetting-row__link-container",children:[Object(F.jsx)(ce.a,{className:"contiki-carbon-offsetting-row__title",text:"By"}),Object(F.jsx)(Z.a,{className:"contiki-carbon-offsetting-row__link",type:K.a.Text,text:null===u||void 0===u||null===(r=u.linkRepresentation)||void 0===r?void 0:r.text,href:null===u||void 0===u?void 0:u.url,target:null===u||void 0===u?void 0:u.target,formId:null===u||void 0===u?void 0:u.formId})]})]}),Object(F.jsx)(ce.a,{className:"contiki-carbon-offsetting-row__title",text:"Included"})]}):null}),bt=(i(1465),function(e){var t,i=e.item,n=e.hideMarketingMessage,o=e.roomOptionChoice,l=e.settings,a=Object(me.h)(null===o||void 0===o?void 0:o.roomType,null===i||void 0===i?void 0:i.defaultRoomType),r=Object(me.g)(i,a),d=(null!==(t=null===r||void 0===r?void 0:r.priceBreakdown)&&void 0!==t?t:{}).discounts,s={item:i,roomOptionChoice:o,settings:l},u=(null===l||void 0===l?void 0:l.viewType)===C.a.Calendar;return Object(F.jsx)("div",{"data-testid":"discount-panel",className:"contiki-discount-panel",children:Object(F.jsxs)("div",{className:"contiki-discount-panel__container",children:[Object(F.jsx)(dt,Object(c.a)({},s)),Object(F.jsx)(vt,{settings:l}),Object(F.jsx)(ut,{item:i,roomOptionChoice:o,calendarView:u}),Object(F.jsx)(ct,{hideMarketingMessage:n,discounts:d,item:r,calendarView:u})]})})}),jt=(i(1464),function(e){var t,i,n=e.item,o=e.roomOptionChoice,l=e.zipMoney,a=e.hideMarketingMessage,r=e.uplift,d=e.settings,s=e.ctaButtonSettings,v=e.handleClickHide,b=e.viewType,j={item:n,zipMoney:l,uplift:r,ctaButtonSettings:s,roomOptionChoice:o,settings:d,handleClickHide:v};return Object(F.jsxs)("div",{"data-testid":"price-breakdown",className:u()("contiki-price-breakdown",{"contiki-price-breakdown-additional-timings":(null===(t=n.startAdditionalTimings)||void 0===t?void 0:t.description)||(null===(i=n.endAdditionalTimings)||void 0===i?void 0:i.description)}),children:[Object(F.jsx)(bt,{hideMarketingMessage:a,item:n,roomOptionChoice:o,settings:d}),Object(F.jsx)(at,Object(c.a)({enableBookByPhone:null===d||void 0===d?void 0:d.enableBookByPhone,viewState:b},j))]})}),pt=(i(1446),function(e){var t,i,n,o,l,a,s,v,b,j,p=e.id,O=e.item,m=e.items,f=e.className,x=e.hideElement,h=e.uplift,g=e.zipMoney,T=e.hideMarketingMessage,k=e.optionSelectorSettings,y=e.isActive,_=e.settings,A=e.ctaButtonSettings,N=e.viewType,S=Object(d.useState)(null),E=Object(r.a)(S,2),D=E[0],w=E[1],L=Object(z.a)(),M=Object(d.useRef)(null),I={item:O,roomOptionChoice:D,zipMoney:g,hideMarketingMessage:T,uplift:h,settings:_,ctaButtonSettings:A,handleClickHide:function(){x(p)}},C={items:m,modalButton:null===_||void 0===_||null===(t=_.tripVariationsMultiselect)||void 0===t?void 0:t.moreInfoLink,notAvailableText:null===_||void 0===_||null===(i=_.texts)||void 0===i?void 0:i.roomNotAvailableText,layoutType:null===_||void 0===_||null===(n=_.tripVariationsMultiselect)||void 0===n?void 0:n.layoutType,adultPriceLabel:null===_||void 0===_||null===(o=_.tripVariationsMultiselect)||void 0===o?void 0:o.adultPriceLabel,childPriceLabel:null===_||void 0===_||null===(l=_.tripVariationsMultiselect)||void 0===l?void 0:l.childPriceLabel,addOnsTitleSection:null===_||void 0===_||null===(a=_.tripVariationsMultiselect)||void 0===a?void 0:a.addOnsTitleSection,variationsArray:null===_||void 0===_||null===(s=_.tripVariationsMultiselect)||void 0===s?void 0:s.options};return Object(F.jsxs)("div",{className:u()("contiki-tour-details",f),children:[y&&Object(F.jsxs)(F.Fragment,{children:[(null===_||void 0===_||null===(v=_.tripVariationsMultiselect)||void 0===v?void 0:v.enableMultiselect)&&Boolean(m&&m.length>1)&&Object(F.jsx)(xe.a,Object(c.a)({},C)),(null===O||void 0===O?void 0:O.tourVariantsUrl)&&Object(F.jsx)(ye,Object(c.a)(Object(c.a)({},k),{},{settings:_,tourVariantsUrl:null===O||void 0===O?void 0:O.tourVariantsUrl}))]}),(null===O||void 0===O||null===(b=O.pricing)||void 0===b?void 0:b.length)>0&&(null===_||void 0===_?void 0:_.roomSelectorEnabled)&&Object(F.jsx)(Ee,{item:O,settings:_,setRoomOption:function(e){w(e),setTimeout((function(){var e,t,i;return(null===M||void 0===M||null===(e=M.current)||void 0===e?void 0:e.offsetTop)&&(null===(t=window)||void 0===t?void 0:t.scrollTo({top:(null===M||void 0===M||null===(i=M.current)||void 0===i?void 0:i.offsetTop)-(L?230:350),behavior:"smooth"}))}),250)}}),Object(F.jsx)("div",{className:u()("contiki-tour-details__final-step",{"contiki-tour-details__final-step--active":D||!(null===_||void 0===_?void 0:_.roomSelectorEnabled)}),children:Object(F.jsxs)(F.Fragment,{children:[(null===_||void 0===_?void 0:_.roomSelectorEnabled)&&Object(F.jsx)("div",{children:Object(F.jsx)(he.a,Object(c.a)(Object(c.a)({},null===_||void 0===_||null===(j=_.priceBreakdownSettings)||void 0===j?void 0:j.titleSection),{},{className:"contiki-tour-details__title"}))}),Object(F.jsxs)("div",{className:"contiki-tour-details__trip-title-section",children:[Object(F.jsx)(ce.a,{text:"".concat(null===O||void 0===O?void 0:O.title),isA:"titleS",className:"contiki-tout-details__trip-title-section--title"}),Object(F.jsx)(ce.a,{text:"".concat(null===O||void 0===O?void 0:O.subtitle),isA:"subtitleXS",className:"contiki-tout-details__trip-title-section--subtitle"})]}),Object(F.jsxs)("div",{className:"contiki-tour-details__bottom-section","data-testid":"tour-details-bottom-section",ref:M,children:[Object(F.jsx)(ze,{item:O,onRequestSectionPosition:null===_||void 0===_?void 0:_.onRequestSectionPosition,settings:_,showStartEndTime:null===_||void 0===_?void 0:_.showStartEndTime}),Object(F.jsx)(jt,Object(c.a)({viewType:N},I))]})]})})]})}),Ot=(i(1438),function(e){var t=e.active,i=e.children;return Object(F.jsx)(F.Fragment,{children:t?Object(F.jsx)("div",{className:"contiki-sold-out-overlay",children:Object(F.jsx)("div",{className:"contiki-sold-out-overlay__children",children:i})}):Object(F.jsx)("div",{className:"contiki-list-item__wrap",children:i})})}),mt=i(1275),ft=i(980),xt=function(e){var t,i,n;return{definiteDeparture:(t={},Object(ne.a)(t,re.b.Desktop,{DEFAULT:"paragraphS"}),Object(ne.a)(t,re.b.Tablet,{DEFAULT:"paragraphS"}),Object(ne.a)(t,re.b.Mobile,{DEFAULT:"paragraphS"}),t)[e],tagContainer:(i={},Object(ne.a)(i,re.b.Desktop,{DEFAULT:"paragraphS"}),Object(ne.a)(i,re.b.Tablet,{DEFAULT:"paragraphS"}),Object(ne.a)(i,re.b.Mobile,{DEFAULT:"paragraphXS"}),i)[e],departureInfoTag:(n={},Object(ne.a)(n,re.b.Desktop,{DEFAULT:"paragraphS"}),Object(ne.a)(n,re.b.Tablet,{DEFAULT:"paragraphS"}),Object(ne.a)(n,re.b.Mobile,{DEFAULT:"paragraphXS"}),n)[e]}},ht=(i(1441),function(e){var t,i=e.item,n=e.settings,o=e.columnWidthStyle,l=e.variationOption,a=e.itemsNumber,s=e.otherTripTypesAvailable,v=e.filteredItemsNumber,b=e.hideDefinite,j=void 0!==b&&b,p=(e.isNewContiki,i.flags),O=i.indicators,f=i.texts,x=i.icons,h=i.tooltips,g=i.alterations,T=null===p||void 0===p?void 0:p.some((function(e){return e===m.i.DEFINITE_DEPARTURE})),k=Object(le.d)(),y=function(e,t,i,n,o){var l,a=Object(d.useState)([]),s=Object(r.a)(a,2),u=s[0],v=s[1],b=Object(d.useState)(!1),j=Object(r.a)(b,2),p=j[0],O=j[1],f=null!==(l=null===e||void 0===e?void 0:e.map((function(e){return"object"===typeof e?e.type:e})))&&void 0!==l?l:[],x=null===e||void 0===e?void 0:e.some((function(e){return e===m.i.SPECIAL_DEP||e.type===m.i.SPECIAL_DEP}));return Object(d.useEffect)((function(){if(t&&e){var l=f.map((function(e){return Object(ft.a)(e,t,i)}));v(l)}if(null===n||void 0===n?void 0:n.isVisible){var a,r,d=u;d.push({text:null===t||void 0===t||null===(a=t.texts)||void 0===a?void 0:a.departureAlterationTitle,icon:null===t||void 0===t||null===(r=t.icons)||void 0===r?void 0:r.departureAlteration}),v(d)}if(o&&(null===t||void 0===t?void 0:t.useCompactIconsAndMobileView)){var s,b,j,p=u;p.unshift(Object(c.a)({text:null===t||void 0===t||null===(s=t.texts)||void 0===s?void 0:s.definiteDepartureText},(null===t||void 0===t||null===(b=t.icons)||void 0===b?void 0:b.definiteDeparture)&&{icon:null===t||void 0===t||null===(j=t.icons)||void 0===j?void 0:j.definiteDeparture})),v(p)}if(x&&(null===t||void 0===t?void 0:t.useCompactIconsAndMobileView)){var O,h=u,g=null===e||void 0===e?void 0:e.find((function(e){return e.type===m.i.SPECIAL_DEP}));h.unshift({text:null===t||void 0===t||null===(O=t.texts)||void 0===O?void 0:O.importantTripNotesTitle,icon:null===g||void 0===g?void 0:g.icon}),v(h)}return function(){v([])}}),[]),Object(d.useEffect)((function(){return u.length&&O(!0),function(){O(!1)}}),[u.length]),{departureFlags:u,departureFlagsExist:p}}(p,n,O,g,!!T),_=y.departureFlags,A=y.departureFlagsExist,N=(null===n||void 0===n?void 0:n.viewType)===C.a.Calendar,S=a&&a>0;return Object(F.jsxs)("div",{className:u()("contiki-departure-info",{"contiki-departure-info--calendar-view":N}),style:o,children:[S&&(null===n||void 0===n||null===(t=n.tripVariationsMultiselect)||void 0===t?void 0:t.enableMultiselect)?s||v&&v>=2?Object(F.jsx)("div",{className:"contiki-departure-info__container-tag",children:Object(F.jsx)(ce.a,{className:"contiki-departure-info__container-text",textStyles:xt(k).tagContainer,text:s?m.c.OTHER:m.c.MULTIPLE})}):Object(F.jsx)("div",{className:"contiki-departure-info__wrapper",children:Object(F.jsxs)("div",{className:"contiki-departure-info__tag",children:[Object(F.jsx)(ce.a,{className:"contiki-departure-info__tag-text",text:null===l||void 0===l?void 0:l.label,textStyles:xt(k).departureInfoTag}),a>1&&Object(F.jsx)(ce.a,{className:"contiki-departure-info__number",textStyles:xt(k).departureInfoTag,text:"+ ".concat(a-1," ").concat(a-1===1?m.t.SINGLE:m.t.MULTIPLE)})]})}):null,!j&&((null===n||void 0===n?void 0:n.useCompactIconsAndMobileView)&&A?_.map((function(e){return e&&Object(F.jsx)(mt.a,Object(c.a)({},e),"".concat(e.text,"-").concat(e.icon))})):T&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ce.a,{textStyles:xt(k).definiteDeparture,text:null===f||void 0===f?void 0:f.definiteDepartureShortText,className:"contiki-definite-departure-info__short-text"}),Boolean(null===x||void 0===x?void 0:x.tooltip)&&Boolean(null===h||void 0===h?void 0:h.definiteDeparture)&&Object(F.jsx)(Ue.a,{className:"contiki-definite-departure-info__tooltip",icon:null===x||void 0===x?void 0:x.tooltip,tooltip:null===h||void 0===h?void 0:h.definiteDeparture,placement:"top"})]}))]})}),gt=i(1268),Tt=i(505),kt=function(e){var t;return{offerDiscount:(t={},Object(ne.a)(t,re.b.Desktop,{DEFAULT:"secondaryParagraphXXS"}),Object(ne.a)(t,re.b.Tablet,{DEFAULT:"secondaryParagraphXXS"}),Object(ne.a)(t,re.b.Mobile,{DEFAULT:"secondaryParagraphXS"}),t)[e]}},yt=i(981),_t={price:{DEFAULT:"commM",IJ:"subtitleXS"}},At=(i(1443),function(e){var t,i,n,o,l,a,c,r=e.item,d=e.currencySymbol,s=e.settings,v=e.isOnRequestDepartureTextVisible,b=e.halfWidth,j=r.status===m.z.AVAILABLE||r.status===m.z.ON_REQUEST,p=Object(me.g)(r,_e.a.Single),O=Object(me.g)(r,null===r||void 0===r?void 0:r.defaultRoomType),f=null===(t=r.pricing)||void 0===t?void 0:t.some((function(e){return e.roomType===_e.a.Single})),x=Number(null===p||void 0===p?void 0:p.priceNumeric)-Number(null===O||void 0===O?void 0:O.priceNumeric),h=x||(null===s||void 0===s||null===(i=s.texts)||void 0===i?void 0:i.noExtraCostText);return Object(F.jsx)("div",{className:u()("contiki-solo-price",{"solo-price--half-width":v||b,"solo-price--no-margin":b}),children:Object(F.jsxs)("div",{className:"contiki-solo-price__top",children:[j&&Object(F.jsxs)(F.Fragment,{children:[Boolean(h)&&Object(F.jsx)(ce.a,{textStyles:yt.a,className:"contiki-solo-price__top-upgrade",text:x?"+".concat(d).concat(h):null===s||void 0===s||null===(n=s.texts)||void 0===n?void 0:n.noExtraCostText}),Object(F.jsxs)("div",{className:u()("contiki-solo-price__price-container",{"contiki-solo-price__price-container--discounted":null===O||void 0===O||null===(o=O.priceBreakdown)||void 0===o?void 0:o.discounted}),children:[Object(F.jsx)(ce.a,{isA:"commM",className:"contiki-solo-price__top-price",text:null===p||void 0===p?void 0:p.price}),Object(F.jsx)(ce.a,{isA:Object(Ae.g)("paragraph",3),text:f?null===r||void 0===r||null===(l=r.texts)||void 0===l?void 0:l.pricePerPersonText:null===r||void 0===r||null===(a=r.texts)||void 0===a?void 0:a.roomNotAvailableText,className:"contiki-solo-price__top-price--pp ".concat(f?"":"contiki-solo-price__not-available"),isRichText:!0})]})]}),r.status===m.z.CLOSED&&Object(F.jsx)(ce.a,{textStyles:_t.price,className:"contiki-solo-price__top--price",text:null===s||void 0===s||null===(c=s.texts)||void 0===c?void 0:c.closedDepartureText})]})})}),Nt=function(e){var t;return{price:(t={},Object(ne.a)(t,re.b.Desktop,{DEFAULT:"secondaryParagraphL"}),Object(ne.a)(t,re.b.Tablet,{DEFAULT:"secondaryParagraphL"}),Object(ne.a)(t,re.b.Mobile,{DEFAULT:"secondaryParagraphXL"}),t)[e]}},St=(i(1445),function(e){var t,i,n,o=e.item,l=e.uplift,a=e.bestPriceLabel,c=e.alternativeLabel,r=e.hideStrikethroughForWasPrice,d=Object(le.d)(),s=o.status===m.z.AVAILABLE||o.status===m.z.ON_REQUEST,v=Object(me.g)(o,null===o||void 0===o?void 0:o.defaultRoomType),b=100*((null===v||void 0===v?void 0:v.priceNumeric)||0),j=Object(me.e)(o),p=!!(null===v||void 0===v?void 0:v.priceOld)&&(null===v||void 0===v?void 0:v.price)!==(null===v||void 0===v?void 0:v.priceOld),O=null===l||void 0===l||null===(t=l.textListView)||void 0===t?void 0:t.replace("{price}","<span data-up-from-currency-unit-major='' className='text-label-s'></span>");return Object(F.jsx)("div",{className:u()("contiki-price",{"contiki-price--with-label":c}),children:Object(F.jsxs)("div",{className:"contiki-price__top",children:[j&&a&&Object(F.jsx)(ce.a,{isA:"paragraphXXS",className:"contiki-best-price",text:a}),s&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("div",{className:"contiki-price__top--wrapper",children:[p&&Object(F.jsxs)("div",{className:"contiki-price__top--old-wrapper",children:[Object(F.jsx)(ce.a,{isA:"paragraphXS",className:"contiki-price__top--old-price",text:null===o||void 0===o||null===(i=o.texts)||void 0===i?void 0:i.offerUpToDiscountPrefix}),Object(F.jsx)(ce.a,{isA:"paragraphXS",className:u()("contiki-price__top--old-price",{"contiki-price__top--old-price__strikethrough":!r}),text:null===v||void 0===v?void 0:v.priceOld})]}),Object(F.jsx)(ce.a,{textStyles:Nt(d).price,className:"contiki-price__top--price",text:(null===v||void 0===v?void 0:v.price)?"".concat(null===v||void 0===v?void 0:v.price," ").concat(null===o||void 0===o||null===(n=o.texts)||void 0===n?void 0:n.pricePerPersonText):""})]}),(null===l||void 0===l?void 0:l.textListView)&&Object(F.jsx)("span",{"data-up-price-value":b,"data-up-price-type":"total","data-up-price-model":"per_person","data-up-taxes-included":"true",children:Object(F.jsxs)("div",{className:"contiki-price__top--financing",children:[Object(F.jsx)(ce.a,{text:O,isA:"labelS",isRichText:!0}),Object(F.jsx)(B.a,{name:null===l||void 0===l?void 0:l.tooltipIcon,className:"contiki-price__top--financing-icon"}),Object(F.jsx)("span",{"data-up-tooltip":""})]})})]}),o.status===m.z.CLOSED&&Object(F.jsx)(ce.a,{textStyles:Nt(d).price,className:"contiki-price__top--price",text:o.texts.closedDepartureText})]})})}),Et=i(972),Dt=i(569),wt=(i(1440),function(e){var t=e.date,i=e.endDate,n=void 0!==i&&i,o=Object(g.o)(t,{month:"long"});return Object(F.jsx)("div",{className:"contiki-tour-date",children:Object(F.jsx)(ce.a,{isA:n?"paragraphXS":"secondaryParagraphL",className:"contiki-tour-date__month-and-year",text:"".concat(t.getUTCDate()," ").concat(o,", ").concat(Object(g.m)(t))})})}),Lt=(i(1439),function(e){var t,i,n,o,l,a,r,d,s,v,b=e.id,j=e.item,p=e.isActive,O=e.hideElement,f=e.percentageDiscountVisible,x=e.otherTripTypesAvailable,h=e.currencySymbol,g=e.settings,T=e.hideMarketingMessageListView,k=e.uplift,y=e.doubleWidthLastColumn,_=e.itemsNumber,A=e.filteredItemsNumber,N=Object(le.d)(),S=j.status===m.z.ON_REQUEST,E=Boolean(j.status===m.z.ON_REQUEST&&(null===g||void 0===g||null===(t=g.texts)||void 0===t?void 0:t.onRequestDepartureText)),D=null===g||void 0===g?void 0:g.useCompactIconsAndMobileView,w=j.endDate.getTime()===j.startDate.getTime(),L=null===g||void 0===g||null===(i=g.tripVariationsMultiselect)||void 0===i||null===(n=i.options)||void 0===n?void 0:n.find((function(e){return e.label===j.subtitle})),M=function(e){var t,i,n,o=Object(me.g)(e,null===e||void 0===e?void 0:e.defaultRoomType),l=!!(null===o||void 0===o||null===(t=o.priceBreakdown)||void 0===t?void 0:t.discounted),a=null===o||void 0===o||null===(i=o.priceBreakdown)||void 0===i?void 0:i.discounts,c=null===o||void 0===o||null===(n=o.priceBreakdown)||void 0===n?void 0:n.promotionalMessage,r=null===a||void 0===a?void 0:a.some((function(t){var i,n;return null===e||void 0===e||null===(i=e.discountInfo)||void 0===i||null===(n=i.map((function(e){return null===e||void 0===e?void 0:e.discountType})))||void 0===n?void 0:n.includes(null===t||void 0===t?void 0:t.name)}));return{defaultPricing:o,hasDiscount:l,itemDiscounts:a,hasDiscountApplied:r,itemPromotionalMessage:c}}(j),I=M.defaultPricing,C=M.hasDiscount,P=M.itemDiscounts,R=M.itemPromotionalMessage,U=M.hasDiscountApplied,V={displaySavingsVisible:!!(null===I||void 0===I?void 0:I.priceSaving),savingsLabel:null===j||void 0===j||null===(o=j.texts)||void 0===o?void 0:o.savingsLabel,priceSaving:null===I||void 0===I?void 0:I.priceSaving,percentageDiscountVisible:f,percentagePriceDiscount:null===I||void 0===I?void 0:I.percentagePriceDiscount};return Object(F.jsx)("div",{className:"tour-info",children:Object(F.jsx)("div",{className:"tour-info__container",children:Object(F.jsxs)("div",{className:"tour-info__container-body",children:[Object(F.jsxs)("div",{className:"tour-info__top",children:[Object(F.jsx)(B.a,{name:null===g||void 0===g||null===(l=g.icons)||void 0===l?void 0:l.listDepartureIcon}),Boolean(!T)&&(R?Object(F.jsx)(ce.a,{textStyles:kt(N).offerDiscount,className:"tour-info__top-offer-discount",text:R}):C&&(null===P||void 0===P||null===(a=P.map)||void 0===a?void 0:a.call(P,(function(e){var t,i,n,o=e.name;return Object(F.jsx)(ce.a,{textStyles:kt(N).offerDiscount,className:"tour-info__top-offer-discount",text:null===(t=j.discountInfo)||void 0===t||null===(i=t.find)||void 0===i||null===(n=i.call(t,(function(e){return e.discountType===o})))||void 0===n?void 0:n.desc},o)}))))]}),Object(F.jsxs)("div",{className:"tour-info__middle",children:[Object(F.jsxs)("div",{children:[Object(F.jsx)(wt,{date:null===j||void 0===j?void 0:j.startDate,compactView:D,item:j}),!w&&Object(F.jsx)(wt,{compactView:D,date:null===j||void 0===j?void 0:j.endDate,endDate:!0})]}),Object(F.jsx)(Dt.a,Object(c.a)(Object(c.a)({},V),{},{children:Object(F.jsx)(Et.a,{className:u()("tour-info__middle-offer-percentage",{"tour-info__middle-offer-percentage--discount-applied":U}),text:"".concat(null===I||void 0===I?void 0:I.percentagePriceDiscount,"% off")})}))]}),Object(F.jsx)("div",{className:"tour-info__call-us",children:S&&Object(F.jsx)(Et.a,{className:"tour-info__call-us--label",text:null===j||void 0===j||null===(r=j.texts)||void 0===r?void 0:r.onRequestDepartureText})}),Object(F.jsxs)("div",{className:"tour-info__bottom",children:[Object(F.jsx)(ht,{item:j,settings:g,variationOption:L,itemsNumber:_,otherTripTypesAvailable:x,filteredItemsNumber:A,hideDefinite:!0,isNewContiki:!0}),Object(F.jsx)("div",{className:"tour-info__column",children:(null===g||void 0===g?void 0:g.roomSelectorEnabled)?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(At,{item:j,currencySymbol:h,settings:g,isOnRequestDepartureTextVisible:E,halfWidth:D}),Object(F.jsx)(gt.a,{text:null===g||void 0===g||null===(d=g.texts)||void 0===d?void 0:d.onRequestDepartureText,departureTextVisible:E,withLimitedAvailability:(v=j.flags,v.filter((function(e){return"object"===typeof e&&"type"in e&&e.type===Tt.a.LimitedAvailability}))[0]||null),alignLeft:y,compactView:D})]}):Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(St,{item:j,uplift:k,bestPriceLabel:null===g||void 0===g||null===(s=g.texts)||void 0===s?void 0:s.bestPriceLabel,hideStrikethroughForWasPrice:null===g||void 0===g?void 0:g.hideStrikethroughForWasPrice})})})]}),!p&&Object(F.jsx)("div",{className:"tour-info__button",children:Object(F.jsx)(Ye.a,{isA:"link",textType:"linkXs",iconPosition:"right",text:"More info",iconName:"UI-arrow1-down",onClick:function(){p&&O(b)}})})]})})})}),Mt=(i(1437),["items","showElement","isActive","mobileView","hideElement","hideMarketingMessage","otherTripTypesAvailable","ctaButtonSettings","selectedDeparture","settings","uplift","zipMoney","percentageDiscountVisible","currencySymbol","hideMarketingMessageListView","columnWidthStyle","columnCount","viewType"]),It=function(e){var t,i,n,o=e.items,l=e.showElement,a=e.isActive,s=e.mobileView,v=e.hideElement,b=e.hideMarketingMessage,j=e.otherTripTypesAvailable,p=e.ctaButtonSettings,O=e.selectedDeparture,f=e.settings,x=e.uplift,h=e.zipMoney,g=e.percentageDiscountVisible,_=e.currencySymbol,A=e.hideMarketingMessageListView,N=e.columnWidthStyle,S=e.columnCount,E=e.viewType,D=Object(Oe.a)(e,Mt),M=Object(k.b)((function(e){return e.datesAndPricing})),I=M.lowestPriceItemId,P=M.selectedVariationArray,R=Object(k.a)(),U=Object(d.useState)(0),V=Object(r.a)(U,2),B=V[0],X=V[1],q=a?"active":null,z=o?Object(fe.c)(o,P,j):[];Object(d.useEffect)((function(){return X(o?null===z||void 0===z?void 0:z.length:0)}),[null===z||void 0===z?void 0:z.length,P]);var W=o&&((null===(t=Object(fe.c)(o,P,j))||void 0===t?void 0:t[0])||o[0]),H=(null===W||void 0===W?void 0:W.status)===m.z.AVAILABLE||(null===W||void 0===W?void 0:W.status)===m.z.ON_REQUEST||j;Object(d.useEffect)((function(){var e,t;(null===(e=window)||void 0===e?void 0:e.upliftReload)&&(null===(t=window)||void 0===t||t.upliftReload())}),[W]),Object(d.useEffect)((function(){I&&I===(null===W||void 0===W?void 0:W.id)&&(G(I),R(Object(T.k)("")))}),[I]);var G=function(e){L.a&&window.setTimeout((function(){var t;W&&l((null===(t=Object(me.c)(o,P))||void 0===t?void 0:t[0])||o[0],e)}),300)},Q=O&&a?Object(fe.i)(O,f):W,K=null===W||void 0===W?void 0:W.startDate,Y=(null===W||void 0===W?void 0:W.status)!==m.z.CLOSED&&!j&&{"data-item-type":y.a.itemType.GENERAL_INTERACTION,"data-item-name":a?y.a.itemName.DEPARTURE_COLLAPSE:y.a.itemName.DEPARTURE_EXPAND,"data-item-departure":Object(w.c)(K)},J=Object(c.a)({isActive:a,hideElement:v,hideMarketingMessage:b,ctaButtonSettings:p,zipMoney:h,percentageDiscountVisible:g,item:W,settings:f,currencySymbol:_,uplift:x},D),Z={percentageDiscountVisible:g,isActive:a,mobileView:s,hideElement:v,settings:f,currencySymbol:_,hideMarketingMessageListView:A,uplift:x,columnWidthStyle:N,id:null!==(i=null===W||void 0===W?void 0:W.id)&&void 0!==i?i:""};return Object(F.jsx)("div",{id:null===W||void 0===W?void 0:W.id,className:"contiki-list-item",children:Object(F.jsx)(Ot,{active:!(null===o||void 0===o?void 0:o.some((function(e){return(null===e||void 0===e?void 0:e.status)!==m.z.CLOSED}))),children:Object(F.jsxs)("div",{className:u()("contiki-list-item__item",q),children:[Object(F.jsx)("div",Object(c.a)(Object(c.a)({onClick:function(){var e,t;return t=null!==(e=null===W||void 0===W?void 0:W.id)&&void 0!==e?e:"",void(a?(null===f||void 0===f?void 0:f.viewType)!==C.a.Calendar&&v(t):G(t))},className:u()("contiki-list-item__title ",q)},Y),{},{children:Object(F.jsx)(Lt,Object(c.a)({item:Q,itemsNumber:null===o||void 0===o?void 0:o.filter((function(e){return(null===e||void 0===e?void 0:e.status)!==m.z.CLOSED})).length,otherTripTypesAvailable:j,columnCount:S,doubleWidthLastColumn:!!S,filteredItemsNumber:B},Z))})),H&&Object(F.jsx)(pt,Object(c.a)(Object(c.a)({className:u()("contiki-list-item__content ",q)},J),{},{item:Q,items:o,viewType:E,id:null!==(n=null===W||void 0===W?void 0:W.id)&&void 0!==n?n:""}))]})})})},Ct=i(1260),Pt=i(979),Rt=(i(1435),function(e){var t=e.headings,i=e.settings,n=e.columnWidthStyle,o=e.flexColumns,l=e.hideEmptyColumns,a=e.headingsToDisplay;if(!t)return null;var c=(null===i||void 0===i?void 0:i.viewType)===C.a.Calendar,d=Object(w.d)(null===i||void 0===i?void 0:i.roomSelectorEnabled),s=Object(Pt.a)(t,d,!l);return a&&(s=s.filter((function(e){return a.includes(e[0])}))),Object(F.jsx)("div",{className:u()("contiki-list-header",{"contiki-list-header--calendar-view":c}),children:s.map((function(e,t){var i=Object(r.a)(e,2),l=i[0],a=i[1];return Object(F.jsx)(Ct.a,{fieldName:l,fieldLabel:a.label,flexColumns:o?s.length:null,style:n,doubleWidth:o&&t===s.length-1},l)}))})}),Ut=i(408),Vt=(i(1434),function(e){var t,i,n,o,l=e.settings,a=e.days,r=e.loadItems,s=e.loadInMonth,v=e.isNextMonthAvailable,b=e.dayChangeCallback,j=e.stickyHeaderOffset,p=e.columnWidthStyle,O=e.alternateColumnSettings,m=e.viewType,f=Object(k.a)(),x=Object(d.useContext)(M.a),h=null===x||void 0===x?void 0:x.brandCode,_=Object(z.a)(Object(le.c)(h,w.a)),N=Object(k.b)((function(e){return e.config})).brandPageFixedWidth,S=Object(k.b)((function(e){return e.datesAndPricing})),E=S.selectedDeparture,D=S.currentMonth,L=D&&a.length<D.tourCount,I=Object(c.a)(Object(c.a)({},null===l||void 0===l?void 0:l.integration),{},{tooltipIcon:null===l||void 0===l||null===(t=l.icons)||void 0===t?void 0:t.upliftInfo,upliftLogo:null===l||void 0===l||null===(i=l.images)||void 0===i?void 0:i.upliftLogo,text:null===l||void 0===l||null===(n=l.texts)||void 0===n?void 0:n.upliftText,textListView:null===l||void 0===l||null===(o=l.texts)||void 0===o?void 0:o.upliftTextListView}),C={invertCTAsButttonStyle:null===l||void 0===l?void 0:l.invertCTAsButttonStyle,invertCTAsButttonPosition:null===l||void 0===l?void 0:l.invertCTAsButttonPosition},P=function(e,t){setTimeout((function(){Object(A.p)(t,j)}),400),e&&f(Object(T.d)(e)),b(null===e||void 0===e?void 0:e.startDate,{departureSeasonId:null===e||void 0===e?void 0:e.seasonId,departureTourOptionUrl:null===e||void 0===e?void 0:e.tourOptionUrl})},R=function(e){f(Object(T.d)(null)),setTimeout((function(){return Object(A.p)(e,j)}),400)},U={uplift:I,ctaButtonSettings:C,selectedDeparture:E,settings:l},V=(null!==l&&void 0!==l?l:{}).listViewHeadings;return(null===a||void 0===a?void 0:a.length)?Object(F.jsxs)("div",{className:u()("contiki-tour-list",{"contiki-tour-list--fixed":N}),children:[!_&&Object(F.jsx)(Rt,{headings:V,settings:l,columnWidthStyle:p,hideEmptyColumns:!!O,flexColumns:!!O}),a.map((function(e){var t,i,n,o;return Object(F.jsx)("div",{"data-testid":"list-item",children:Object(F.jsx)(It,Object(c.a)({mobileView:_,items:null===e||void 0===e?void 0:e.items,otherTripTypesAvailable:null===e||void 0===e?void 0:e.otherTripTypesAvailable,isActive:(o=null===e||void 0===e?void 0:e.startDate,!!(null===E||void 0===E?void 0:E.startDate)&&0===Object(g.c)(o,null===E||void 0===E?void 0:E.startDate)&&!(null===E||void 0===E?void 0:E.isInitial)),showElement:P,hideElement:R,zipMoney:null===l||void 0===l?void 0:l.zipMoney,optionSelectorSettings:null===l||void 0===l?void 0:l.optionSelectorSettings,hideMarketingMessage:null===l||void 0===l?void 0:l.hideMarketingMessage,currencySymbol:null===l||void 0===l?void 0:l.currencySymbol,percentageDiscountVisible:null===l||void 0===l?void 0:l.percentageDiscountVisible,viewType:m,hideMarketingMessageListView:null===l||void 0===l?void 0:l.hideMarketingMessageListView,columnWidthStyle:null!==(n=null===O||void 0===O?void 0:O.columnFlexBasis)&&void 0!==n?n:p,columnCount:null===O||void 0===O?void 0:O.columnCount},U),null===e||void 0===e||null===(i=e.startDate)||void 0===i?void 0:i.toString())},null===e||void 0===e||null===(t=e.startDate)||void 0===t?void 0:t.toString())})),(v||L)&&Object(F.jsx)("div",{className:"contiki-tour-list__button",children:Object(F.jsx)(Z.a,{type:4,text:fe.m.LOAD_MORE,onClick:L?s:r,dataAttributes:{itemType:y.a.itemType.GENERAL_INTERACTION,itemName:y.a.itemName.LOAD_MORE_DEPARTURES}})})]}):Object(F.jsx)(ce.a,{text:fe.m.NO_TRIPS_AVAILABLE})}),Bt=i(1430),Ft=(i(1399),{IN_VIEW:"datesAndPricingInView",SELECT_VARIATION:"selectVariationInDatesAndPricing"});t.default=function(e){var t,i,n,s,v,j,U,V,B,X,q,z,W,H,G,Q,K,Y=e.data,J=Y.settings,Z=Y.items,$=Object(k.a)(),ee=Object(k.b)((function(e){return e.datesAndPricing})),te=ee.months,ie=ee.currentMonth,ne=ee.listItems,oe=ee.selectedDeparture,le=ee.selectedItem,ae=ee.lowestPriceItemId,re=ee.isLoading,de=ee.tripVariationsCheckboxList,se=ee.selectedDepartureBannerMonthIndex,ue=Object(k.b)((function(e){return e.tourPage})),ve=ue.optionId,be=ue.seasonId,je=ue.tourOptionId,Oe=(ue.subtitle,Object(k.b)((function(e){return e.config})).isTAP),me=Object(k.b)((function(e){return e.headerModal})),xe=me.headerModalCurrentMonth,ge=me.yearsAndMonthList,Te=Object(k.b)((function(e){return e.tripVariations})),ke=Object(k.b)((function(e){return e.config})).brandPageFixedWidth,ye=b()(),_e=Object(r.a)(ye,2),Ae=_e[0],Ne=_e[1],Se=Object(d.useState)(!1),Ee=Object(r.a)(Se,2),De=Ee[0],we=Ee[1],Le=Object(d.useState)(null),Me=Object(r.a)(Le,2),Ie=Me[0],Ce=Me[1],Pe=Object(d.useState)(null===J||void 0===J||null===(t=J.yearAndMonthSelector)||void 0===t?void 0:t.yearsAndMonthList),Re=Object(r.a)(Pe,2),Ue=Re[0],Ve=Re[1],Be=Object(d.useState)(Object(_.a)(J)),Fe=Object(r.a)(Be,2),Xe=Fe[0],qe=Fe[1],ze=Object(d.useContext)(M.a),We=null===ze||void 0===ze?void 0:ze.brandCode,He=Object(d.useContext)(I.a),Ge=fe.j.includes(Oe?"":We||"")?!!(null===Ne||void 0===Ne?void 0:Ne.width)&&Ne.width<=m.g.LG:fe.b.includes(We||"")?!!(null===Ne||void 0===Ne?void 0:Ne.width)&&Ne.width<=m.g.CUSTOM_XL:!!Object(m.m)((null===Ne||void 0===Ne?void 0:Ne.width)||0),Qe=Object(fe.g)(Ge),Ke=Object(P.a)(Qe,null===ze||void 0===ze?void 0:ze.brandCode),Ye=Object(d.useState)([]),Je=Object(r.a)(Ye,2),Ze=Je[0],$e=Je[1],et=Object(d.useState)(!0),tt=Object(r.a)(et,2),it=tt[0],nt=tt[1],ot=Object(d.useState)(0),lt=Object(r.a)(ot,2),at=lt[0],ct=lt[1],rt=Object(d.useState)((null===J||void 0===J?void 0:J.viewType)===C.a.Calendar?R.b.CALENDAR:R.b.LIST),dt=Object(r.a)(rt,2),st=dt[0],ut=dt[1],vt=Object(d.useRef)(null),bt=L.a?null===(i=document)||void 0===i?void 0:i.getElementById(m.r.STICKY_TRIP_HEADER):null;Object(d.useEffect)((function(){ct(bt?null===bt||void 0===bt?void 0:bt.clientHeight:0)}),[null===bt||void 0===bt?void 0:bt.clientHeight]);var jt=Boolean((null===J||void 0===J||null===(n=J.smallGroupRaq)||void 0===n?void 0:n.enabled)&&(null===J||void 0===J?void 0:J.requestQuoteSmallGroups)),pt=Boolean((null===J||void 0===J||null===(s=J.lowestPriceInfo)||void 0===s?void 0:s.label)&&(null===(v=J.lowestPriceInfo)||void 0===v||null===(j=v.lowestPriceInfo)||void 0===j?void 0:j.dateRateId)),Ot=Object(d.useMemo)((function(){var e,t,i;return Object(c.a)(Object(c.a)({},null===J||void 0===J?void 0:J.integration),{},{tooltipIcon:null===J||void 0===J||null===(e=J.icons)||void 0===e?void 0:e.upliftInfo,upliftLogo:null===J||void 0===J||null===(t=J.images)||void 0===t?void 0:t.upliftLogo,text:null===J||void 0===J||null===(i=J.texts)||void 0===i?void 0:i.upliftText})}),[null===J||void 0===J||null===(U=J.icons)||void 0===U?void 0:U.upliftInfo,null===J||void 0===J||null===(V=J.images)||void 0===V?void 0:V.upliftLogo,null===J||void 0===J?void 0:J.integration,null===J||void 0===J||null===(B=J.texts)||void 0===B?void 0:B.upliftText]),mt=Object(O.a)({triggerOnce:!1}),ft=mt.ref,xt=mt.inView,ht=Object(d.useCallback)((function(){return te&&ie&&te.findIndex((function(e){return e.dateId===ie.dateId}))}),[ie]),gt=Object(d.useCallback)((function(e){var t;return null===ie||void 0===ie||null===(t=ie.items)||void 0===t?void 0:t.find((function(t){var i;return 0===Object(g.c)(e,null===t||void 0===t||null===(i=t.items[0])||void 0===i?void 0:i.startDate)}))}),[null===ie||void 0===ie?void 0:ie.items]),Tt=function(){var e=ht();if(ne&&"number"===typeof e&&te){var t,i=null===(t=ne[e])||void 0===t?void 0:t.loadedMonths,n=null===i||void 0===i?void 0:i[i.length-1];return n?null===te||void 0===te?void 0:te[n]:te[0]}return null};Object(d.useEffect)((function(){!(null===Z||void 0===Z?void 0:Z.length)||ae||De||function(){var e,t,i=(null===te||void 0===te?void 0:te.length)?te:Object(_.a)(J),n=null===i||void 0===i?void 0:i.find((function(e){return e.tourCount})),o=n&&"".concat(null===n||void 0===n?void 0:n.year,"-").concat(n.id<10?"0".concat(null===n||void 0===n?void 0:n.id):null===n||void 0===n?void 0:n.id),l=(null===ie||void 0===ie?void 0:ie.items)&&Object(A.a)(ie.items)?null===ie||void 0===ie||null===(e=ie.items[0])||void 0===e?void 0:e.startDate:xe?o:Z&&(null===(t=Z[0])||void 0===t?void 0:t.startDate),a=Object(c.a)({},Object(_.d)(i,l));if(a){var r=null!==se&&void 0!==se?se:i.findIndex((function(e){return e.dateId===a.dateId}));if(!(null===te||void 0===te?void 0:te.length)&&$(Object(T.m)(i)),(ie||!ie&&!xe)&&Z&&$(Object(T.i)(a.dateId,Object(fe.h)(Z,J))),$(Object(T.f)(r)),$(Object(T.j)(r,r)),xe&&!ie&&!ae){var d=(null===J||void 0===J?void 0:J.manualLoadMoreDerpartures)?null===a||void 0===a?void 0:a.dateNPriceManualInitialQueryApiUrl:null===a||void 0===a?void 0:a.dateNPriceQueryApiUrl;d=Object(fe.a)({settings:J,initialApiUrl:d,checkboxList:de,tourOptionId:je}),J&&$(Object(T.c)(d,r,r,J,st))}we(!0)}}()}),[ie,$,xe,Z,ae,te,De,se,J,st]),Object(d.useEffect)((function(){xe&&!ie&&Object(A.a)(te)&&xe.year&&yt(Object(_.c)(te,xe.year,xe.id),R.b.CALENDAR,xe.year)}),[te]),Object(d.useEffect)((function(){ie||function(){var e;null===J||void 0===J||null===(e=J.legend)||void 0===e||e.sort((function(e,t){return(e.type||0===e.type)&&(t.type||0===t.type)&&e.type>t.type?1:-1}))}()}),[ie,null===J||void 0===J?void 0:J.legend]),Object(d.useEffect)((function(){Object(f.h)("optionId",ve)}),[ve]),Object(d.useEffect)((function(){$e(function(){var e,t,i=[],n=ht();if(!ie)return i;(ie.items&&i.push.apply(i,Object(a.a)(ie.items)),ne&&n)&&(null===(e=ne[n])||void 0===e||null===(t=e.loadedMonths)||void 0===t||t.forEach((function(e){var t,n=null===te||void 0===te||null===(t=te[e])||void 0===t?void 0:t.items;n&&i.push.apply(i,Object(a.a)(n))})));return Object(fe.k)(i.flat())}())}),[ie,ht,ne,te]),Object(d.useEffect)((function(){var e;if(ie&&Object(h.c)(ie),te&&Object(h.d)(te),ie&&(Ce(ie),st===R.b.CALENDAR&&!oe&&(null===J||void 0===J||null===(e=J.tripVariationsMultiselect)||void 0===e?void 0:e.enableMultiselect)&&(null===ie||void 0===ie?void 0:ie.items))){var t,i,n,o=null!==(t=null===(i=ie.items)||void 0===i?void 0:i.find((function(e){var t;return(null===e||void 0===e||null===(t=e.items[0])||void 0===t?void 0:t.status)!==m.z.CLOSED})))&&void 0!==t?t:null===(n=ie.items)||void 0===n?void 0:n[0],l=gt(new Date(null===o||void 0===o?void 0:o.startDate));l.isInitial=!0,$(Object(T.e)(l)),l.items[0]&&$(Object(T.d)(Object(fe.i)(l.items[0],J)))}}),[ie]);var kt=function(e){var t=e.year,i=e.month,n=e.forceReFetch,o=void 0!==n&&n,l=e.view,a=void 0===l?st:l;$(Object(T.n)(null));var c=Object(_.c)(te,t,i);yt(c,a,t,o,void 0),c.tourOptionUrl&&c.seasonId!==be&&$(Object(x.k)({url:c.tourOptionUrl,successMessage:E.a.seasonChangeSuccess,seasonMonth:i+1||0}))},yt=function(){var e=Object(l.a)(o.a.mark((function e(t,i,n){var l,a,c,r,d,s,u=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=u.length>3&&void 0!==u[3]&&u[3],c=u.length>4?u[4]:void 0,t){e.next=4;break}return e.abrupt("return");case 4:r=null===(l=null!==c&&void 0!==c?c:te)||void 0===l?void 0:l.indexOf(t),d=a||!(null===t||void 0===t?void 0:t.items),"number"!==typeof r||ae||(s=(null===J||void 0===J?void 0:J.manualLoadMoreDerpartures)&&i===R.b.LIST?t.dateNPriceManualInitialQueryApiUrl:t.dateNPriceQueryApiUrl,s=Object(fe.a)({settings:J,initialApiUrl:s,checkboxList:de,tourOptionId:je}),d&&s&&J?$(Object(T.c)(s,r,r,J,i)):setTimeout((function(){return $(Object(T.f)(r))}),0)),!ge.length&&Dt&&$(Object(h.f)(Dt)),$(Object(h.c)(t)),n&&$(Object(x.h)(n)),r&&$(Object(x.g)(r));case 11:case"end":return e.stop()}}),e)})));return function(t,i,n){return e.apply(this,arguments)}}(),_t=(null===ie||void 0===ie?void 0:ie.year)&&te?null===(X=Object(fe.d)(ie.year,ie.id,te,"next"))||void 0===X?void 0:X[0]:void 0,At=function(){if((null===ie||void 0===ie?void 0:ie.year)&&te){var e=Object(fe.d)(ie.year,ie.id,te,"previous");return e&&e.length>0?null===e||void 0===e?void 0:e[e.length-1]:void 0}}(),Nt=function(e,t){var i,n,o=t.departureSeasonId,l=t.departureTourOptionUrl,a=e.getUTCFullYear(),c=e.getUTCMonth(),r=null===Ue||void 0===Ue||null===(i=Ue.find((function(e){return e.year===a})))||void 0===i||null===(n=i.months)||void 0===n?void 0:n.find((function(e){return e.id===c+1})),d=null!==o&&void 0!==o?o:null===r||void 0===r?void 0:r.seasonId,s=(null===ie||void 0===ie?void 0:ie.tourOptionUrl)||l||(null===r||void 0===r?void 0:r.tourOptionUrl);s&&d!==be&&$(Object(x.k)({url:s,successMessage:E.a.departureSelectedToastMessage,seasonMonth:c+1||0}))};Object(d.useEffect)((function(){var e,t,i,n;Oe||(null===J||void 0===J||null===(e=J.tripVariationsMultiselect)||void 0===e?void 0:e.enableMultiselect)||(Ve(null===J||void 0===J||null===(t=J.yearAndMonthSelector)||void 0===t?void 0:t.yearsAndMonthList),qe(Object(_.a)(J)),(null===J||void 0===J||null===(i=J.yearAndMonthSelector)||void 0===i?void 0:i.yearsAndMonthList)&&$(Object(h.f)(null===J||void 0===J||null===(n=J.yearAndMonthSelector)||void 0===n?void 0:n.yearsAndMonthList)))}),[JSON.stringify(null===J||void 0===J?void 0:J.yearAndMonthSelector)]),Object(d.useEffect)((function(){var e,t=null===Xe||void 0===Xe?void 0:Xe.find((function(e){return((null===e||void 0===e?void 0:e.dateId)===(null===ie||void 0===ie?void 0:ie.dateId)||(null===e||void 0===e?void 0:e.dateId)===(null===Ie||void 0===Ie?void 0:Ie.dateId))&&e.isAnyTripAvailable}));if(!(null===J||void 0===J||null===(e=J.tripVariationsMultiselect)||void 0===e?void 0:e.enableMultiselect)||t||ie||Ie){var i=t||(null===Xe||void 0===Xe?void 0:Xe.find((function(e){return e.isAnyTripAvailable})));i&&yt(Object(_.c)(Xe,i.year,null===i||void 0===i?void 0:i.id),st,i.year,!0,Xe),Xe&&Object(h.d)(Xe)}}),[Xe]);var St=function(){var e=Object(l.a)(o.a.mark((function e(t,i){var n,l,a,c,r,d,s,u,v,b,j,O,m,f,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object.values(t),l=n.some((function(e){return!0===e})),a=n.findIndex((function(e){return!0===e})),(null===(c=null===Te||void 0===Te?void 0:Te.filter((function(e){var t,i,n;return(null===e||void 0===e?void 0:e.tourOptionId)===Number(null===J||void 0===J||null===(t=J.tripVariationsMultiselect)||void 0===t||null===(i=t.options)||void 0===i||null===(n=i[a])||void 0===n?void 0:n.optionId)}))[0])||void 0===c?void 0:c.tourOptionUrl)&&(null===c||void 0===c?void 0:c.seasonId)&&be&&$(Object(x.k)({url:null===c||void 0===c?void 0:c.tourOptionUrl,seasonMonth:Number(null===c||void 0===c?void 0:c.seasonId),successMessage:E.a.tripVariantToastMessage,scrollCallback:i?void 0:function(){return Object(A.p)("datesprices",at)}})),!l){e.next=33;break}return r=null===He||void 0===He?void 0:He.yearMonthDataApiUrl,r=Object(fe.a)({settings:J,initialApiUrl:r,checkboxList:t,tourOptionId:je}),e.prev=8,e.next=11,p.a.get(r||"");case 11:if(u=e.sent,v=u.data,Ve(v.yearsAndMonthList),qe(Object(_.a)({yearAndMonthSelector:v})),v.yearsAndMonthList&&$(Object(h.f)(v.yearsAndMonthList)),b=Object(_.a)({yearAndMonthSelector:v}),$(Object(T.m)(b)),j=null===b||void 0===b?void 0:b.find((function(e){return e.year===(null===ie||void 0===ie?void 0:ie.year)&&e.isAnyTripAvailable})),$(Object(T.a)()),Object(A.e)(j,ie)){e.next=22;break}return e.abrupt("return");case 22:O=ie?null===ie||void 0===ie||null===(d=ie.items)||void 0===d||null===(s=d[0])||void 0===s?void 0:s.startDate:null,m=Object(_.d)(b,O),f=b.indexOf(m),g=(null===J||void 0===J?void 0:J.manualLoadMoreDerpartures)&&st===R.b.LIST?null===m||void 0===m?void 0:m.dateNPriceManualInitialQueryApiUrl:null===m||void 0===m?void 0:m.dateNPriceQueryApiUrl,g=Object(fe.a)({settings:J,initialApiUrl:g,checkboxList:t,tourOptionId:je}),J&&($(Object(T.c)(g,f,f,J,st)),$(Object(T.j)(f,f))),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(8),console.error(e.t0);case 33:case"end":return e.stop()}}),e,null,[[8,30]])})));return function(t,i){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){var e,t,i;if((null===(e=window)||void 0===e?void 0:e.Uplift)&&(null===Ot||void 0===Ot?void 0:Ot.upliftEnabled)){var n,o,l,a=(t=null===Ot||void 0===Ot?void 0:Ot.upliftReservationCheckIn,i=null===Ot||void 0===Ot?void 0:Ot.upliftReservationCheckOut,{travelers:[{id:0}],hotel_reservations:[{hotel_name:"",check_in:t,check_out:i}]});null===(n=window)||void 0===n||null===(o=n.Uplift)||void 0===o||null===(l=o.Payments)||void 0===l||l.load(a)}}),[be,oe,Ot]);var Et=Object(d.useMemo)((function(){return Object(fe.e)(null===J||void 0===J?void 0:J.listViewHeadings,null===J||void 0===J?void 0:J.roomSelectorEnabled)||{}}),[null===J||void 0===J?void 0:J.listViewHeadings,null===J||void 0===J?void 0:J.roomSelectorEnabled]),Dt=null===J||void 0===J||null===(q=J.yearAndMonthSelector)||void 0===q?void 0:q.yearsAndMonthList,wt={year:null===ie||void 0===ie?void 0:ie.year,id:null===ie||void 0===ie?void 0:ie.id,name:null===ie||void 0===ie?void 0:ie.name},Lt={mobileView:Ge,uplift:Ot,isActive:it,settings:J,selectedDeparture:oe},Mt={selectedDeparture:oe,mobileView:Ge,nextMonth:_t,previousMonth:At,switchMonth:yt,dayChangeCallback:Nt,getAvailableMonths:fe.d,settings:J},Ct=null!==J&&void 0!==J?J:{},Pt=Ct.useCompactIconsAndMobileView,Xt=Ct.listViewHeadings,qt=Ct.roomSelectorEnabled,zt=Pt&&Xt&&qt?Object(w.b)(Xt,qt):null;Object(d.useEffect)((function(){L.a&&window.dispatchEvent(new CustomEvent(Ft.IN_VIEW,{detail:{inView:xt}}))}),[L.a,xt]);var Wt=function(e){St(e.detail.index,!0)};return Object(d.useEffect)((function(){L.a&&window.addEventListener(Ft.SELECT_VARIATION,Wt)}),[L.a]),(null===ie||void 0===ie?void 0:ie.items)?Object(F.jsx)("div",{ref:ft,id:"datesprices",className:"contiki-dates-and-pricing","data-module-name":st===R.b.CALENDAR?y.a.moduleName.DEPARTURE_CALENDAR:y.a.moduleName.DEPARTURE_LIST,children:Object(F.jsxs)("div",{className:u()("contiki-dates-and-pricing__content",ke?"with-fixed-padding":"with-padding"),children:[Object(F.jsxs)("div",{className:"contiki-dates-and-pricing__content--left",style:Object(c.a)({},at&&{"--sticky-header-height":"".concat(at+8,"px")}),children:[Ae,(jt||pt)&&Object(F.jsxs)("div",{className:u()("contiki-dates-and-pricing__buttons",{"contiki-dates-and-pricing__buttons--with-margin":!(null===J||void 0===J?void 0:J.roomSelectorEnabled)||!(null===J||void 0===J?void 0:J.titleSection)}),children:[jt&&Object(F.jsx)(N.a,{className:"contiki-dates-and-pricing__buttons-raq",smallGroupRaq:null===J||void 0===J?void 0:J.smallGroupRaq,requestQuoteSmallGroups:null===J||void 0===J?void 0:J.requestQuoteSmallGroups}),pt&&(null===He||void 0===He||null===(z=He.tabsApiUrl)||void 0===z?void 0:z.length)&&Object(F.jsx)(S.a,{className:"contiki-dates-and-pricing__buttons-find-price btn",findLowestPriceButton:null===J||void 0===J||null===(W=J.lowestPriceInfo)||void 0===W?void 0:W.label,lowestPriceInfo:null===J||void 0===J||null===(H=J.lowestPriceInfo)||void 0===H?void 0:H.lowestPriceInfo,isA:"buttonM"})]}),(null===J||void 0===J?void 0:J.roomSelectorEnabled)&&Object(F.jsx)(he.a,Object(c.a)(Object(c.a)({},null===J||void 0===J?void 0:J.titleSection),{},{textTypes:Ke,className:"contiki-dates-and-pricing__title"})),Object(F.jsx)(pe,{settings:J,viewState:st,setView:function(e){ut(e),(null===ie||void 0===ie?void 0:ie.year)&&(null===ie||void 0===ie?void 0:ie.id)&&(null===J||void 0===J?void 0:J.manualLoadMoreDerpartures)&&($(Object(T.a)()),kt({year:null===ie||void 0===ie?void 0:ie.year,month:null===ie||void 0===ie?void 0:ie.id,forceReFetch:!0,view:e}))},checkboxSelect:St,scrollCallback:function(){Object(A.p)("datesprices",at)},changeMonth:kt,changeYear:function(e){var t;kt({year:e,month:null===(t=Object(_.b)(te,e))||void 0===t?void 0:t.id,view:st})},currentMonthData:wt,monthOptions:Ue&&Ue,years:Ue&&Object(D.b)(Ue)}),st===R.b.CALENDAR&&Object(F.jsx)("div",{className:"contiki-dates-and-pricing__calendar-view",children:Object(F.jsx)(Ut.a,{active:re,children:Object(F.jsx)(Bt.a,Object(c.a)(Object(c.a)({},Mt),{},{currentMonth:ie,scrollCallback:function(){return Object(fe.l)(vt,at)},days:ie.items,startDate:new Date(ie.year||(new Date).getFullYear(),ie.id-1,1)}))})})]}),Object(F.jsx)("div",{className:"contiki-dates-and-pricing__content--right",children:st===R.b.LIST?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{className:"contiki-dates-and-pricing__details-anchor",ref:vt}),Object(F.jsx)(Ut.a,{active:re,children:Object(F.jsx)(Vt,{settings:J,dayChangeCallback:Nt,days:Ze,loadItems:function(){var e,t=Tt(),i=(null===t||void 0===t?void 0:t.year)&&(null===t||void 0===t?void 0:t.id)?Object(fe.d)(null===t||void 0===t?void 0:t.year,null===t||void 0===t?void 0:t.id,te,"next"):null,n=null===i||void 0===i?void 0:i[0],o=null!==(e=null===ie||void 0===ie?void 0:ie.manualLoadMoreUrl)&&void 0!==e?e:null===J||void 0===J?void 0:J.manualLoadMoreInitialUrl,l=(null===J||void 0===J?void 0:J.manualLoadMoreDerpartures)?o:null===n||void 0===n?void 0:n.dateNPriceQueryApiUrl,a=ht(),c=n?null===te||void 0===te?void 0:te.indexOf(n):null;l=Object(fe.a)({settings:J,initialApiUrl:l,checkboxList:de,tourOptionId:je}),n&&"number"===typeof a&&l&&c&&J&&$(Object(T.c)(l,c,a,J,R.b.LIST,!0))},viewType:st,loadInMonth:function(){var e,t=null!==(e=null===ie||void 0===ie?void 0:ie.manualLoadMoreUrl)&&void 0!==e?e:null===J||void 0===J?void 0:J.manualLoadMoreInitialUrl,i=(null===J||void 0===J?void 0:J.manualLoadMoreDerpartures)?t:null===ie||void 0===ie?void 0:ie.dateNPriceQueryApiUrl,n=ht();i=Object(fe.a)({settings:J,initialApiUrl:i,checkboxList:de,tourOptionId:je}),null!=n&&i&&J&&$(Object(T.c)(i,n,n,J,R.b.LIST,!0))},isNextMonthAvailable:function(){if((null===J||void 0===J?void 0:J.manualLoadMoreDerpartures)&&null===(null===ie||void 0===ie?void 0:ie.manualLoadMoreUrl))return!1;var e=Tt(),t=(null===e||void 0===e?void 0:e.year)&&Object(fe.d)(e.year,null===e||void 0===e?void 0:e.id,te,"next");return Boolean(t&&(null===t||void 0===t?void 0:t.length)>=1)}(),stickyHeaderOffset:at,columnWidthStyle:Et,alternateColumnSettings:zt})})]}):st===R.b.CALENDAR?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{className:"contiki-dates-and-pricing__details-anchor",ref:vt}),(null===le||void 0===le?void 0:le.items)&&(null===le||void 0===le?void 0:le.items[0])&&!("isInitial"in(null===le||void 0===le?void 0:le.items[0])&&(null===le||void 0===le||null===(G=le.items[0])||void 0===G?void 0:G.isInitial))&&Object(F.jsxs)("div",{className:"contiki-dates-and-pricing__list-item",children:[Object(F.jsx)(Rt,{headings:null===J||void 0===J?void 0:J.listViewHeadings,settings:J,hideEmptyColumns:!!zt,flexColumns:!!zt,headingsToDisplay:(null===J||void 0===J?void 0:J.viewType)===C.a.Calendar?["departure","price"]:void 0}),Object(d.createElement)(It,Object(c.a)(Object(c.a)({},Lt),{},{items:null===le||void 0===le?void 0:le.items,settings:J,otherTripTypesAvailable:null===le||void 0===le?void 0:le.otherTripTypesAvailable,key:null===le||void 0===le||null===(Q=le.startDate)||void 0===Q?void 0:Q.toString(),currencySymbol:null===J||void 0===J?void 0:J.currencySymbol,showElement:function(){return nt(!0)},viewType:st,hideElement:function(e){nt(!1),setTimeout((function(){return Object(A.p)(e,at)}),400)},zipMoney:null===J||void 0===J?void 0:J.zipMoney,optionSelectorSettings:null===J||void 0===J?void 0:J.optionSelectorSettings,hideMarketingMessage:null===J||void 0===J?void 0:J.hideMarketingMessage,percentageDiscountVisible:null===J||void 0===J?void 0:J.percentageDiscountVisible,columnWidthStyle:null!==(K=null===zt||void 0===zt?void 0:zt.columnFlexBasis)&&void 0!==K?K:Et,columnCount:null===zt||void 0===zt?void 0:zt.columnCount}))]})]}):Object(F.jsx)(ce.a,{text:"Wrong view type provided!"})})]})}):Object(F.jsx)("div",{className:"contiki-dates-and-pricing__loader",children:Object(F.jsx)(Ut.a,{active:!0})})}},765:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(1),o=i(266),l=function(){var e=Object(n.useContext)(o.b);return function(t,i){null===e||void 0===e||e.setIsOpen(t),null===e||void 0===e||e.setName(i)}}}}]);