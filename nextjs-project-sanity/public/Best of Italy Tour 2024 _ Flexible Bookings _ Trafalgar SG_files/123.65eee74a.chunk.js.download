(this.__LOADABLE_LOADED_CHUNKS__=this.__LOADABLE_LOADED_CHUNKS__||[]).push([[123],{1219:function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var o,i,a=n(197),l=n(34),r=n(33),s=n(1),c=n(10),d=n(196),u=n.n(d),b=n(215),v=n(330),j=n(261),p=n(2486),O=n(277),m=n(495),_=n(199),f=n(202),g=n(213),T=n(18),x=n(581),y=n(348),h=n(231),S=n(597),E=n(200),C=n(938),A=n(205),N=n(319),R=n(359),k=n(587),L=n(212),D=(o={},Object(l.a)(o,L.b.Desktop,"-120%"),Object(l.a)(o,L.b.Tablet,"-140%"),Object(l.a)(o,L.b.Mobile,"-100%"),o),w=(i={},Object(l.a)(i,L.b.Desktop,"-50%"),Object(l.a)(i,L.b.Tablet,"-80%"),Object(l.a)(i,L.b.Mobile,"-50%"),i),I=(n(1497),n(5)),B=function(e){var t,n=e.backgroundColor,o=e.icon,i=e.textColor,d=e.selectedDateText,B=e.startDate,M=e.endDate,H=e.buttonCTA,P=e.oldPrice,U=e.price,F=e.priceOldVisible,X=e.priceVisible,q=e.hideStrikethroughForWasPrice,Y=e.priceOldLabel,G=e.bannerPosition,V=e.closeCopyButtonText,K=Object(p.a)(),W=Object(s.useContext)(m.a),z=Object(g.d)(),Q=Object(j.a)(),J=Object(_.a)(),Z=Object(v.a)(),$=Object(p.b)((function(e){return e.tourPage})).tourOptionId,ee=Object(p.b)((function(e){return e.datesAndPricing})),te=ee.months,ne=ee.currentMonth,oe=ee.tripVariationsCheckboxList,ie=ee.selectedDepartureBannerMonthIndex,ae=ee.isSelectedDepartureBannerVisible,le=G===x.a.Top,re=function(e,t){var n,o=Object(s.useState)(void 0),i=Object(a.a)(o,2),l=i[0],r=i[1],c=Object(s.useRef)(void 0),d=Object(s.useState)(void 0),u=Object(a.a)(d,2),b=u[0],v=u[1],j=Object(s.useState)(void 0),m=Object(a.a)(j,2),f=m[0],g=m[1],x=Object(s.useState)(void 0),y=Object(a.a)(x,2),h=y[0],C=y[1],A=Object(p.b)((function(e){return e.tabs})).selectedTab,N=(null===A||void 0===A?void 0:A.id)===O.b.ITINERARY,R=Object(S.a)(),k=R.isBannerBelowTabs,L=R.isBannerBelowHero,D=Object(_.a)(E.g.LG),w=T.a?null===(n=document)||void 0===n?void 0:n.querySelector(".sticky-header-mobile"):null,I=D&&f?f-(w?2:0):null!==f&&void 0!==f?f:0;return Object(s.useEffect)((function(){if(setTimeout((function(){var e,t,n,o,i,a,l=null===(e=document)||void 0===e||null===(t=e.querySelector(".departure-banner__wrapper"))||void 0===t?void 0:t.getBoundingClientRect(),s=null===(n=document)||void 0===n||null===(o=n.querySelector("#top-messages"))||void 0===o?void 0:o.getBoundingClientRect(),d=null===(i=document)||void 0===i||null===(a=i.querySelector("#sticky-trip-header"))||void 0===a?void 0:a.getBoundingClientRect();r(null===l||void 0===l?void 0:l.top),c.current=null===l||void 0===l?void 0:l.top,v(null===l||void 0===l?void 0:l.height),C(null===s||void 0===s?void 0:s.height),g(null===d||void 0===d?void 0:d.height)}),500),k){var e=function(){var e,t,n,o,i,a;(null===(e=document)||void 0===e||null===(t=e.getElementById("sticky-trip-header"))||void 0===t?void 0:t.classList.contains("sticky-banner--hidden"))?null===(n=document)||void 0===n||null===(o=n.querySelector(".departure-banner__wrapper"))||void 0===o||o.classList.remove("departure-banner--sticky"):null===(i=document)||void 0===i||null===(a=i.querySelector(".departure-banner__wrapper"))||void 0===a||a.classList.add("departure-banner--sticky")};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}}),[]),Object(s.useEffect)((function(){var e=function(){setTimeout((function(){var e,t,n,o,i=null===(e=document)||void 0===e||null===(t=e.querySelector(".departure-banner__wrapper"))||void 0===t?void 0:t.getBoundingClientRect(),a=null===(n=document)||void 0===n||null===(o=n.querySelector("#sticky-trip-header"))||void 0===o?void 0:o.getBoundingClientRect();(null===i||void 0===i?void 0:i.top)&&r((null===i||void 0===i?void 0:i.top)+window.scrollY),g(null===a||void 0===a?void 0:a.height)}),500)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(s.useEffect)((function(){var n,o,i,a,r=null===(n=document)||void 0===n?void 0:n.getElementById("sticky-trip-header"),s=null!==(o=null===(i=document)||void 0===i?void 0:i.getElementById("topbar"))&&void 0!==o?o:null===(a=document)||void 0===a?void 0:a.getElementById("navbar");if(e){var c=function(){var e,t;null===s||void 0===s||null===(e=s.style)||void 0===e||e.setProperty("margin-top","0"),null===r||void 0===r||null===(t=r.style)||void 0===t||t.setProperty("top","0")},d=function(){var e,n,o,i,a,d,u,v;(!h||l&&window.scrollY>=l)&&(null===(e=document)||void 0===e||null===(n=e.querySelector(".departure-banner__wrapper"))||void 0===n||n.classList.add("departure-banner--sticky-top"),null===s||void 0===s||null===(o=s.style)||void 0===o||o.setProperty("margin-top","".concat(b,"px")),!(null===r||void 0===r?void 0:r.classList.contains("sticky-banner--hidden"))&&t?null===r||void 0===r||null===(i=r.style)||void 0===i||i.setProperty("top","".concat(b,"px")):(null===r||void 0===r||null===(a=r.style)||void 0===a||a.setProperty("top","0"),null===s||void 0===s||null===(d=s.style)||void 0===d||d.setProperty("margin-top","0"))),window.scrollY||null===(u=document)||void 0===u||null===(v=u.querySelector(".departure-banner__wrapper"))||void 0===v||v.classList.remove("departure-banner--sticky-top"),t||c()};return c(),window.addEventListener("scroll",d),function(){c(),window.removeEventListener("scroll",d)}}}),[b,t,h]),Object(s.useEffect)((function(){if(L){var e=function(){var e,t=null===(e=document)||void 0===e?void 0:e.querySelector(".departure-banner__wrapper");c.current&&window.scrollY>c.current?null===t||void 0===t||t.classList.add("departure-banner--sticky"):N&&c.current&&window.scrollY<=c.current&&(null===t||void 0===t||t.classList.remove("departure-banner--sticky"))};if(!l)return;return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}}),[l]),{bannerHeight:null!==b&&void 0!==b?b:0,stickyHeaderHeight:I}}(le,ae),se=re.bannerHeight,ce=re.stickyHeaderHeight,de=Object(S.a)().isBannerBelowTabs,ue=function(e){var t,n,o,i,a;return{selectedDateLabel:(t={},Object(l.a)(t,L.b.Desktop,{DEFAULT:"labelS",CH:"labelS"}),Object(l.a)(t,L.b.Tablet,{DEFAULT:"labelS",CH:"labelS"}),Object(l.a)(t,L.b.Mobile,{DEFAULT:"labelES",CH:"labelEs"}),t)[e],dateText:(n={},Object(l.a)(n,L.b.Desktop,{DEFAULT:"paragraphXS",CH:"subtitleXXXS"}),Object(l.a)(n,L.b.Tablet,{DEFAULT:"paragraphXS",CH:"subtitleXXXS"}),Object(l.a)(n,L.b.Mobile,{DEFAULT:"paragraphXXS"}),n)[e],priceText:(o={},Object(l.a)(o,L.b.Desktop,{DEFAULT:"labelM",CH:"commM"}),Object(l.a)(o,L.b.Tablet,{DEFAULT:"labelS",CH:"commM"}),Object(l.a)(o,L.b.Mobile,{DEFAULT:"labelS",CH:"commM"}),o)[e],buttonCTAText:(i={},Object(l.a)(i,L.b.Desktop,{DEFAULT:"buttonS",CH:"buttonM"}),Object(l.a)(i,L.b.Tablet,{DEFAULT:"buttonS",CH:"buttonM"}),Object(l.a)(i,L.b.Mobile,{DEFAULT:"buttonS",CH:"buttonM"}),i)[e],closeButton:(a={},Object(l.a)(a,L.b.Desktop,{DEFAULT:"paragraphXS"}),Object(l.a)(a,L.b.Tablet,{DEFAULT:"paragraphXS"}),Object(l.a)(a,L.b.Mobile,{DEFAULT:"paragraphXS"}),a)[e]}}(z),be=ue.dateText,ve=ue.priceText,je=ue.buttonCTAText,pe=ue.closeButton,Oe=ue.selectedDateLabel,me=Object(s.useRef)(""),_e=Object(s.useRef)(null),fe=function(e){return"".concat(J?"":Object(b.m)(new Date(e))," ").concat(Object(b.h)(new Date(e)))},ge=new Date(null!==B&&void 0!==B?B:"").getUTCFullYear(),Te=new Date(null!==B&&void 0!==B?B:"").getMonth()+1,xe=le&&se?ce+se:ce,ye={"--text-color":i,"--bg-color":n,"--sticky-header-height":"".concat(ce,"px"),"--content-margin":V?"auto":"unset","--animation-translate-y":de?D[z]:w[z]},he=function(e){return null===e||void 0===e?void 0:e.find((function(e){return e.dateId==="".concat(ge,"-").concat(Te)}))};Object(s.useEffect)((function(){!me.current&&(null===W||void 0===W?void 0:W.tripSubtitle)&&(me.current=null===W||void 0===W?void 0:W.tripSubtitle)}),[null===W||void 0===W?void 0:W.tripSubtitle]),Object(s.useEffect)((function(){ne&&ie&&function(){var e,t,n,o=null===ne||void 0===ne||null===(e=ne.items)||void 0===e||null===(t=e.find((function(e){return(null===e||void 0===e?void 0:e.startDate)===B&&(null===e||void 0===e?void 0:e.endDate)===M})))||void 0===t||null===(n=t.items)||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.subtitle)===(null===W||void 0===W?void 0:W.tripSubtitle)||!(null===e||void 0===e?void 0:e.subtitle)}));!_e.current&&o&&(_e.current=o);var i=null!==o&&void 0!==o?o:_e.current;i&&K(Object(C.d)(i)),setTimeout((function(){(null===i||void 0===i?void 0:i.id)&&Object(f.p)(+(null===i||void 0===i?void 0:i.id),xe)}),400)}()}),[ne,ce,ie]);var Se=ae?Object(I.jsx)("div",{className:"departure-banner__wrapper",style:ye,children:Object(I.jsxs)("div",{className:"departure-banner",children:[Object(I.jsxs)("div",{className:"departure-banner__content",children:[Object(I.jsxs)("div",{className:"departure-banner__dates-section",children:[Object(I.jsx)(N.a,{text:d,textStyles:Oe}),Object(I.jsxs)("div",{className:"departure-banner__dates",children:[Object(I.jsx)(R.a,{className:"departure-banner__icon",name:o}),B&&Object(I.jsx)(N.a,{className:"departure-banner__start-date",text:fe(B),textStyles:be}),Object(I.jsx)(R.a,{name:"thin-arrow-right",className:"departure-banner__arrow-icon"}),M&&Object(I.jsx)(N.a,{className:"departure-banner__end-date",text:fe(M),textStyles:be})]})]}),Object(I.jsxs)("div",{className:"departure-banner__price-section",children:[Object(I.jsxs)("div",{className:"departure-banner__prices",children:[P&&F&&Object(I.jsxs)("div",{className:"departure-banner__old-price-wrapper",children:[Y&&Object(I.jsx)(N.a,{className:"departure-banner__old-price-label",text:Y||"Price",isA:"paragraphXXS"}),Object(I.jsx)(N.a,{className:u()("departure-banner__old-price",{"departure-banner__old-price--strikethrough":!q}),text:P,isA:"paragraphXXS"})]}),X&&Object(I.jsx)(N.a,{className:"departure-banner__price",text:U,textStyles:ve})]}),(null===H||void 0===H?void 0:H.linkRepresentation)&&Object(I.jsx)(k.a,{className:"departure-banner__button",linkRepresentation:H.linkRepresentation,textStyles:je,onClick:function(){var e=he(te),t=e&&(null===te||void 0===te?void 0:te.indexOf(e));t&&(K(Object(C.n)(t)),K(Object(C.f)(t))),Z||Q(O.b.DATES_AND_PRICES),function(){var e=he(te),t=e&&(null===te||void 0===te?void 0:te.indexOf(e)),n=null===e||void 0===e?void 0:e.dateNPriceManualInitialQueryApiUrl,o=null===W||void 0===W?void 0:W.dateNPricingSettings,i=Object.keys(null!==oe&&void 0!==oe?oe:{}).reduce((function(e,t){return Object(r.a)(Object(r.a)({},e),{},Object(l.a)({},t,t===me.current))}),{});n=Object(h.a)({settings:o,initialApiUrl:n,checkboxList:i,tourOptionId:$}),Object.entries(null!==oe&&void 0!==oe?oe:{}).some((function(e){var t=Object(a.a)(e,2),n=t[0];return t[1]&&n!==me.current}))&&K(Object(C.p)(i)),o&&n&&t&&K(Object(C.c)(n,t,t,o,y.a.LIST))}()},dataAttributes:{itemType:A.a.itemType.BOOKING_INTEREST,itemName:A.a.itemName.BOOK_NOW}})]})]}),V&&Object(I.jsxs)("div",{className:"departure-banner__close-section",onClick:function(){return K(Object(C.o)(!1))},children:[Object(I.jsx)(N.a,{text:V,textStyles:pe,className:"departure-banner__close-label","data-item-type":A.a.itemType.GENERAL_INTERACTION,"data-item-name":A.a.itemName.CLOSE_LMD_BANNER}),Object(I.jsx)(R.a,{name:"ui-close",className:"departure-banner__close-icon",dataAttributes:{itemType:A.a.itemType.GENERAL_INTERACTION,itemName:A.a.itemName.CLOSE_LMD_BANNER}})]})]})}):null,Ee=T.a?null===(t=document)||void 0===t?void 0:t.querySelector(".selected-departure-banner--top"):null;return le&&Ee?Object(c.createPortal)(Se,Ee):Se}},1497:function(e,t,n){},214:function(e,t,n){"use strict";var o;n.d(t,"a",(function(){return o})),function(e){e[e.Ratio_2_1=0]="Ratio_2_1",e[e.Ratio_16_9=1]="Ratio_16_9",e[e.Ratio_3_2=2]="Ratio_3_2",e[e.Ratio_4_3=3]="Ratio_4_3",e[e.Ratio_1_1=4]="Ratio_1_1",e[e.Ratio_1_2=5]="Ratio_1_2",e[e.Ratio_9_16=6]="Ratio_9_16",e[e.Ratio_2_3=7]="Ratio_2_3",e[e.Ratio_3_4=8]="Ratio_3_4",e[e.Ratio_3_1=9]="Ratio_3_1",e[e.Ratio_1_3=10]="Ratio_1_3"}(o||(o={}))},446:function(e,t,n){"use strict";var o,i,a=n(33),l=n(197),r=n(1),s=n(240),c=n(2486),d=n(202),u=n(222),b=n(203),v=n(212),j=n(213),p=n(18),O=n(230),m=n(34),_=n(196),f=n.n(_),g=n(206),T=n(261);!function(e){e.ITINERARY="itinerary",e.DATES_AND_PRICES="datesprices",e.HIGHLIGHTS="highlights",e.REVIEWS="reviews"}(o||(o={})),function(e){e.DATE_N_PRICING="DateNPricing",e.MAP_ITINERARY="MapItinerary",e.TRIP_VARIATIONS="TripVariations"}(i||(i={}));var x=n(200),y=n(359),h=n(319),S=n(587),E=function(e){var t;return{toastTitle:(t={},Object(m.a)(t,v.b.Desktop,{DEFAULT:"labelL",AA:"pretitleM"}),Object(m.a)(t,v.b.Tablet,{DEFAULT:"labelL",AA:"pretitleM"}),Object(m.a)(t,v.b.Mobile,{DEFAULT:"labelM",AA:"pretitleS"}),t)[e]}},C=(n(499),n(5)),A=function(e){var t,n,i,l,s,d,v,p,_=e.id,A=e.message,N=e.type,R=e.closeMessage,k=e.dismissed,L=e.messageName,D=Object(j.d)(),w=Object(T.a)(void 0,x.r.MAP_ITINERARY),I=Object(c.b)((function(e){return e.tourPage})).selectedMonth,B=Object(r.useContext)(b.a),M=(null===A||void 0===A||null===(t=A.link)||void 0===t||null===(n=t.linkRepresentation)||void 0===n?void 0:n.text)||!(null===A||void 0===A?void 0:A.hideCloseButton)||0===(null===A||void 0===A?void 0:A.autoCloseTimeSeconds),H=(null===A||void 0===A?void 0:A.borderColor)||(null===A||void 0===A?void 0:A.textColor),P=Object(a.a)(Object(a.a)(Object(a.a)({},(null===A||void 0===A?void 0:A.borderColor)&&{borderColor:A.borderColor}),(null===A||void 0===A?void 0:A.borderColor)&&(null===B||void 0===B?void 0:B.brandCode)!==u.a.AW&&{background:Object(O.c)(A.borderColor)}),(null===A||void 0===A?void 0:A.textColor)&&{color:A.textColor}),U={"--icon-background-color":null===A||void 0===A?void 0:A.iconColor},F=Object(r.useCallback)((function(){return R(_)}),[R,_]),X=Object(r.useCallback)((function(){w(o.ITINERARY),F()}),[F,w]);Object(r.useEffect)((function(){(null===A||void 0===A?void 0:A.autoCloseTimeSeconds)&&window.setTimeout((function(){return F()}),1e3*(null===A||void 0===A?void 0:A.autoCloseTimeSeconds))}),[null===A||void 0===A?void 0:A.autoCloseTimeSeconds]);var q=Object(O.b)(I);return Object(C.jsxs)("div",Object(a.a)(Object(a.a)({"data-testid":N,className:f()("toast-message","toast-message--".concat(N),"toast-message--".concat(N,"__").concat(q),Object(m.a)({"toast-message--close":k},"toast-message--".concat(N,"__variant-change"),L===O.a.tripVariantToastMessage))},H&&{style:P}),{},{children:[Object(C.jsx)(y.a,Object(a.a)({name:null===A||void 0===A?void 0:A.icon,className:"toast-message__icon","data-testid":"toast-message-icon"},(null===A||void 0===A?void 0:A.iconColor)&&{style:U})),Object(C.jsxs)("div",{className:"toast-message__content","data-testid":"toast-message-content",children:[Object(C.jsx)(h.a,{textStyles:E(D).toastTitle,className:"toast-message__title",text:null===A||void 0===A?void 0:A.title,dataTestId:"toast-message-content-title-text"}),Object(C.jsx)(h.a,{isA:"paragraphXS",isRichText:!0,className:"toast-message__text",text:null===A||void 0===A?void 0:A.text,dataTestId:"toast-message-content-message-text"}),(null===A||void 0===A?void 0:A.showNavigateToMapAndItineraryButton)&&Object(C.jsx)(S.a,Object(a.a)(Object(a.a)({className:"toast-message__itinerary-button",type:g.a.Text,text:(null===A||void 0===A?void 0:A.navigateToItineraryButtonText)||"Go to Iitnerary",isA:"linkS"},(null===A||void 0===A?void 0:A.textColor)&&{color:null===A||void 0===A?void 0:A.textColor}),{},{onClick:X}))]}),M&&Object(C.jsxs)("div",{className:"toast-message__buttons","data-testid":"toast-message-buttons",children:[Object(C.jsx)(S.a,{className:"toast-message__button",type:0,linkRepresentation:null===A||void 0===A||null===(i=A.link)||void 0===i?void 0:i.linkRepresentation,href:(null===A||void 0===A||null===(l=A.link)||void 0===l?void 0:l.url)&&(null===A||void 0===A||null===(s=A.link)||void 0===s?void 0:s.url),onClick:(null===A||void 0===A||null===(d=A.link)||void 0===d?void 0:d.url)?void 0:F,target:null===A||void 0===A||null===(v=A.link)||void 0===v?void 0:v.target,formId:null===A||void 0===A||null===(p=A.link)||void 0===p?void 0:p.formId,dataTestId:"toast-message-button"}),(!(null===A||void 0===A?void 0:A.hideCloseButton)||0===(null===A||void 0===A?void 0:A.autoCloseTimeSeconds))&&Object(C.jsx)(y.a,{name:"ui-close",onClick:F,className:"toast-message__close","data-testid":"toast-message-close-icon"})]})]}))};n(498),t.a=function(e){var t,n,o,i=e.data,m=Object(c.a)(),_=Object(r.useContext)(b.a),f=null===_||void 0===_?void 0:_.brandCode,g=Object(c.b)((function(e){return e.tourPage})).stickyFooterHeight,T=Object(j.d)(),x=Object(c.b)((function(e){return e.toastMessages})).messages,y=Object(r.useState)(null),h=Object(l.a)(y,2),S=h[0],E=h[1];Object(r.useEffect)((function(){var e;f===u.a.CH?E((null===x||void 0===x||null===(e=x.filter)||void 0===e?void 0:e.call(x,(function(e){return e.name!==O.a.seasonChangeSuccess})))||null):E(x)}),[x]);var N=!(!p.a||!(null===(t=document)||void 0===t?void 0:t.getElementById("sticky-footer")))&&(null===(n=document)||void 0===n?void 0:n.getElementById("sticky-footer").offsetHeight)>0,R=(null===_||void 0===_?void 0:_.brandCode)===u.a.CH&&T===v.b.Mobile&&N,k=Object(a.a)({},R&&{bottom:"".concat(g+O.e,"px")});return Object(C.jsx)("div",{className:"toast-messages-container","data-testid":"toast-messages-container",style:k,children:Object(d.a)(S)&&Object(C.jsx)("div",{className:"toast-messages","data-testid":"toast-messages",children:i&&(null===S||void 0===S||null===(o=S.map)||void 0===o?void 0:o.call(S,(function(e){var t,n=e.name;return i[n]?Object(C.jsx)(A,{id:e.id,message:i[n],messageName:n,type:Object(O.d)(null===(t=i[n])||void 0===t?void 0:t.type),dismissed:e.dismissed,closeMessage:function(){return m(Object(s.a)(e.id))}},e.id):null})))})})}},498:function(e,t,n){},499:function(e,t,n){},597:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(1),i=n(2486),a=n(277),l=n(495),r=n(581),s=function(e){var t,n=Object(i.b)((function(e){return e.tabs})).selectedTab,s=Object(o.useContext)(l.a),c=null!==e&&void 0!==e?e:null===s||void 0===s||null===(t=s.selectedDepartureBannerProps)||void 0===t?void 0:t.bannerPosition,d=(null===n||void 0===n?void 0:n.id)===a.b.ITINERARY,u=c===r.a.AboveHero||c===r.a.BelowHero&&(null===n||void 0===n?void 0:n.id)&&!d,b=c===r.a.BelowHero;return{isBannerAtTopOfPage:c===r.a.Top,isBannerBelowTabs:u,isBannerBelowHero:b}}}}]);