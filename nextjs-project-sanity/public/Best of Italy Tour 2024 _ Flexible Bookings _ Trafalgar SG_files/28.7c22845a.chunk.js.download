(this.__LOADABLE_LOADED_CHUNKS__=this.__LOADABLE_LOADED_CHUNKS__||[]).push([[28],{2015:function(e,t,o){},2016:function(e,t,o){},2017:function(e,t,o){},2018:function(e,t,o){},2019:function(e,t,o){},2020:function(e,t,o){},2021:function(e,t,o){},318:function(e,t,o){"use strict";o.r(t);var n,a=o(33),r=o(210),i=o.n(r),l=o(211),c=o(197),u=o(1),d=o(217),s=o.n(d),p=o(18),b=o(208),v=(o(1062),o(674)),f=o(196),m=o.n(f),j=o(222);!function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"}(n||(n={}));var O,g,h,x,y=o(243),C=o(200),S={AA:"labelM",CS:"labelEs",DEFAULT:"paragraphM"},k=o(319),T=o(359),A=o(973),L=(o(2019),o(5)),I=function(e){var t=e.items,o=e.text,n=Object(u.useState)(!1),a=Object(c.a)(n,2),r=a[0],i=a[1],l=Object(y.useMediaQuery)({maxWidth:C.g.SM});return Object(u.useEffect)((function(){l||i(!0)}),[l]),Object(L.jsxs)("div",{className:"mapboxLegendBottom__wrapper",children:[l&&Object(L.jsxs)("div",{className:"mapboxLegendBottom__title",onClick:function(){return i((function(e){return!e}))},children:[Object(L.jsx)(k.a,{textStyles:S,className:"mapboxLegendBottom__title__text",text:o}),Object(L.jsx)(T.a,{name:"arrow",rotate:r?90:270})]}),Object(L.jsx)("div",{className:"mapboxLegendBottom__container mapboxLegendBottom__container--".concat(r?"open":"closed"),children:Object(L.jsx)("ul",{"aria-label":"legend items",children:null===t||void 0===t?void 0:t.map((function(e,t){var o=e.icon,n=e.text;return Object(L.jsx)("li",{children:Object(L.jsx)(A.a,{className:"map-legend__item",text:n,iconName:o,textType:"labelS"})},"".concat(n,"-").concat(t))}))})})]})},_=o(544),N=o(465),D=o(199),E=o(203),w=o(428),R=function(e){var t=e.markersData,o=e.layout,n=e.paint,a=Object(u.useContext)(E.a),r=null===a||void 0===a?void 0:a.brandCode;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(v.d,{id:"popups",type:"geojson",data:t,children:Object(L.jsx)(v.a,{id:w.a.MARKER_LABEL,type:"symbol",source:"points",layout:o,paint:n})}),Object(L.jsxs)(v.d,{id:"markers",type:"geojson",data:t,generateId:!0,children:[Object(L.jsx)(v.a,{id:w.a.MARKER_DURATION_NUMBER,type:"symbol",source:"points",layout:r===j.a.CH?w.l:w.k,paint:w.m}),Object(L.jsx)(v.a,{id:w.a.MARKER_CIRCLE,type:"circle",source:"points",paint:w.i,layout:{"circle-sort-key":["get","duration"]}})]})]})},M=o(634),B=o(34),F=o(374),W="#2d5a7b",V={basicColor:"black",featuredColour:"#ccff00",font:"Soleil Bold",numberOffset:[0,.2],basicRadius:10},z={numberOffset:V.numberOffset,hoverCircleColor:V.featuredColour,strokeColor:V.featuredColour,font:V.font,color:V.basicColor,radius:V.basicRadius,textColor:V.basicColor,strokeWidth:3},U=(O={},Object(B.a)(O,F.a.BASIC,Object(a.a)(Object(a.a)({},z),{},{circleColor:V.basicColor,strokeColor:V.basicColor,strokeWidth:1,markerType:F.a.BASIC})),Object(B.a)(O,F.a.VIA,Object(a.a)(Object(a.a)({},z),{},{circleColor:"white",radius:4,strokeColor:V.basicColor,strokeWidth:2,markerType:F.a.VIA})),Object(B.a)(O,F.a.FIRST,Object(a.a)(Object(a.a)({},z),{},{circleColor:V.basicColor,markerType:F.a.FIRST})),Object(B.a)(O,F.a.LAST,Object(a.a)(Object(a.a)({},z),{},{circleColor:V.basicColor,markerType:F.a.LAST})),Object(B.a)(O,F.a.STARTEND,Object(a.a)(Object(a.a)({},z),{},{circleColor:V.basicColor,markerType:F.a.STARTEND,radius:0,numberColor:V.featuredColour,numberOffset:[-.05,.2],markerIcon:"marker-start-end-ch"})),Object(B.a)(O,F.a.OPTIONAL,Object(a.a)(Object(a.a)({},z),{},{color:W,circleColor:W,strokeColor:W,strokeWidth:1,textColor:W,markerType:F.a.OPTIONAL})),O),P="#414142",K="#283DC3",H="#FFC801",X="#161616",Q="Noto Sans",J=8,G=3,Z="#012042",Y="black",q=(g={},Object(B.a)(g,F.a.BASIC,{radius:8,circleColor:"white",numberColor:P,strokeColor:P,textColor:P,strokeWidth:2,font:Q,numberSize:14,markerType:F.a.BASIC}),Object(B.a)(g,F.a.VIA,{radius:2,strokeWidth:3,numberSize:14,circleColor:P,numberColor:P,strokeColor:P,textColor:P,font:Q,markerType:F.a.VIA}),Object(B.a)(g,F.a.FIRST,{circleColor:K,radius:J,strokeColor:K,strokeWidth:G,textColor:P,color:P,font:Q,markerType:F.a.FIRST}),Object(B.a)(g,F.a.LAST,{circleColor:H,radius:J,strokeColor:H,strokeWidth:G,textColor:X,font:Q,numberColor:X,color:P,markerType:F.a.LAST}),Object(B.a)(g,F.a.STARTEND,{radius:0,textColor:P,font:Q,markerIcon:"marker-start-end-cs",numberColor:P,markerType:F.a.STARTEND}),Object(B.a)(g,F.a.OPTIONAL,{color:Z,circleColor:Z,radius:8,strokeColor:Z,strokeWidth:2,textColor:Z,subtitleColor:Y,font:Q,numberSize:14,markerType:F.a.OPTIONAL}),g),$="#2d5a7b",ee="#414142",te="#4b6b35",oe="#e02044",ne="Open Sans Semibold",ae=8,re=3,ie={font:ne,radius:ae,textColor:ee,color:ee,strokeWidth:re},le=(h={},Object(B.a)(h,F.a.BASIC,Object(a.a)(Object(a.a)({},ie),{},{circleColor:ee,strokeColor:ee,markerType:F.a.BASIC})),Object(B.a)(h,F.a.VIA,Object(a.a)(Object(a.a)({},ie),{},{circleColor:"white",radius:2,strokeColor:ee,markerType:F.a.VIA})),Object(B.a)(h,F.a.FIRST,Object(a.a)(Object(a.a)({},ie),{},{circleColor:te,strokeColor:te,markerType:F.a.FIRST})),Object(B.a)(h,F.a.LAST,Object(a.a)(Object(a.a)({},ie),{},{circleColor:oe,strokeColor:oe,markerType:F.a.LAST})),Object(B.a)(h,F.a.OPTIONAL,{font:ne,radius:ae,strokeWidth:re,color:$,circleColor:$,strokeColor:$,textColor:$,markerType:F.a.OPTIONAL}),Object(B.a)(h,F.a.STARTEND,Object(a.a)(Object(a.a)({},ie),{},{radius:0,markerIcon:"marker-start-end-tt",numberColor:"white",markerType:F.a.STARTEND})),h),ce={CH:U,CS:q,TT:le,DEFAULT:le},ue={CH:!0,TT:!0,CS:!0,DEFAULT:!1},de=function(e){return e?"".concat(e.coordinates[0],"-").concat(e.coordinates[1]):""},se=function(e){var t=e.dayData,o=e.lastNotOptLocationKey===e.key,n=[];if(1===t.length){var a=Object(c.a)(t[0],2),r=a[0],i=a[1],l=i>1?r+i-(o&&!(0===r)?0:1):0;n=["".concat(r).concat(l?"-".concat(l):"")]}else{var u=t.map((function(e,t){var o=Object(c.a)(e,2),n=o[0],a=o[1];if(0===a)return 0===t?0:[];if(a<=1)return n;for(var r=[],i=a;i>=1;)r.push(n+a-i),i-=1;return r})),d=u.flat();if(o){var s=Object(c.a)(t[t.length-1],2),p=s[0],v=s[1],f=d[d.length-1]+1,m=0!==v?f:p;d.push(m)}n=function(e){for(var t,o=[],n=e[0],a=e[0],r=1;r<e.length;r+=1){var i;e[r]-a===1||(o.push(n===a?null===(i=n)||void 0===i?void 0:i.toString():"".concat(n,"-").concat(a)),n=e[r]),a=e[r]}return o.push(n===a?null===(t=n)||void 0===t?void 0:t.toString():"".concat(n,"-").concat(a)),Object(b.a)(new Set(o))}(d)}return n},pe=function(e){var t,o=new Map,n=function(e){var t=1,o={};return e.forEach((function(e){var n=e.geometry,a=e.properties,r=de(n);if(Number.isInteger(null===a||void 0===a?void 0:a.duration)){var i,l,c,u=[t,null!==(i=null===a||void 0===a?void 0:a.duration)&&void 0!==i?i:0];(null===o||void 0===o||null===(l=o[r])||void 0===l?void 0:l.length)?null===o||void 0===o||o[r].push(u):o[r]=[u],t+=null!==(c=null===a||void 0===a?void 0:a.duration)&&void 0!==c?c:0}})),o}(e),a=de(null===(t=e.filter((function(e){var t;return!(null===(t=e.properties)||void 0===t?void 0:t.optional)})).pop())||void 0===t?void 0:t.geometry);return e.forEach((function(e,t){var r,i,l,c=e.geometry,u=e.properties,d=de(c),s=o.get(d),p=se({dayData:n[d],lastNotOptLocationKey:a,key:d}),v=(null!==(r=null===s||void 0===s?void 0:s.duration)&&void 0!==r?r:0)+(null!==(i=null===u||void 0===u?void 0:u.duration)&&void 0!==i?i:0);o.set(d,{duration:v,name:null===u||void 0===u?void 0:u.name,optional:null===u||void 0===u?void 0:u.optional,desc:null!==(l=null===u||void 0===u?void 0:u.desc)&&void 0!==l?l:"",index:(null===s||void 0===s?void 0:s.index)?[].concat(Object(b.a)(null===s||void 0===s?void 0:s.index),[t]):[t],days:p,fullData:n[d],coordinates:c.coordinates})})),o},be=function(e){var t=e.features,o=e.isStartEnd,n=e.startLabel,r=e.endLabel,i=e.showVisitedDaysNumber,l=e.showLabelWithBackground,u=e.brandCode,d=t.filter((function(e){return!1===e.properties.optional})),s=d[d.length-1],p=pe(t),v=[];return p.forEach((function(e,d){var f=Array.from(p.keys()).indexOf(d),m=p.get(d);if(m){var j,O,g,h,x,y=function(e){var t,o=e.index,n=e.duration,a=e.isStartEnd,r=e.coords,i=e.lastLocationCoords,l=e.isOptional,u=0===o,d=i.toString()===r.toString(),s=null!==(t=[[F.a.OPTIONAL,Boolean(l)],[F.a.STARTEND,u&&a],[F.a.FIRST,u],[F.a.VIA,0===n&&!d],[F.a.LAST,d],[F.a.BASIC,!0]].find((function(e){return Object(c.a)(e,2)[1]})))&&void 0!==t?t:[F.a.BASIC,!0];return Object(c.a)(s,1)[0]}({index:f,isStartEnd:o,lastLocationCoords:s.geometry.coordinates,duration:m.duration,coords:m.coordinates,isOptional:m.optional}),C=Object(a.a)({},t[m.index[0]].properties),S=function(e){var t,o,n,r,i,l=e.showVisitedDaysNumber,c=e.showLabelWithBackground,u=e.optionalDescription,d=e.startLabel,s=e.endLabel,p=e.featureName,v=e.nightCount,f=e.days,m=e.markerType,j=e.brandCode,O=e.fullData,g=null!==(t=ce[j])&&void 0!==t?t:ce.DEFAULT,h=null===(o=O.sort((function(e,t){return e[0]-t[0]})))||void 0===o?void 0:o.reverse(),x=1;h.forEach((function(e,t){0===t&&e[1]>0?x=0:(0===t&&0===e[1]||t<h.length&&h[t-1][0]-1===e[0])&&(x=t)}));var y=h.slice(x+1).reverse(),C=h.slice(0,x+1).reverse(),S=y.reduce((function(e,t){return e+t[1]}),0),k=C.reduce((function(e,t){return e+t[1]}),0),T=!l&&!c,A=function(e){return"".concat(T?"".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""," "):"").concat(e)},L=Object(a.a)(Object(a.a)({},g[m]),{},{icon:"label-basic",offset:[0,1.4],popupOffset:[0,12],anchor:"top",labelDescription:"",popupTitle:p,popupDescription:function(){var e,t=(e={},Object(B.a)(e,F.a.STARTEND,"".concat(d," - ")),Object(B.a)(e,F.a.FIRST,"".concat(d," - ")),Object(B.a)(e,F.a.LAST,"".concat(s," - ")),e),o=[""],n=function(e){return e?"Days: ":"Day: "};if(!l&&v>0)o=["".concat(v," night").concat(v>1?"s":"")];else if(l&&(null===f||void 0===f?void 0:f.length)){var a,r="".concat(null!==(a=t[m])&&void 0!==a?a:"").concat(n(f[0].includes("-")));if(m===F.a.STARTEND){var i=Object(b.a)(f),c=i.pop();o=0===i.length?["".concat(r).concat(c)]:["".concat(r).concat("0"===i[0]?"1":i.join(", ")),"".concat(s," - ").concat(n(f[f.length-1].includes("-"))).concat(c)]}else{var u=f.map((function(e){return"0"===e?"1":e}));o=["".concat(r).concat(u[0])]}}return o}()});return(i={},Object(B.a)(i,F.a.OPTIONAL,Object(a.a)(Object(a.a)({},L),{},{icon:"label-basic",offset:[1.6,-.3],popupOffset:[14,-4],anchor:c?"left":"top",labelDescription:u,popupTitle:A(p,u)})),Object(B.a)(i,F.a.VIA,Object(a.a)(Object(a.a)({},L),{},{icon:"label-via",anchor:c?"left":"top",offset:[1,0],popupOffset:l?[9,10]:[9,0],popupTitle:p})),Object(B.a)(i,F.a.DEFAULT,L),Object(B.a)(i,F.a.BASIC,L),Object(B.a)(i,F.a.FIRST,Object(a.a)(Object(a.a)({},L),{},{labelDescription:d,popupTitle:A(p,d)})),Object(B.a)(i,F.a.LAST,Object(a.a)(Object(a.a)({},L),{},{labelDescription:s,popupTitle:A(p,s)})),Object(B.a)(i,F.a.STARTEND,Object(a.a)(Object(a.a)({},L),{},{icon:"label-basic",offset:[0,2],popupOffset:[0,18],labelDescription:"".concat(d," / ").concat(s),popupTitle:A(p,"".concat(d," / ").concat(s))},ue[j]?{startDurationColor:null===(n=g[F.a.FIRST])||void 0===n?void 0:n.circleColor,endDurationColor:null===(r=g[F.a.LAST])||void 0===r?void 0:r.circleColor,endDuration:k,startDuration:S}:{})),i)[m]}({showVisitedDaysNumber:i,showLabelWithBackground:l,optionalDescription:null!==(j=m.desc)&&void 0!==j?j:"",featureName:null!==(O=C.name)&&void 0!==O?O:"",startLabel:n,endLabel:r,nightCount:m.duration,days:null!==(g=null===(h=p.get(d))||void 0===h||null===(x=h.days)||void 0===x?void 0:x.filter((function(e){return"0"!==e})))&&void 0!==g?g:[],markerType:y,brandCode:u,fullData:m.fullData}),k={duration:m.index.length>1?m.duration:C.duration};C=Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},C),S),k),{},{markerType:y,index:f}),v.push(Object(a.a)(Object(a.a)({},t[m.index[0]]),{},{properties:C}))}})),v};!function(e){e[e.TitleAndNightsNo=0]="TitleAndNightsNo",e[e.TitleAndVisitedDaysNo=1]="TitleAndVisitedDaysNo"}(x||(x={}));var ve=o(202),fe=o(207),me=[{offset:[-2,2],used:!1},{offset:[0,0],used:!1},{offset:[2,-1],used:!1}],je=[0,-1],Oe=function(e){var t,o,n,r,i,l=e.marker,c=e.adjacentMarkerExists,u=e.isBasicLayout,d=e.brandCode;switch(!0){case Object(fe.a)({CH:(null===l||void 0===l||null===(t=l.properties)||void 0===t?void 0:t.markerType)===F.a.STARTEND,DEFAULT:!1},d):return[0,-2];case c&&!!me:var s=null===(o=me)||void 0===o||null===(n=o.find((function(e){return!e.used})))||void 0===n?void 0:n.offset;return me=me.map((function(e){return e.offset===s?Object(a.a)(Object(a.a)({},e),{},{used:!0}):e})),null!==s&&void 0!==s?s:je;case u:return je;default:return null!==(r=null===(i=l.properties)||void 0===i?void 0:i.offset)&&void 0!==r?r:je}},ge=function(e,t,o){var n=Object(u.useState)(e),r=Object(c.a)(n,2),i=r[0],l=r[1],d=Object(u.useContext)(E.a),s=null===d||void 0===d?void 0:d.brandCode,p=t.startLabel,b=void 0===p?"Start":p,v=t.endLabel,f=void 0===v?"End":v,m=t.pointLabelStyle,j=t.pointBubbleStyle,O=t.mapboxHideBubblesWithNoOvernights,g=o||void 0===m||m===_.a.TitleOnly,h=j===x.TitleAndVisitedDaysNo,y=m===_.a.TitleWithStartStopLabel;return Object(u.useEffect)((function(){if(e.features){var t=e.features.filter((function(e){var t;return!1===(null===(t=e.properties)||void 0===t?void 0:t.optional)})),o=Object(ve.e)(t[0].geometry.coordinates,t[t.length-1].geometry.coordinates),n=be({features:e.features,isStartEnd:o,startLabel:b,endLabel:f,showVisitedDaysNumber:h,showLabelWithBackground:y,brandCode:s}),r=n.map((function(e){var t=function(e){var t=e.marker;return e.markersData.some((function(e){var o=e.geometry,n=e.properties;return parseInt(o.coordinates[0].toString(),10)===parseInt(t.geometry.coordinates[0].toString(),10)&&parseInt(o.coordinates[1].toString(),10)===parseInt(t.geometry.coordinates[1].toString(),10)&&n.name!==t.properties.name}))}({marker:e,markersData:n});return O&&"label-via"===e.properties.icon?Object(a.a)(Object(a.a)({},e),{},{properties:Object(a.a)(Object(a.a)({},e.properties),{},{name:"",icon:"",markerIcon:"",offset:Oe({marker:e,adjacentMarkerExists:t,isBasicLayout:g,brandCode:s})})}):Object(a.a)(Object(a.a)({},e),{},{properties:Object(a.a)(Object(a.a)({},e.properties),{},{offset:Oe({marker:e,adjacentMarkerExists:t,isBasicLayout:g,brandCode:s})})})}));l({type:"FeatureCollection",features:r})}return function(){return l({type:"FeatureCollection",features:[]})}}),[e.features,b,f,h,y]),[i]},he=100,xe={top:he,bottom:he,left:he,right:300},ye=(o(2018),function(e){var t,o=e.showPopup,n=e.currentFeature,a=n.geometry,r=n.properties,i=(null===r||void 0===r?void 0:r.markerType)===F.a.VIA?"popup-via":"",l=(null===r||void 0===r?void 0:r.markerType)===F.a.OPTIONAL;return Object(L.jsx)(L.Fragment,{children:o&&Object(L.jsx)(v.c,{longitude:null===a||void 0===a?void 0:a.coordinates[0],latitude:null===a||void 0===a?void 0:a.coordinates[1],anchor:null===r||void 0===r?void 0:r.anchor,closeButton:!1,closeOnClick:!1,offset:null===r||void 0===r?void 0:r.popupOffset,className:i,children:Object(L.jsxs)("div",{className:"popup-info",children:[Object(L.jsx)("strong",{className:m()("popup-info__title",i,{"popup-info__title--optional":l}),children:null===r||void 0===r?void 0:r.popupTitle}),null===r||void 0===r||null===(t=r.popupDescription)||void 0===t?void 0:t.map((function(e){return Object(L.jsx)("p",{className:"popup-info__details",children:l?null===r||void 0===r?void 0:r.desc:e},e)}))]})})})}),Ce=(o(2017),function(e){var t=e.legendItems,o=void 0===t?[]:t,n=Object(u.useState)(!1),a=Object(c.a)(n,2),r=a[0],i=a[1],l=function(){return i((function(e){return!e}))};return Object(L.jsx)("div",{className:"mapbox-legend",children:Object(L.jsxs)("div",{className:"mapbox-legend__wrapper",children:[Object(L.jsx)(T.a,{onClick:l,name:"ui-question-mark",className:"mapbox-legend__icon"}),r&&Object(L.jsxs)("div",{className:"mapbox-legend__content",children:[Object(L.jsx)(T.a,{onClick:l,name:"ui-cross",wrapperClass:"mapbox-legend__close",className:"mapbox-legend__close-icon"}),Object(L.jsx)("ul",{children:o.map((function(e,t){var o=e.icon,n=e.text;return Object(L.jsxs)("li",{children:[o&&Object(L.jsx)(T.a,{name:o}),Object(L.jsx)(k.a,{isA:"paragraphXXXS",text:n})]},"".concat(o,"-").concat(t))}))})]})]})})}),Se=o(300),ke=(o(2016),function(e){var t,a=e.lng,r=void 0===a?w.e:a,i=e.lat,l=void 0===i?w.d:i,d=e.zoom,s=void 0===d?6:d,p=e.countryCodes,f=e.geoJson,O=e.legend,g=e.mapboxSettings,h=e.onError,x=e.renderInQuickView,y=e.showStartStopLabel,S=e.toggleModal,k=e.isModalOpen,A=Object(u.useState)(!1),B=Object(c.a)(A,2),F=B[0],W=B[1],V=g.pointLabelStyle,z=Object(u.useContext)(E.a),U=null===z||void 0===z?void 0:z.brandCode,P=Object(D.a)(C.g.LG),K=Object(D.a)(),H=Object(u.useRef)(null),X=Object(u.useRef)(null),Q=Object(u.useRef)(void 0),J=Object(u.useRef)(void 0),G=Object(u.useRef)(!1),Z=Object(u.useState)(!1),Y=Object(c.a)(Z,2),q=Y[0],$=Y[1],ee=Object(u.useState)({}),te=Object(c.a)(ee,2),oe=te[0],ne=te[1],ae=Object(u.useState)(!1),re=Object(c.a)(ae,2),ie=re[0],le=re[1],ce=function(e){var t=Object(u.useState)([]),n=Object(c.a)(t,2),a=n[0],r=n[1];return Object(u.useEffect)((function(){return e.features&&e.features.length>1&&o.e(125).then(o.bind(null,295)).then((function(t){o.e(301).then(o.bind(null,1141)).then((function(n){o.e(300).then(o.bind(null,1142)).then((function(a){Promise.all([o.e(124),o.e(299)]).then(o.bind(null,2514)).then((function(i){o.e(124).then(o.bind(null,2309)).then((function(l){o.e(302).then(o.bind(null,2515)).then((function(o){var c={point:t.point,distance:n.default,bearing:a.default,midpoint:i.default,destination:l.default,greatCircle:o.default};r(Object(M.d)(e,c))}))}))}))}))}))})),function(){r([])}}),[e]),[a]}(f),ue=Object(c.a)(ce,1)[0],de=ge(f,g,y),se=Object(c.a)(de,1)[0],pe=function(e,t){var a=Object(D.a)(),r=Object(u.useState)([0,0,0,0]),i=Object(c.a)(r,2),l=i[0],d=i[1],s=Object(u.useState)({zoom:8}),p=Object(c.a)(s,2),v=p[0],f=p[1],m=Object(u.useMemo)((function(){return a?70:t.placement===n.Bottom?xe:he}),[a,t.placement]),j=function(e){var t=Object(c.a)(e,2),o=t[0],n=t[1];return o>=-180&&o<=180&&n>=-90&&n<=90};return Object(u.useEffect)((function(){if(e.features)if(1===e.features.length){var t=e.features[0].geometry.coordinates;j(t)&&d([t[0],t[1],t[0],t[1]])}else if(e.features.length>1){var n=e.features.filter((function(e){return j(e.geometry.coordinates)})).map((function(e){return e.geometry.coordinates}));o.e(303).then(o.bind(null,2531)).then((function(e){o.e(125).then(o.bind(null,295)).then((function(t){var o=t.lineString(Object(b.a)(n)),a=e.default(o);d([a[0],a[1],a[2],a[3]]),f({padding:m})}))}))}return function(){d([0,0,0,0]),f({zoom:8})}}),[e.features,m]),[l,v]}(f,O||{}),be=Object(c.a)(pe,2),ve=be[0],fe=be[1],me=(null===g||void 0===g?void 0:g.pointLabelStyle)===_.a.TitleWithStartStopLabel,je=Object(u.useMemo)((function(){return[].concat(Object(b.a)(me?[w.a.MARKER_LABEL]:[]),[w.a.MARKER_CIRCLE,w.a.MARKER_DURATION_NUMBER])}),[me]),Oe=!!(null===O||void 0===O||null===(t=O.items)||void 0===t?void 0:t.length),ke=Object(u.useCallback)((function(e){ne(e),le(!0)}),[]),Te=(null===O||void 0===O?void 0:O.placement)===n.Bottom;Object(u.useEffect)((function(){var e=X.current;return e&&F&&Ie(),function(){ue.forEach((function(t,o){Object(M.l)(e,"lineLayerCurved".concat(o)),Object(M.l)(e,"icon-layer-".concat(o)),Object(M.m)(e,"map-line-".concat(o))}))}}),[F,ue]),Object(u.useEffect)((function(){X.current&&F&&X.current.fitBounds(ve,fe)}),[ve,fe,F]);var Ae=Object(u.useCallback)((function(e,t,o){if(null!==(null===X||void 0===X?void 0:X.current)){var n=Object(M.b)(e,g,o,U),a=n.icon,r=n.size,i=n.spacing,l=n.aligment;a&&(null===X||void 0===X||X.current.loadImage(a,(function(e,o){var n,a,c;if(e)throw e;if(!(null===(n=X.current)||void 0===n?void 0:n.hasImage("icon-".concat(t)))&&o)null===(a=X.current)||void 0===a||a.addImage("icon-".concat(t),o);else if(o){var u,d;null===(u=X.current)||void 0===u||u.removeImage("icon-".concat(t)),null===(d=X.current)||void 0===d||d.addImage("icon-".concat(t),o)}!Object(M.h)(X.current,"icon-layer-".concat(t))&&Object(M.i)(X.current,"map-line-".concat(t))&&(null===(c=X.current)||void 0===c||c.getMap().addLayer({id:"icon-layer-".concat(t),type:"symbol",source:"map-line-".concat(t),layout:{"symbol-placement":"line","symbol-spacing":i,"icon-size":r,"icon-image":"icon-".concat(t),"icon-rotation-alignment":l}},w.a.MARKER_CIRCLE));return null})))}}),[g,U]),Le=Object(u.useCallback)((function(e,t){var o,n,a;Object(M.i)(X.current,"map-line-".concat(t))||(null===(a=X.current)||void 0===a||a.getMap().addSource("map-line-".concat(t),{type:"geojson",data:e}));null===(o=X.current)||void 0===o||o.getMap().addLayer({id:"lineLayerCurved".concat(t),type:"line",source:"map-line-".concat(t),layout:{"line-join":"round","line-cap":"round"},paint:null===(n=Object(M.c)(e,g))||void 0===n?void 0:n.paint})}),[g]),Ie=Object(u.useCallback)((function(){ue.forEach((function(e,t){var o,n,a;Le(e,t);var r=null===e||void 0===e||null===(o=e.properties)||void 0===o?void 0:o.optional;Ae(null!==(n=null===e||void 0===e||null===(a=e.properties)||void 0===a?void 0:a.transport)&&void 0!==n?n:N.a.None,t,!!r)})),me&&w.j.forEach((function(e){return Object(M.g)(e,X.current)})),(null===X||void 0===X?void 0:X.current)&&p&&(null===g||void 0===g?void 0:g.visitedCountriesColour)&&Object(M.f)(null===X||void 0===X?void 0:X.current,null===g||void 0===g?void 0:g.visitedCountriesColour,p),X.current&&Object(M.a)(X.current,je)}),[p,Ae,Le,je,null===g||void 0===g?void 0:g.visitedCountriesColour,ue,me]);return Object(L.jsxs)("div",{className:"map-and-legend-wrapper",onTouchMove:function(e){x&&2===e.touches.length&&e.stopPropagation()},children:[Object(L.jsxs)("div",{ref:H,className:m()("map-container",{"map-container--no-legend":!Oe||Te}),children:[!q&&Object(L.jsx)("div",{className:"map-container__loader",children:Object(L.jsx)(Se.a,{width:100,height:100})}),Oe&&!Te&&Object(L.jsx)(Ce,{legendItems:null===O||void 0===O?void 0:O.items}),Object(L.jsx)(T.a,{name:"expand",className:"mapboxgl-ctrl-group__expand",onClick:S}),Object(L.jsxs)(v.e,{ref:X,initialViewState:{longitude:r,latitude:l,zoom:s,bearing:0,pitch:0},cooperativeGestures:!k&&(x||K),mapStyle:g.style,mapboxAccessToken:g.apiKey,scrollZoom:!!k&&!K,interactiveLayerIds:je,onLoad:function(){var e;W(!0),null===(e=X.current)||void 0===e||e.on("touchend",je,(function(e){Object(M.j)(e,X,J,me,null===se||void 0===se?void 0:se.features,ke)})),P||Object(M.e)(X.current,je,Q.current,G.current,s,ve,fe),setTimeout((function(){$(!0)}),500)},onError:h,onMouseEnter:function(e){return Object(M.j)(e,X,J,me,se.features,ke)},onMouseLeave:function(){return Object(M.k)(X,J,le)},preserveDrawingBuffer:!0,children:[Object(L.jsx)(v.b,{}),Object(L.jsx)(ye,{showPopup:ie,currentFeature:oe,handleMouseEnter:ke,setShowPopup:le}),Object(L.jsx)(R,{markersData:se,layout:w.g[y?_.a.TitleOnly:null!==V&&void 0!==V?V:_.a.TitleOnly],paint:w.h[U===j.a.CH?_.a.TitleOnly:null!==V&&void 0!==V?V:_.a.TitleWithStartStopLabel]})]})]}),Te&&Object(L.jsx)(I,{items:O.items,text:O.expandLabel})]})}),Te=o(214),Ae=o(754),Le=o(213),Ie={LG:C.g.CUSTOM_XL,BVL:C.g.CUSTOM_XL,DEFAULT:C.g.MD},_e={titleMobile:{AW:"labelS",DEFAULT:"labelM"},titleDesktop:{AW:"labelS",DEFAULT:"paragraphS"},items:{AW:"paragraphM",DEFAULT:"labelM"}},Ne=(o(2021),function(e){var t,o,n=e.legend,r=Object(u.useState)(!1),i=Object(c.a)(r,2),l=i[0],d=i[1],s=Object(u.useContext)(E.a),p=null===s||void 0===s?void 0:s.brandCode,b=Object(D.a)(Object(Le.c)(p,Ie));return(null===n||void 0===n||null===(t=n.items)||void 0===t?void 0:t.length)>0?Object(L.jsxs)("div",{className:"map-legend","data-testid":"map-legend",style:Object(a.a)({},(null===n||void 0===n?void 0:n.backgroundColor)&&{"--map-legend-bg":null===n||void 0===n?void 0:n.backgroundColor}),children:[Object(L.jsx)("div",{className:"map-legend__title-section","data-testid":"map-legend-title-section  ",onClick:function(){return d(!l)},children:b?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(k.a,{textStyles:_e.titleMobile,className:"map-legend__title",dataTestId:"map-legend-title-text",text:null===n||void 0===n?void 0:n.title}),Object(L.jsx)(T.a,{name:"arrow",rotate:l?"90":"270"})]}):Object(L.jsx)(k.a,{textStyles:_e.titleDesktop,className:"map-legend__title",dataTestId:"map-legend-title-mobile-text",text:null===n||void 0===n?void 0:n.title})}),(l||!b)&&Object(L.jsx)("div",{className:"map-legend__items","data-testid":"map-legend-items",children:null===n||void 0===n||null===(o=n.items)||void 0===o?void 0:o.map((function(e,t){return Object(L.jsx)("div",{className:"map-legend__item-wrapper","data-testid":"map-legend-item-wrapper",children:Object(L.jsx)(A.a,{className:"map-legend__item",text:e.text,iconName:e.icon,textStyles:_e.items})},t)}))})]}):null}),De=(o(2020),function(e){var t=e.legend,o=e.fullMap,n=e.showZoomButtons,a=void 0===n||n,r=e.zoom,i=void 0===r?1:r,l=e.renderInQuickView,c=void 0!==l&&l,u=e.zoomImageModalToggle,d=e.className,s=void 0===d?"":d;return c?Object(L.jsx)(Ae.a,{url:null===o||void 0===o?void 0:o.url,alt:null===o||void 0===o?void 0:o.alt,centerX:null===o||void 0===o?void 0:o.focalPointX,centerY:null===o||void 0===o?void 0:o.focalPointY,crops:null===o||void 0===o?void 0:o.crops,width:600,height:600,dRatio:Te.a.Ratio_1_1,noScaling:!0},null===o||void 0===o?void 0:o.url):Object(L.jsxs)("div",{className:"itinerary-map ".concat(s),"data-testid":"itinerary-map",children:[Object(L.jsx)("div",{className:"itinerary-map__imagebox","data-testid":"itinerary-map-imagebox",children:Object(L.jsx)(Ae.a,{url:null===o||void 0===o?void 0:o.url,height:513,width:912,mWidth:720,alt:null===o||void 0===o?void 0:o.alt,crops:null===o||void 0===o?void 0:o.crops,dRatio:Te.a.Ratio_16_9,mRatio:Te.a.Ratio_1_1,showZoomButtons:a,noScaling:!0,zoom:i,zoomModalToggle:u})}),Object(ve.a)(null===t||void 0===t?void 0:t.items)&&!c&&Object(L.jsx)(Ne,{legend:t})]})}),Ee=o(236),we=o(2431);o(2015),t.default=function(e){var t,o,n,r,d,b,v=e.geoJson,f=e.useModal,m=e.modalTitle,j=e.quickViewUrl,O=e.renderInQuickView,g=e.legend,h=e.mapboxSettings,x=e.className,y=e.showZoomButtons,C=void 0===y||y,S=e.zoom,k=void 0===S?1:S,T=e.fullMap,A=e.countryCodes,I=e.showStartStopLabel,_=e.showFullScreen,N=e.onModalClose,D=!(!(null===h||void 0===h?void 0:h.apiKey)||!(null===h||void 0===h?void 0:h.style)),E={longitude:null===v||void 0===v||null===(t=v.features)||void 0===t||null===(o=t[0])||void 0===o||null===(n=o.geometry)||void 0===n?void 0:n.coordinates[0],latitude:null===v||void 0===v||null===(r=v.features)||void 0===r||null===(d=r[0])||void 0===d||null===(b=d.geometry)||void 0===b?void 0:b.coordinates[1]},w=Object(u.useState)(!1),R=Object(c.a)(w,2),M=R[0],B=R[1],F=Object(u.useState)(v),W=Object(c.a)(F,2),V=W[0],z=W[1],U=Object(Ee.a)(),P=U.isModalOpen,K=U.openModal,H=U.toggleModal,X=Object(u.useState)(!1),Q=Object(c.a)(X,2),J=Q[0],G=Q[1],Z={zoom:k,showZoomButtons:C,fullMap:T,className:x,toggleModal:H};Object(u.useEffect)((function(){var e=document.getElementById("inside_liveChatTab");e&&(e.style.display=P?"none":"block")}),[P]),Object(u.useEffect)((function(){D&&(null===v||void 0===v?void 0:v.features)&&(null===v||void 0===v?void 0:v.features.length)>0&&(B(!0),v.features.map((function(e){return e.geometry.coordinates})).forEach((function(e){var t=e[0]>-180||e[0]<180,o=e[1]>-90||e[1]<90;t&&o||B(!1)})))}),[v]),Object(u.useEffect)((function(){_&&K()}),[_]);var Y=function(e){e.error&&(G(!0),B(!1))},q=function(){var e=Object(l.a)(i.a.mark((function e(){var t,o,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,s.a.get(j);case 4:if(n=e.sent,!((null===(a=n.data)||void 0===a||null===(t=a.geoJson)||void 0===t||null===(o=t.features)||void 0===o?void 0:o.length)>0)){e.next=9;break}return z(a.geoJson),e.abrupt("return",K());case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(L.jsxs)(L.Fragment,{children:[M&&p.a&&v?Object(L.jsx)(ke,{onError:Y,geoJson:v,mapboxSettings:h,renderInQuickView:O,legend:g,countryCodes:A,lng:null===E||void 0===E?void 0:E.longitude,lat:null===E||void 0===E?void 0:E.latitude,showStartStopLabel:I,toggleModal:H}):Object(L.jsx)(De,Object(a.a)({renderInQuickView:O,legend:f?{}:g,zoomImageModalToggle:D?q:void 0},Z)),p.a&&Object(L.jsx)(we.a,{className:"map__modal",title:m,fullscreen:!0,visible:P,onClose:function(){H(),null===N||void 0===N||N()},withPortal:!0,children:J?Object(L.jsx)(De,Object(a.a)({renderInQuickView:O,legend:f?{}:g,zoomImageModalToggle:D?q:void 0},Z)):Object(L.jsx)(ke,{geoJson:V,onError:Y,mapboxSettings:h,renderInQuickView:O,legend:g,countryCodes:A,lng:null===E||void 0===E?void 0:E.longitude,lat:null===E||void 0===E?void 0:E.latitude,showStartStopLabel:I,toggleModal:function(){H(),null===N||void 0===N||N()},isModalOpen:P})})]})}},374:function(e,t,o){"use strict";var n;o.d(t,"a",(function(){return n})),function(e){e[e.BASIC=0]="BASIC",e[e.VIA=1]="VIA",e[e.FIRST=2]="FIRST",e[e.LAST=3]="LAST",e[e.STARTEND=4]="STARTEND",e[e.OPTIONAL=5]="OPTIONAL",e[e.DEFAULT=6]="DEFAULT"}(n||(n={}))},428:function(e,t,o){"use strict";o.d(t,"f",(function(){return p})),o.d(t,"b",(function(){return j})),o.d(t,"e",(function(){return O})),o.d(t,"d",(function(){return g})),o.d(t,"n",(function(){return y})),o.d(t,"c",(function(){return C})),o.d(t,"a",(function(){return S})),o.d(t,"i",(function(){return A})),o.d(t,"m",(function(){return L})),o.d(t,"k",(function(){return I})),o.d(t,"l",(function(){return _})),o.d(t,"h",(function(){return N})),o.d(t,"g",(function(){return D})),o.d(t,"j",(function(){return E}));var n,a,r,i,l=o(34),c=o(465),u=o(544),d=o(222),s=d.c?"/assets/shared/icons/":"shared/icons/",p="".concat(s,"mapbox-label-basic.png"),b="".concat(s,"mapbox-label-via.png"),v="".concat(s,"mapbox_start_end_marker_tt.png"),f="".concat(s,"mapbox_start_end_marker_cs.png"),m="".concat(s,"mapbox_start_end_marker_ch.png"),j=1e3,O=4.2451,g=50.6,h="#2D5A7B",x=(n={},Object(l.a)(n,d.a.CS,"#16216A"),Object(l.a)(n,d.a.CH,h),Object(l.a)(n,d.a.IV,h),Object(l.a)(n,d.a.LG,h),Object(l.a)(n,d.a.TT,h),Object(l.a)(n,d.a.TAP,h),Object(l.a)(n,d.a.SG,h),Object(l.a)(n,d.a.BV,h),Object(l.a)(n,d.a.BVL,h),Object(l.a)(n,d.a.AA,h),Object(l.a)(n,d.a.IJ,h),Object(l.a)(n,d.a.AW,h),n),y=function(e){return{coach:{"line-color":"black","line-width":1},other:{"line-color":"black","line-width":1,"line-dasharray":[1,2]},optional:{"line-color":e?x[e]:h,"line-width":2,"line-dasharray":[1,2]}}},C=(a={},Object(l.a)(a,c.a.None,{standard:"map-legend-arrow-black.png",optional:"map-legend-arrow-blue.png"}),Object(l.a)(a,c.a.Coach,{standard:"map-legend-arrow-black.png",optional:"map-legend-arrow-blue.png"}),Object(l.a)(a,c.a.Ferry,{standard:"map-legend-ferry-solid.png",optional:"map-legend-ferry-solid-blue.png"}),Object(l.a)(a,c.a.Flight,{standard:"map-legend-plane-black.png",optional:"map-legend-plane-blue.png"}),Object(l.a)(a,c.a.Train,{standard:"map-legend-train-black.png",optional:"map-legend-train-blue.png"}),Object(l.a)(a,c.a.Walk,{standard:"map-legend-arrow-black.png",optional:"map-legend-arrow-blue.png"}),Object(l.a)(a,c.a.CruiseShip,{standard:"map-legend-cruise-black.png",optional:"map-legend-cruise-blue.png"}),Object(l.a)(a,c.a.HighSpeedTrain,{standard:"map-legend-highspeed-train-black.png",optional:"map-legend-highspeed-train-blue.png"}),a),S={MARKER_LABEL:"markerLabel",MARKER_DURATION_NUMBER:"markerDurationNumber",MARKER_CIRCLE:"markerCircle"},k=["match",["get","font"],"Open Sans Light",["literal",["Open Sans Light"]],"Open Sans Semibold",["literal",["Open Sans Semibold"]],"Soleil Bold",["literal",["Soleil Bold"]],["literal",["Open Sans Semibold"]]],T={"text-field":["format",["get","name"],"\n",["get","labelDescription"],{"text-font":["literal",["Open Sans Light","Arial Unicode MS Regular"]],"text-color":["coalesce",["get","subtitleColor"],"black"]}],"text-anchor":["get","anchor"],"text-offset":["get","offset"],"text-max-width":15,"text-size":12,"icon-image":["get","icon"],"icon-text-fit":"both","icon-allow-overlap":!0,"text-line-height":1.6,"text-font":k,"symbol-sort-key":["-",["get","duration"]]},A={"circle-color":["case",["boolean",["feature-state","hover"],!1],["get","hoverCircleColor"],["get","circleColor"]],"circle-radius":["get","radius"],"circle-stroke-color":["case",["boolean",["feature-state","hover"],!1],["get","circleColor"],["get","strokeColor"]],"circle-stroke-width":["get","strokeWidth"]},L={"text-color":["coalesce",["get","numberColor"],"white"],"text-opacity":["case",["boolean",["feature-state","hover"],!1],0,1]},I={"text-field":["case",["boolean",["has","startDuration"],!0],["format",["get","startDuration"],{"text-color":["case",["==",["get","startDuration"],0],["get","startDurationColor"],"white"]},"\n",["get","endDuration"],{"text-color":["case",["==",["get","endDuration"],0],["get","endDurationColor"],["get","numberColor"]]}],["==",["get","duration"],0],"",["==",["get","markerIcon"],"marker-featured"],"",["get","duration"]],"text-font":k,"text-offset":["get","numberOffset"],"text-size":["get","numberSize"],"text-line-height":1.1,"icon-image":["case",["==",["get","markerIcon"],"marker-start-end-tt"],"marker-start-end-tt",["==",["get","markerIcon"],"marker-start-end-cs"],"marker-start-end-cs",""]},_={"text-field":["case",["boolean",["has","startDuration"],!0],["format",["get","startDuration"],{"text-color":["case",["==",["get","startDuration"],0],["get","numberColor"],["get","startDurationColor"]]},"\n",["get","endDuration"],{"text-color":["case",["==",["get","endDuration"],0],["get","endDurationColor"],["get","numberColor"]]}],["==",["get","duration"],0],"",["==",["get","markerIcon"],"marker-featured"],"",["get","duration"]],"text-font":k,"text-offset":["get","numberOffset"],"text-size":["get","numberSize"],"text-line-height":1.3,"icon-image":["case",["==",["get","markerIcon"],"marker-start-end-tt"],"marker-start-end-tt",["==",["get","markerIcon"],"marker-start-end-cs"],"marker-start-end-cs",["==",["get","markerIcon"],"marker-start-end-ch"],"marker-start-end-ch",""]},N=(r={},Object(l.a)(r,u.a.TitleOnly,{"text-halo-color":"white","text-halo-width":2,"text-halo-blur":1}),Object(l.a)(r,u.a.TitleWithStartStopLabel,{"text-color":["get","textColor"]}),r),D=(i={},Object(l.a)(i,u.a.TitleOnly,{"text-field":["get","name"],"text-offset":["get","offset"],"text-anchor":"bottom","text-size":16,"icon-text-fit":"both","icon-allow-overlap":!0,"text-allow-overlap":!0,"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"symbol-z-order":"source","symbol-sort-key":["-",["get","duration"]]}),Object(l.a)(i,u.a.TitleWithStartStopLabel,T),i),E=[{path:b,name:"label-via",options:{stretchX:[[15,185]],stretchY:[[15,185]],content:[10,0,190,195],pixelRatio:3}},{path:p,name:"label-basic",options:{stretchX:[[15,185]],stretchY:[[15,185]],content:[15,15,185,185],pixelRatio:3}},{path:f,name:"marker-start-end-cs"},{path:v,name:"marker-start-end-tt"},{path:m,name:"marker-start-end-ch"}]},465:function(e,t,o){"use strict";var n;o.d(t,"a",(function(){return n})),function(e){e[e.None=0]="None",e[e.Coach=1]="Coach",e[e.Ferry=2]="Ferry",e[e.Flight=3]="Flight",e[e.Train=4]="Train",e[e.Walk=5]="Walk",e[e.CruiseShip=6]="CruiseShip",e[e.HighSpeedTrain=7]="HighSpeedTrain"}(n||(n={}))},544:function(e,t,o){"use strict";var n;o.d(t,"a",(function(){return n})),function(e){e[e.TitleOnly=0]="TitleOnly",e[e.TitleWithStartStopLabel=1]="TitleWithStartStopLabel"}(n||(n={}))},634:function(e,t,o){"use strict";o.d(t,"h",(function(){return s})),o.d(t,"i",(function(){return p})),o.d(t,"m",(function(){return b})),o.d(t,"l",(function(){return v})),o.d(t,"d",(function(){return g})),o.d(t,"c",(function(){return C})),o.d(t,"b",(function(){return S})),o.d(t,"j",(function(){return k})),o.d(t,"k",(function(){return T})),o.d(t,"f",(function(){return A})),o.d(t,"e",(function(){return L})),o.d(t,"a",(function(){return I})),o.d(t,"g",(function(){return _}));var n=o(34),a=o(197),r=o(33),i=o(208),l=o(465),c=o(374),u=o(222),d=o(428),s=function(e,t){return null===e||void 0===e?void 0:e.getMap().getLayer(t)},p=function(e,t){return null===e||void 0===e?void 0:e.getMap().getSource(t)},b=function(e,t){p(e,t)&&(null===e||void 0===e||e.getMap().removeSource(t))},v=function(e,t){s(e,t)&&(null===e||void 0===e||e.getMap().removeLayer(t))},f=function(e,t,o){var n=[e],a=o.distance(e,t,{units:"meters"}),r=.3*Math.PI,i=a/2/Math.sin(r/2),l=i*Math.cos(r/2),c=o.bearing(e,t),u=o.midpoint(e,t),d=(e[0]-t[0])*(e[1]-t[1])>0?-1:1,s=90*d,p=o.destination(u.geometry.coordinates,l,c+s,{units:"meters"});n[25]=t;for(var b=180*r/Math.PI,v=o.bearing(p.geometry.coordinates,t),f=1;f<25;f+=1){var m=f*b/25,j=o.destination(p.geometry.coordinates,i,v-d*m,{units:"meters"});n[25-f]=j.geometry.coordinates}return n},m=function(e,t,o){var n=o.point(e),a=o.point(t);return o.greatCircle(n,a).geometry.coordinates},j=function(e,t){if(e){for(var o=[],n=0;n<e.length-1;n+=1){var a=e[n],r=e[n+1],l=t.distance(t.point(a),t.point(r))<=d.b?f(a,r,t):m(a,r,t);o.push.apply(o,Object(i.a)(l))}return o}return null},O=function(e,t){var o=[];return e.forEach((function(e,n){e.forEach((function(e){o.push({geometry:{coordinates:j(e.map((function(e){return e.coords})),t),type:"LineString"},properties:{transport:n,optional:1===e.findIndex((function(e){var t;return!0===(null===(t=e.properties)||void 0===t?void 0:t.optional)}))},type:"Feature"})}))})),o},g=function(e,t){if(!(null===e||void 0===e?void 0:e.features))return[];var o=[];e.features.forEach((function(t,n){var a;if((null===(a=t.properties)||void 0===a?void 0:a.optional)&&(null===e||void 0===e?void 0:e.features)){for(var i,l=null,c=1;null===l;){var u,d=e.features[n-c];if(!0!==(null===d||void 0===d||null===(u=d.properties)||void 0===u?void 0:u.optional)){l=d;break}c+=1}if(null===(i=l)||void 0===i?void 0:i.properties){var s=Object(r.a)(Object(r.a)({},l),{},{properties:Object(r.a)(Object(r.a)({},l.properties),{},{transport:t.properties.transport})});o.push([s,t,s])}}}));var n,a=e.features.filter((function(e){var t;return!0!==(null===(t=e.properties)||void 0===t?void 0:t.optional)})),l=h(Object(r.a)(Object(r.a)({},e),{},{features:a})),c=o.map((function(t){return h(Object(r.a)(Object(r.a)({},e),{},{features:t}))})),u=y(l),d=c.map(y),s=O(u,t);return n=d.map((function(e){return O(e,t)})).flat(1),[].concat(Object(i.a)(s),Object(i.a)(n))},h=function(e){if(!Array.isArray(e.features)||e.features.length<=1)return{};var t,o={};return e.features.forEach((function(n,a){var r;if(a>0){var i=o?o[t]:null,l=i&&i.length-1;i&&(l||0===l)&&i[l].push(n)}if(n.properties&&(null===(r=n.properties)||void 0===r?void 0:r.transport)!==t&&e.features&&a!==e.features.length-1){var c;t=null===(c=n.properties)||void 0===c?void 0:c.transport;var u,d=[n];if(Array.isArray(o[t]))null===(u=o[t])||void 0===u||u.push(d);else o[t]=[d]}})),o},x=function(e){return{coords:[e.geometry.coordinates[0],e.geometry.coordinates[1]],properties:e.properties}},y=function(e){var t=new Map;return Object.entries(e).forEach((function(e){var o=Object(a.a)(e,2),n=o[0],r=o[1].map((function(e){return e.map(x)}));t.set(Number(n),r)})),t},C=function(e,t,o){var n,a,r,i=null!==(n=null===e||void 0===e||null===(a=e.properties)||void 0===a?void 0:a.transport)&&void 0!==n?n:l.a.None,c=null===e||void 0===e||null===(r=e.properties)||void 0===r?void 0:r.optional;return S(i,t,c,o)},S=function(e,t,o,r){var i,c,s=Object(d.n)(r),p=s.optional,b=s.coach,v=s.other,f=null===t||void 0===t||null===(i=t.icons)||void 0===i?void 0:i.find((function(t){return t.transport===e})),m=o?[p,p,null===f||void 0===f?void 0:f.optionalTransportIcon]:[b,v,null===f||void 0===f?void 0:f.transportIcon],j=Object(a.a)(m,3),O=j[0],g=j[1],h=j[2],x=null!==h&&void 0!==h?h:o?d.c[e].optional:d.c[e].standard,y="".concat(u.c?"/assets":"","/shared/icons/").concat(x),C={aligment:"viewport",paint:g},S={aligment:"auto",paint:O},k={aligment:"auto",paint:g},T=(c={},Object(n.a)(c,l.a.None,S),Object(n.a)(c,l.a.Coach,S),Object(n.a)(c,l.a.Ferry,C),Object(n.a)(c,l.a.Flight,k),Object(n.a)(c,l.a.Train,C),Object(n.a)(c,l.a.Walk,S),Object(n.a)(c,l.a.CruiseShip,C),Object(n.a)(c,l.a.HighSpeedTrain,C),c)[e],A=T.aligment;return{icon:y,spacing:200,size:.7,paint:T.paint,aligment:A}},k=function(e,t,o,n,a,r){var i,l,u,d=null===(i=e.features)||void 0===i?void 0:i[0];if(n||(null===d||void 0===d||null===(l=d.properties)||void 0===l?void 0:l.markerType)!==c.a.VIA){var s;t.current.getCanvas().style.cursor="pointer";var p=null===d||void 0===d||null===(s=d.properties)||void 0===s?void 0:s.index;a&&r(a[p])}else if(!n&&(null===d||void 0===d||null===(u=d.properties)||void 0===u?void 0:u.markerType)!==c.a.VIA){var b,v;if(o.current||0===o.current)null===(b=t.current)||void 0===b||b.removeFeatureState({source:"markers",id:o.current});if((null===d||void 0===d?void 0:d.id)||0===(null===d||void 0===d?void 0:d.id))o.current=d.id,null===(v=t.current)||void 0===v||v.setFeatureState({source:"markers",id:o.current},{hover:!0})}},T=function(e,t,o){var n;(e.current.getCanvas().style.cursor="",o(!1),t.current||0===t.current)&&(null===(n=e.current)||void 0===n||n.setFeatureState({source:"markers",id:t.current},{hover:!1}));t.current=void 0},A=function(e,t,o){var n="country-boundaries";s(e,"country-boundaries")&&v(e,"country-boundaries"),p(e,"country-boundaries")&&b(e,"country-boundaries"),s(e,n)||e.getMap().addLayer({id:n,source:{type:"vector",url:"mapbox://mapbox.country-boundaries-v1"},"source-layer":"country_boundaries",type:"fill",paint:{"fill-color":t,"fill-opacity":.4}},"country-label").setFilter(n,["in","iso_3166_1"].concat(Object(i.a)(o)))},L=function(e,t,o,n,a,i,l){null===e||void 0===e||e.on("click",t,(function(t){var c,u,d,s,p;o===(null===(c=t.features)||void 0===c||null===(u=c[0].properties)||void 0===u?void 0:u.name)?(null===e||void 0===e||e.fitBounds(i,Object(r.a)({duration:1e3},l)),o=void 0):(null===e||void 0===e||e.flyTo({center:null===(d=t.features)||void 0===d?void 0:d[0].geometry.coordinates,zoom:a+1.5,duration:1e3}),o=null===(s=t.features)||void 0===s||null===(p=s[0].properties)||void 0===p?void 0:p.name);n=!1})),null===e||void 0===e||e.on("click",(function(){n&&(null===e||void 0===e||e.fitBounds(i,Object(r.a)({duration:1e3},l))),n=!0}))},I=function(e,t){t.forEach((function(t){return e.moveLayer(t)}))},_=function(e,t){null===t||void 0===t||t.loadImage(e.path,(function(o,n){if(o)throw o;if(n){var a;if(null===t||void 0===t?void 0:t.hasImage(e.name))null===t||void 0===t||t.updateImage(e.name,n);else null===t||void 0===t||t.addImage(e.name,n,null!==(a=e.options)&&void 0!==a?a:void 0);null===t||void 0===t||t.triggerRepaint()}}))}}}]);